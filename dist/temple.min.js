!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Temple=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(){this.children=[],this.parent=null,f.defineComputedProperties(this,f.pick(this,g)),f.toArray(arguments).forEach(this.appendChild,this)}var d=a("./events"),e=a("trackr"),f=a("./util"),g=["isRoot","hasChildren","firstChild","lastChild","nextSibling","previousSibling","parentNode","firstNode","nextSiblingNode"];b.exports=c,c.extend=f.subclass,c.isBinding=function(a){return a instanceof c},f.extend(c.prototype,d,{use:function(a){var b=f.toArray(arguments).slice(1);return a.apply(this,b),this},insertBefore:function(a,b){if(~["string","number"].indexOf(typeof a)&&(a=new c.Text(a)),!c.isBinding(a))throw new Error("Expecting child to be a binding.");if(a===this)throw new Error("Cannot add binding as a child of itself.");var d,e=this.children.length,f=a.parent;if(null!=b){if(!c.isBinding(b))throw new Error("Expecting before child to be a binding.");if(e=this.indexOf(b),!~e)throw new Error("Before binding is not a child of this binding.");if(b===a)throw new Error("Cannot add child before itself.");if(b.previousSibling===a)return a}if(f===this){if(d=this.indexOf(a),d===e-1)return a;this.children.splice(d,1),e=null!=b?this.indexOf(b):this.children.length}else null!=f&&(f.children.splice(f.indexOf(a),1),a.parent=null,f.trigger("child:remove",a));return this.children.splice(e,0,a),a.parent=this,f===this?this.trigger("child:move",a):(this.trigger("child:add",a),a.trigger("parent",this,f)),a.updateNodes(),a},appendChild:function(a){return this.insertBefore(a)},append:function(){return f.flatten(f.toArray(arguments)).forEach(this.appendChild,this),this},removeChild:function(a){var b=this.indexOf(a);if(~b){for(;b>-1;)this.children.splice(b,1),b=this.indexOf(a,b);return a.parent=null,this.trigger("child:remove",a),a.trigger("parent",null,this),a.updateNodes(),a}},empty:function(){return this.children.slice(0).forEach(this.removeChild,this),this},contains:function(a){return this.indexOf(a)>-1},indexOf:function(a){return this.children.indexOf(a)},firstChild:function(){return this.children[0]||null},lastChild:function(){var a=this.children.length;return a?this.children[a-1]:null},nextSibling:function(){if(this.isRoot)return null;var a=this.parent.indexOf(this),b=this.parent.children;return a>-1&&a<b.length-1?b[a+1]:null},previousSibling:function(){if(this.isRoot)return null;var a=this.parent.indexOf(this),b=this.parent.children;return a>0&&a<b.length?b[a-1]:null},hasChildren:function(){return this.children.length>0},isRoot:function(){return null==this.parent},updateNodes:function(){for(var a=this.children.length-1;a>=0;a--)this.children[a].updateNodes();return this.trigger("update"),this},toNodes:function(){return this.children.reduce(function(a,b){return a.push.apply(a,b.toNodes()),a},[])},parentNode:function(){if(this.isRoot)return null!=this.placeholder?this.placeholder.parentNode:null;for(var a=this.parent;null!=a;){if(a instanceof c.Node)return a.node;if(a.isRoot)return a.parentNode;a=a.parent}return null},firstNode:function(){var a=this.firstChild;return null!=a?a.firstNode:null},nextSiblingNode:function(){if(this.isRoot)return null!=this.placeholder?this.placeholder:null;var a=this.nextSibling;return null!=a?a.firstNode:this.parent instanceof c.Node?null:this.parent.nextSiblingNode},find:function(a){var b,c;for(c in this.children)if(b=this.children[c].find(a),null!=b)return b;return null},findAll:function(a){return this.children.reduce(function(b,c){return b.push.apply(b,c.findAll(a)),b},[])},paint:function(a,b){return"string"==typeof a&&(a=document.querySelector(a)),"string"==typeof b&&(b=a.querySelector(b)),null==a&&(a=document.createDocumentFragment()),null==this.placeholder&&(this.placeholder=document.createComment(f.uniqueId("$"))),a.insertBefore(this.placeholder,b),this.updateNodes(),this.trigger("paint",a,b),this},detach:function(){return null!=this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.updateNodes(),this.trigger("detach"),this},autorun:function(a,b){var c=e.autorun(a,this);return b&&!e.active&&c.stop(),c},toString:function(){return this.children.map(function(a){return a.toString()}).join("")},mount:function(){var a,b=f.toArray(arguments);return e.nonreactive(function(){this.stop(),this._initEventMethods(),this._mounting=!0,this.trigger("mount:before",b)},this),a=this._comp=this.autorun(function(a){this.trigger("render:before",b,a);var d=this.render.apply(this,b);c.isBinding(d)&&(d=[d]),Array.isArray(d)||(d=[]),this.trigger("render",b,a,d),d=d.map(this.appendChild,this),this.trigger("render:after",b,a,d),a.onInvalidate(function(){this.trigger("invalidate:before",b,a,d),d.forEach(this.removeChild,this),this.trigger("invalidate",b,a),this.trigger("invalidate:after",b,a),a.stopped&&(this.trigger("stop",b),delete this._comp)})}),e.nonreactive(function(){this.trigger("mount",b,a),this.trigger("mount:after",b,a),delete this._mounting},this),this},render:function(){},isMounted:function(){return this.isMounting()||null!=this._comp},isMounting:function(){return!!this._mounting},getComputation:function(){return this._comp},invalidate:function(){return this.isMounted()&&this._comp.invalidate(),this},stop:function(){return this.isMounted()&&this._comp.stop(),this},_initEventMethods:function(){return this._eventMethods?this:(this._eventMethods=!0,["mount","render","invalidate"].forEach(function(a){var b=a[0].toUpperCase()+a.substr(1);this.on(a+":before",f.runIfExists(this,"before"+b)),this.on(a,f.runIfExists(this,"on"+b)),this.on(a+":after",f.runIfExists(this,"after"+b))},this),this.on("stop",f.runIfExists(this,"onStop")),this)}}),c.prototype.hasChild=c.prototype.contains,c.prototype.removeAllChildren=c.prototype.empty,c.prototype.toHTML=c.prototype.toString,f.extend(c,a("./node")),c.HTML=a("./html")},{"./events":2,"./html":3,"./node":5,"./util":6,trackr:8}],2:[function(a,b){function c(a){if(null==a)return!0;if(Array.isArray(a)||"string"==typeof a)return 0===a.length;for(var b in a)if(e.has(a,b))return!1;return!0}function d(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}}var e=a("./util"),f=b.exports={on:function(a,b,c){if(!h(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!h(this,"once",a,[b,c])||!b)return this;var e=this,f=d(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,c)},off:function(a,b,c){var d,e,f,g,i,j,k,l;if(!this._events||!h(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events=void 0,this;for(g=a?[a]:Object.keys(this._events),i=0,j=g.length;j>i;i++)if(a=g[i],f=this._events[a]){if(this._events[a]=d=[],b||c)for(k=0,l=f.length;l>k;k++)e=f[k],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=Array.prototype.slice.call(arguments,1);if(!h(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&i(c,b),d&&i(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c(a._events))&&delete this._listeningTo[g];return this}},g=/\s+/,h=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(g.test(c)){for(var f=c.split(g),h=0,i=f.length;i>h;h++)a[b].apply(a,[f[h]].concat(d));return!1}return!0},i=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},j={listenTo:"on",listenToOnce:"once"};e.each(j,function(a,b){f[b]=function(b,c,d){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=e.uniqueId("l"));return f[g]=b,d||"object"!=typeof c||(d=this),b[a](c,d,this),this}}),f.bind=f.on,f.unbind=f.off},{"./util":6}],3:[function(a,b){var c=a("./binding"),d=a("./util");b.exports=c.extend({constructor:function(a){c.call(this),this.nodes=[],this.setValue(a)},insertBefore:function(){throw new Error("HTML bindings can't have children.")},updateNodes:function(){var a,b,c,e=this.parentNode;if(null!=e)for(a=this.nextSiblingNode,c=this.nodes.length-1;c>=0;c--)b=this.nodes[c],d.isNodeAtDOMPosition(b,e,a)||e.insertBefore(b,a),a=b;else this.removeNodes();return this.trigger("update"),this},removeNodes:function(){var a,b;for(b=0;b<this.nodes.length;b++)a=this.nodes[b],null!=a.parentNode&&a.parentNode.removeChild(a);return this},setValue:function(a){if(a instanceof Node&&(a=11===a.nodeType?d.toArray(a.childNodes):[a]),!Array.isArray(a)){a=null!=a?a.toString():"";var b=document.createElement("div");b.innerHTML=a,a=d.toArray(b.childNodes)}return this.removeNodes(),this.nodes=a,this.updateNodes(),this},toNodes:function(){return this.nodes.slice(0)},firstNode:function(){return this.nodes[0]||null},find:function(a){var b,c,e;for(b in this.nodes)if(c=this.nodes[b],1===c.nodeType){if(d.matchesSelector(c,a))return c;if(e=c.querySelector(a),null!=e)return e}return null},findAll:function(a){var b,c,e=[];for(b in this.nodes)c=this.nodes[b],1===c.nodeType&&(d.matchesSelector(c,a)&&matches.push(c),e.push.apply(e,d.toArray(c.querySelectorAll(a))));return e},toString:function(){return this.nodes.map(function(a){return 1===a.nodeType?a.outerHTML:a.nodeValue}).join("")}})},{"./binding":1,"./util":6}],4:[function(a,b){var c=a("./binding"),d=a("./util"),e=b.exports=c.extend({constructor:function(){c.call(this),this.initialize.apply(this,arguments)},initialize:function(){this.append(d.toArray(arguments))}});e.VERSION="0.4.0",e.util=d,e.Events=a("./events"),e.Binding=c;var f=e.Deps=a("trackr");e.autorun=f.autorun,e.nonreactive=f.nonreactive,e.nonreactable=f.nonreactable,e.Dependency=f.Dependency},{"./binding":1,"./events":2,"./util":6,trackr:8}],5:[function(a,b,c){function d(a,b,c){return h.extend({constructor:function(c){c instanceof window.Node&&c.nodeType===a?(this.node=c,this.value=c.nodeValue):(this.node=document[b](""),this.setValue(c)),h.call(this)},insertBefore:function(){throw new Error(c+" bindings can't have children.")},setValue:function(a){return a=null!=a?a.toString():"",a!==this.node.nodeValue&&(this.node.nodeValue=a),this.value=a,this},toString:function(){return this.node.nodeValue}})}var e=a("./binding"),f=a("./util"),g=/^(\S+)\s*(.*)$/,h=c.Node=e.extend({updateNodes:function(){var a=this.parentNode,b=this.nextSiblingNode;return null==a||f.isNodeAtDOMPosition(this.node,a,b)?null==a&&null!=this.node.parentNode&&this.node.parentNode.removeChild(this.node):a.insertBefore(this.node,b),this.trigger("update"),this},prop:function(a,b){return f.isObject(a)&&null==b?(f.each(a,function(a,b){this.prop(b,a)},this),this):"undefined"==typeof b?this.node[a]:(this.node[a]=b,this)},addEventListener:function(a,b,c,d){function e(e){var g;("string"!=typeof b||""===b||(g=f.closest(e.target,b)))&&(d.once&&h.removeEventListener(a,c),c.call(d.context||h,e,g))}var h=this;if(f.isObject(a))return f.each(a,function(a,c){var d=c.match(g);this.addEventListener(d[1],d[2],a,b)},this),this;if("function"==typeof b&&(null==d&&(d=c),c=b,b=null),d=d||{},"string"!=typeof a||""===a)throw new Error("Expecting non-empty string event name.");if("function"!=typeof c)throw new Error("Expecting function for listener.");return null==this._eventListeners&&(this._eventListeners=[]),this._eventListeners.push({type:a,listener:c,event:e,options:d}),this.node.addEventListener(a,e),this},addEventListenerOnce:function(a,b,c,d){return f.isObject(a)?this.addEventListener(a,f.extend({once:!0},b||{})):("function"==typeof b&&(null==d&&(d=c),c=b,b=null),this.addEventListener(a,b,c,f.extend({once:!0},d||{})))},removeEventListener:function(a,b){if(null==this._eventListeners)return this;var c=[];return"function"==typeof a&&null==b&&(b=a,a=null),f.isObject(a)?f.each(a,function(a,b){var d=b.match(g);c.push.apply(c,this._eventListeners.filter(function(b){return b.type===d[1]&&b.listener===a&&!~c.indexOf(b)}))},this):c=this._eventListeners.filter(function(c){return!(null!=a&&a!==c.type||null!=b&&b!==c.listener)}),c.forEach(function(a){var b=this._eventListeners.indexOf(a);~b&&(this.node.removeEventListener(a.type,a.event),this._eventListeners.splice(b,1))},this),this},toNodes:function(){return[this.node]},firstNode:function(){return this.node},find:function(){return null},findAll:function(){return[]}}),i=c.Text=d(3,"createTextNode","Text"),j=c.Comment=d(8,"createComment","Comment");j.prototype.toString=function(){return"<!--"+this.node.nodeValue+"-->"};var k=c.Element=h.extend({constructor:function(a){var b=f.toArray(arguments).slice(1);if(a instanceof window.Node&&1===a.nodeType)this.node=a,this.tagname=a.tagName.toLowerCase(),l(f.toArray(a.childNodes)).forEach(function(a){b.push(a)});else{if("string"!=typeof a)throw new Error("Expecting string for element tag name.");this.tagname=a,this.node=document.createElement(a)}h.apply(this,b);var c="function"==typeof this.events?this.events.call(this):this.events;f.isObject(c)&&this.addEventListener(c)},getAttribute:function(a){return this.node.getAttribute(a)},setAttribute:function(a,b){return this.node.setAttribute(a,b),this},removeAttribute:function(a){return this.node.removeAttribute(a),this},attr:function(a,b){return f.isObject(a)&&null==b?(f.each(a,function(a,b){this.attr(b,a)},this),this):"undefined"==typeof b?this.getAttribute(a):(this.setAttribute(a,b),this)},style:function(a,b){return f.isObject(a)&&null==b?(f.each(a,function(a,b){this.style(b,a)},this),this):"undefined"==typeof b?getComputedStyle(this.node)[a]:(this.node.style[a]=b,this)},hasClass:function(a){return this.node.classList.contains(a)},addClass:function(){return f.flatten(f.toArray(arguments)).forEach(function(a){this.node.classList.add(a.split(" "))},this),this},removeClass:function(){return f.flatten(f.toArray(arguments)).forEach(function(a){this.node.classList.remove(a.split(" "))},this),this},find:function(a){return f.matchesSelector(this.node,a)?this.node:this.node.querySelector(a)},findAll:function(a){var b=[];return f.matchesSelector(this.node,a)&&b.push(this.node),b.push.apply(b,f.toArray(this.node.querySelectorAll(a))),b},toString:function(){return this.node.outerHTML}});c.DOM={},["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"].forEach(function(a){c.DOM[a]=k.extend({constructor:function(){var b=f.toArray(arguments);b.unshift(a),k.apply(this,b)}})});var l=c.fromNode=function(a){if(Array.isArray(a))return a.map(l).filter(function(a){return null!=a});switch(a.nodeType){case 1:return new k(a);case 3:return new i(a);case 8:return new j(a);case 11:var b=new e;return l(f.toArray(a.childNodes)).forEach(b.appendChild,b),b}};c.fromHTML=function(a){var b,c;return b=document.createElement("div"),b.innerHTML=a,c=l(f.toArray(b.childNodes)),1===c.length?c[0]:(new e).append(c)},c.fromSelector=function(a){"object"!=typeof a&&(a=f.parseSelector(a));var b=new k(a.tagname);return null!=a.id&&b.prop("id",a.id),b.addClass(a.classes),b.attr(a.attributes),b.append(f.toArray(arguments).slice(1)),b}},{"./binding":1,"./util":6}],6:[function(a,b,c){var d=c.toArray=function(a){return Array.prototype.slice.call(a,0)},e=c.has=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},f=c.extend=function(a){return d(arguments).slice(1).forEach(function(b){if(b)for(var c in b)a[c]=b[c]}),a},g=c.each=function(a,b,c){if(null==a)return a;if(a.forEach===Array.prototype.forEach)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,e=a.length;e>d;d++)b.call(c,a[d],d,a);else for(var f=Object.keys(a),d=0,e=f.length;e>d;d++)b.call(c,a[f[d]],f[d],a);return a},h=c.flatten=function(a,b){return null==b&&(b=[]),g(a,function(a){Array.isArray(a)?h(a,b):b.push(a)}),b};c.pick=function(a){return h(d(arguments).slice(1)).reduce(function(b,c){return b[c]=a[c],b},{})};var i=c.isObject=function(a){return a===Object(a)};c.uniqueId=function(){var a=0;return function(b){return(b||"")+ ++a}}();c.subclass=function(a,b){var c,d=this;c=a&&e(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},f(c,d,b);var g=function(){this.constructor=c};return g.prototype=d.prototype,c.prototype=new g,a&&f(c.prototype,a),c.__super__=d.prototype,c};c.isNodeAtDOMPosition=function(a,b,c){return a.parentNode===b&&a.nextSibling===c};var j="undefined"!=typeof Element?Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector:function(){return!1};c.matchesSelector=function(a,b){return j.call(a,b)};var k=c.matches=function(a,b){return _.isArray(b)?b.some(function(b){return k(a,b)}):b instanceof window.Node?a===b:"function"==typeof b?!!b(a):a.nodeType===window.Node.ELEMENT_NODE?app.View.util.matchesSelector(a,b):!1};c.closest=function(a,b){for(;null!=a;){if(1===a.nodeType&&k(a,b))return a;a=a.parentNode}return null};var l=c.defineComputedProperty=function(a,b,c){if("function"!=typeof c)throw new Error("Expecting function for computed property value.");Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:function(){return c.call(a)}})};c.defineComputedProperties=function(a,b){Object.keys(b).forEach(function(c){l(a,c,b[c])})},c.runIfExists=function(a,b){return function(){return"function"==typeof a[b]?a[b].apply(a,arguments):void 0}};var m=a("trackr"),n=c.defineReactiveProperty=function(a,b,c,d){function e(c){return m.nonreactive(function(){return d.call(a,c,b,a)})}if(!i(a))throw new Error("Expecting object to define the reactive property on.");if("string"!=typeof b)throw new Error("Expecting string for property name.");"function"==typeof c&&null==d&&(d=c,c=void 0),"function"!=typeof d&&(d=function(a){return a});var f=new m.Dependency;return c=e(c),Object.defineProperty(a,b,{configurable:!0,enumerable:!0,set:function(a){return a=e(a),a!==c&&(c=a,f.changed()),c},get:function(){return f.depend(),c}}),a};c.defineReactiveProperties=function(a,b,c){for(var d in b)n(a,d,b[d],c||!1);return a}},{trackr:8}],7:[function(a,b){function c(){if(!g){g=!0;for(var a,b=f.length;b;){a=f,f=[];for(var c=-1;++c<b;)a[c]();b=f.length}g=!1}}function d(){}var e=b.exports={},f=[],g=!1;e.nextTick=function(a){f.push(a),g||setTimeout(c,0)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.binding=function(){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],8:[function(a,b){(function(a){Trackr=b.exports={},Trackr.active=!1,Trackr.currentComputation=null;var c=function(a){Trackr.currentComputation=a,Trackr.active=!!a},d=function(){return"undefined"!=typeof Meteor?Meteor._debug:"undefined"!=typeof console&&console.log?function(){console.log.apply(console,arguments)}:function(){}},e=function(a,b){if(l)throw b;var c;if(b.stack&&b.message){var e=b.stack.indexOf(b.message);c=e>=0&&10>=e?b.stack:b.message+("\n"===b.stack.charAt(0)?"":"\n")+b.stack}else c=b.stack||b.message;d()("Exception from Trackr "+a+" function:",c)},f=function(a){return"undefined"==typeof Meteor||Meteor.isClient?a:function(){var b=arguments;Meteor._noYieldsAllowed(function(){a.apply(null,b)})}},g=1,h=[],i=!1,j=!1,k=!1,l=!1,m=[];Trackr.nextTick="undefined"!=typeof a?a.nextTick:function(a){setTimeout(a,0)};var n=function(){i||(Trackr.nextTick(Trackr.flush),i=!0)},o=!1;Trackr.Computation=function(a,b,c){if(!o)throw new Error("Trackr.Computation constructor is private; use Trackr.autorun");o=!1;var d=this;d.stopped=!1,d.invalidated=!1,d.firstRun=!0,d._id=g++,d._onInvalidateCallbacks=[],d._parent=b,d._func=a,d._recomputing=!1,d._context=c||null;var e=!0;try{d._compute(),e=!1}finally{d.firstRun=!1,e&&d.stop()}},Trackr.Computation.prototype.onInvalidate=function(a,b){var c=this;if("function"!=typeof a)throw new Error("onInvalidate requires a function");c.invalidated?Trackr.nonreactive(function(){f(a).call(void 0!==b?b:c._context,c)}):c._onInvalidateCallbacks.push({fn:a,ctx:b})},Trackr.Computation.prototype.invalidate=function(){var a=this;if(!a.invalidated){a._recomputing||a.stopped||(n(),h.push(this)),a.invalidated=!0;for(var b,c=0;b=a._onInvalidateCallbacks[c];c++)Trackr.nonreactive(function(){f(b.fn).call(void 0!==b.ctx?b.ctx:a._context,a)});a._onInvalidateCallbacks=[]}},Trackr.Computation.prototype.stop=function(){this.stopped||(this.stopped=!0,this.invalidate())},Trackr.Computation.prototype._compute=function(){var a=this;a.invalidated=!1;var b=Trackr.currentComputation;c(a);var d=k;k=!0;try{f(a._func).call(a._context,a)}finally{c(b),k=d}},Trackr.Computation.prototype._recompute=function(){var a=this;a._recomputing=!0;try{for(;a.invalidated&&!a.stopped;)try{a._compute()}catch(b){e("recompute",b)}}finally{a._recomputing=!1}},Trackr.Dependency=function(){this._dependentsById={}},Trackr.Dependency.prototype.depend=function(a){if(!a){if(!Trackr.active)return!1;a=Trackr.currentComputation}var b=this,c=a._id;return c in b._dependentsById?!1:(b._dependentsById[c]=a,a.onInvalidate(function(){delete b._dependentsById[c]}),!0)},Trackr.Dependency.prototype.changed=function(){var a=this;for(var b in a._dependentsById)a._dependentsById[b].invalidate()},Trackr.Dependency.prototype.hasDependents=function(){var a=this;for(var b in a._dependentsById)return!0;return!1},Trackr.flush=function(a){if(j)throw new Error("Can't call Trackr.flush while flushing");if(k)throw new Error("Can't flush inside Trackr.autorun");j=!0,i=!0,l=!(!a||!a._throwFirstError);var b=!1;try{for(;h.length||m.length;){for(;h.length;){var c=h.shift();c._recompute()}if(m.length){var d=m.shift();try{d.fn.call(d.ctx)}catch(f){e("afterFlush",f)}}}b=!0}finally{b||(j=!1,Trackr.flush({_throwFirstError:!1})),i=!1,j=!1}},Trackr.autorun=function(a,b){if("function"!=typeof a)throw new Error("Trackr.autorun requires a function argument");o=!0;var c=new Trackr.Computation(a,Trackr.currentComputation,b);return Trackr.active&&Trackr.onInvalidate(function(){c.stop()}),c},Trackr.nonReactive=Trackr.nonreactive=function(a,b){var d=Trackr.currentComputation;c(null);try{return a.call(b)}finally{c(d)}},Trackr.nonReactable=Trackr.nonreactable=function(a,b){return function(){return Trackr.nonreactive(a,b)}},Trackr.onInvalidate=function(a,b){if(!Trackr.active)throw new Error("Trackr.onInvalidate requires a currentComputation");Trackr.currentComputation.onInvalidate(a,b)},Trackr.afterFlush=function(a,b){m.push({fn:a,ctx:b}),n()}}).call(this,a("_process"))},{_process:7}]},{},[4])(4)});