!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Temple=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(){this.children=[],this.parent=null,f.defineComputedProperties(this,f.pick(this,g)),f.toArray(arguments).forEach(this.appendChild,this)}var d=a("./events"),e=a("./deps"),f=a("./util"),g=["isRoot","hasChildren","firstChild","lastChild","nextSibling","previousSibling","parentNode","firstNode","nextSiblingNode"];b.exports=c,c.extend=f.subclass,c.isBinding=function(a){return a instanceof c},f.extend(c.prototype,d,{use:function(a){var b=f.toArray(arguments).slice(1);return a.apply(this,b),this},insertBefore:function(a,b){if(~["string","number"].indexOf(typeof a)&&(a=new c.Text(a)),!c.isBinding(a))throw new Error("Expecting child to be a binding.");if(a===this)throw new Error("Cannot add binding as a child of itself.");var d,e=this.children.length,f=a.parent;if(null!=b){if(!c.isBinding(b))throw new Error("Expecting before child to be a binding.");if(e=this.indexOf(b),!~e)throw new Error("Before binding is not a child of this binding.");if(b===a)throw new Error("Cannot add child before itself.");if(b.previousSibling===a)return a}if(f===this){if(d=this.indexOf(a),d===e-1)return a;this.children.splice(d,1),e=null!=b?this.indexOf(b):this.children.length}else null!=f&&(f.children.splice(f.indexOf(a),1),a.parent=null,f.trigger("child:remove",a));return this.children.splice(e,0,a),a.parent=this,f===this?this.trigger("child:move",a):(this.trigger("child:add",a),a.trigger("parent",this,f)),a.updateNodes(),a},appendChild:function(a){return this.insertBefore(a)},append:function(){return f.flatten(f.toArray(arguments)).forEach(this.appendChild,this),this},removeChild:function(a){var b=this.indexOf(a);if(~b){for(;b>-1;)this.children.splice(b,1),b=this.indexOf(a,b);return a.parent=null,this.trigger("child:remove",a),a.trigger("parent",null,this),a.updateNodes(),a}},empty:function(){return this.children.slice(0).forEach(this.removeChild,this),this},contains:function(a){return this.indexOf(a)>-1},indexOf:function(a){return this.children.indexOf(a)},firstChild:function(){return this.children[0]||null},lastChild:function(){var a=this.children.length;return a?this.children[a-1]:null},nextSibling:function(){if(this.isRoot)return null;var a=this.parent.indexOf(this),b=this.parent.children;return a>-1&&a<b.length-1?b[a+1]:null},previousSibling:function(){if(this.isRoot)return null;var a=this.parent.indexOf(this),b=this.parent.children;return a>0&&a<b.length?b[a-1]:null},hasChildren:function(){return this.children.length>0},isRoot:function(){return null==this.parent},updateNodes:function(){for(var a=this.children.length-1;a>=0;a--)this.children[a].updateNodes();return this.trigger("update"),this},toNodes:function(){return this.children.reduce(function(a,b){return a.push.apply(a,b.toNodes()),a},[])},parentNode:function(){if(this.isRoot)return null!=this.placeholder?this.placeholder.parentNode:null;for(var a=this.parent;null!=a;){if(a instanceof c.Node)return a.node;if(a.isRoot)return a.parentNode;a=a.parent}return null},firstNode:function(){var a=this.firstChild;return null!=a?a.firstNode:null},nextSiblingNode:function(){if(this.isRoot)return null!=this.placeholder?this.placeholder:null;var a=this.nextSibling;return null!=a?a.firstNode:this.parent instanceof c.Node?null:this.parent.nextSiblingNode},find:function(a){var b,c;for(c in this.children)if(b=this.children[c].find(a),null!=b)return b;return null},findAll:function(a){return this.children.reduce(function(b,c){return b.push.apply(b,c.findAll(a)),b},[])},paint:function(a,b){return"string"==typeof a&&(a=document.querySelector(a)),"string"==typeof b&&(b=a.querySelector(b)),null==a&&(a=document.createDocumentFragment()),null==this.placeholder&&(this.placeholder=document.createComment(f.uniqueId("$"))),a.insertBefore(this.placeholder,b),this.updateNodes(),this.trigger("paint",a,b),this},detach:function(){return null!=this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.updateNodes(),this.trigger("detach"),this},autorun:function(a,b){var c=e.autorun(a,this);return b&&!e.active&&c.stop(),c},toString:function(){return this.children.map(function(a){return a.toString()}).join("")},mount:function(){var a,b=f.toArray(arguments);return e.nonreactive(function(){this.stop(),this._initEventMethods(),this._mounting=!0,this.trigger("mount:before",b)},this),a=this._comp=this.autorun(function(a){this.trigger("render:before",b,a);var d=this.render.apply(this,b);c.isBinding(d)&&(d=[d]),Array.isArray(d)||(d=[]),this.trigger("render",b,a,d),d=d.map(this.appendChild,this),this.trigger("render:after",b,a,d),a.onInvalidate(function(){this.trigger("invalidate:before",b,a,d),d.forEach(this.removeChild,this),this.trigger("invalidate",b,a),this.trigger("invalidate:after",b,a),a.stopped&&(this.trigger("stop",b),delete this._comp)})}),e.nonreactive(function(){this.trigger("mount",b,a),this.trigger("mount:after",b,a),delete this._mounting},this),this},render:function(){},isMounted:function(){return this.isMounting()||null!=this._comp},isMounting:function(){return!!this._mounting},getComputation:function(){return this._comp},invalidate:function(){return this.isMounted()&&this._comp.invalidate(),this},stop:function(){return this.isMounted()&&this._comp.stop(),this},_initEventMethods:function(){return this._eventMethods?this:(this._eventMethods=!0,["mount","render","invalidate"].forEach(function(a){var b=a[0].toUpperCase()+a.substr(1);this.on(a+":before",f.runIfExists(this,"before"+b)),this.on(a,f.runIfExists(this,"on"+b)),this.on(a+":after",f.runIfExists(this,"after"+b))},this),this.on("stop",f.runIfExists(this,"onStop")),this)}}),c.prototype.hasChild=c.prototype.contains,c.prototype.removeAllChildren=c.prototype.empty,c.prototype.toHTML=c.prototype.toString,f.extend(c,a("./node")),c.HTML=a("./html")},{"./deps":2,"./events":3,"./html":4,"./node":6,"./util":8}],2:[function(a,b){var c=b.exports={};c.active=!1,c.currentComputation=null;var d=function(a){c.currentComputation=a,c.active=!!a},e=function(){return"undefined"!=typeof Meteor?Meteor._debug:"undefined"!=typeof console&&console.log?function(){console.log.apply(console,arguments)}:function(){}},f=function(a,b){if(m)throw b;e()("Exception from Deps "+a+" function:",b.stack||b.message)},g=function(a){return"undefined"==typeof Meteor||Meteor.isClient?a:function(){var b=arguments;Meteor._noYieldsAllowed(function(){a.apply(null,b)})}},h=1,i=[],j=!1,k=!1,l=!1,m=!1,n=[],o="undefined"!=typeof window?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame:function(a){setTimeout(function(){a(Date.now())},1e3/30)},p=function(){j||(o(c.flush),j=!0)},q=!1;c.Computation=function(a,b,c){if(!q)throw new Error("Deps.Computation constructor is private; use Deps.autorun");q=!1;var d=this;d.stopped=!1,d.invalidated=!1,d.firstRun=!0,d._id=h++,d._onInvalidateCallbacks=[],d._parent=b,d._func=a,d._context=c||this,d._recomputing=!1;var e=!0;try{d._compute(),e=!1}finally{d.firstRun=!1,e&&d.stop()}},c.Computation.prototype.onInvalidate=function(a,b){var d=this;if("function"!=typeof a)throw new Error("onInvalidate requires a function");d.invalidated?c.nonreactive(function(){g(a).call(b||d._context,d)}):(a._context=b,d._onInvalidateCallbacks.push(a))},c.Computation.prototype.invalidate=function(){var a=this;if(!a.invalidated){a._recomputing||a.stopped||(p(),i.push(this)),a.invalidated=!0;for(var b,d=0;b=a._onInvalidateCallbacks[d];d++)c.nonreactive(function(){g(b).call(b._context||a._context,a)});a._onInvalidateCallbacks=[]}},c.Computation.prototype.stop=function(){this.stopped||(this.stopped=!0,this.invalidate())},c.Computation.prototype._compute=function(){var a=this;a.invalidated=!1;var b=c.currentComputation;d(a);l=!0;try{g(a._func).call(a._context,a)}finally{d(b),l=!1}},c.Computation.prototype._recompute=function(){var a=this;a._recomputing=!0;try{for(;a.invalidated&&!a.stopped;)try{a._compute()}catch(b){f("recompute",b)}}finally{a._recomputing=!1}},c.Dependency=function(){this._dependentsById={}},c.Dependency.prototype.depend=function(a){if(!a){if(!c.active)return!1;a=c.currentComputation}var b=this,d=a._id;return d in b._dependentsById?!1:(b._dependentsById[d]=a,a.onInvalidate(function(){delete b._dependentsById[d]}),!0)},c.Dependency.prototype.changed=function(){var a=this;for(var b in a._dependentsById)a._dependentsById[b].invalidate()},c.Dependency.prototype.hasDependents=function(){var a=this;for(var b in a._dependentsById)return!0;return!1},c.flush=function(a){if(k)throw new Error("Can't call Deps.flush while flushing");if(l)throw new Error("Can't flush inside Deps.autorun");k=!0,j=!0,m=!(!a||!a._throwFirstError);var b=!1;try{for(;i.length||n.length;){for(;i.length;){var d=i.shift();d._recompute()}if(n.length){var e=n.shift();try{e.call(e._context)}catch(g){f("afterFlush function",g)}}}b=!0}finally{b||(k=!1,c.flush({_throwFirstError:!1})),j=!1,k=!1}},c.autorun=function(a,b){if("function"!=typeof a)throw new Error("Deps.autorun requires a function argument");q=!0;var d=new c.Computation(a,c.currentComputation,b);return c.active&&c.onInvalidate(function(){d.stop()}),d},c.nonreactive=function(a,b){var e=c.currentComputation;d(null);try{return a.call(b)}finally{d(e)}},c.nonreactable=function(a,b){return function(){var e=c.currentComputation;d(null);try{return a.apply(b||this,arguments)}finally{d(e)}}},c.onInvalidate=function(a,b){if(!c.active)throw new Error("Deps.onInvalidate requires a currentComputation");c.currentComputation.onInvalidate(a,b)},c.afterFlush=function(a,b){a._context=b,n.push(a),p()}},{}],3:[function(a,b){function c(a){if(null==a)return!0;if(Array.isArray(a)||"string"==typeof a)return 0===a.length;for(var b in a)if(e.has(a,b))return!1;return!0}function d(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}}var e=a("./util"),f=b.exports={on:function(a,b,c){if(!h(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!h(this,"once",a,[b,c])||!b)return this;var e=this,f=d(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,c)},off:function(a,b,c){var d,e,f,g,i,j,k,l;if(!this._events||!h(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events=void 0,this;for(g=a?[a]:Object.keys(this._events),i=0,j=g.length;j>i;i++)if(a=g[i],f=this._events[a]){if(this._events[a]=d=[],b||c)for(k=0,l=f.length;l>k;k++)e=f[k],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=Array.prototype.slice.call(arguments,1);if(!h(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&i(c,b),d&&i(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c(a._events))&&delete this._listeningTo[g];return this}},g=/\s+/,h=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(g.test(c)){for(var f=c.split(g),h=0,i=f.length;i>h;h++)a[b].apply(a,[f[h]].concat(d));return!1}return!0},i=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},j={listenTo:"on",listenToOnce:"once"};e.each(j,function(a,b){f[b]=function(b,c,d){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=e.uniqueId("l"));return f[g]=b,d||"object"!=typeof c||(d=this),b[a](c,d,this),this}}),f.bind=f.on,f.unbind=f.off},{"./util":8}],4:[function(a,b){var c=a("./binding"),d=a("./util");b.exports=c.extend({constructor:function(a){c.call(this),this.nodes=[],this.setValue(a)},insertBefore:function(){throw new Error("HTML bindings can't have children.")},updateNodes:function(){var a,b,c,e=this.parentNode;if(null!=e)for(a=this.nextSiblingNode,c=this.nodes.length-1;c>=0;c--)b=this.nodes[c],d.isNodeAtDOMPosition(b,e,a)||e.insertBefore(b,a),a=b;else this.removeNodes();return this.trigger("update"),this},removeNodes:function(){var a,b;for(b=0;b<this.nodes.length;b++)a=this.nodes[b],null!=a.parentNode&&a.parentNode.removeChild(a);return this},setValue:function(a){if(a instanceof Node&&(a=11===a.nodeType?d.toArray(a.childNodes):[a]),!Array.isArray(a)){a=null!=a?a.toString():"";var b=document.createElement("div");b.innerHTML=a,a=d.toArray(b.childNodes)}return this.removeNodes(),this.nodes=a,this.updateNodes(),this},toNodes:function(){return this.nodes.slice(0)},firstNode:function(){return this.nodes[0]||null},find:function(a){var b,c,e;for(b in this.nodes)if(c=this.nodes[b],1===c.nodeType){if(d.matchesSelector(c,a))return c;if(e=c.querySelector(a),null!=e)return e}return null},findAll:function(a){var b,c,e=[];for(b in this.nodes)c=this.nodes[b],1===c.nodeType&&(d.matchesSelector(c,a)&&matches.push(c),e.push.apply(e,d.toArray(c.querySelectorAll(a))));return e},toString:function(){return this.nodes.map(function(a){return 1===a.nodeType?a.outerHTML:a.nodeValue}).join("")}})},{"./binding":1,"./util":8}],5:[function(a,b){var c=a("./binding"),d=a("./util"),e=b.exports=c.extend({constructor:function(){c.call(this),this.initialize.apply(this,arguments)},initialize:function(){this.append(d.toArray(arguments))}});e.VERSION="0.3.5",e.util=d,e.Events=a("./events"),e.Binding=c;var f=e.Deps=a("./deps");e.autorun=f.autorun,e.nonreactive=f.nonreactive,e.nonreactable=f.nonreactable,e.Dependency=f.Dependency},{"./binding":1,"./deps":2,"./events":3,"./util":8}],6:[function(a,b,c){function d(a,b,c){return h.extend({constructor:function(c){c instanceof window.Node&&c.nodeType===a?(this.node=c,this.value=c.nodeValue):(this.node=document[b](""),this.setValue(c)),h.call(this)},insertBefore:function(){throw new Error(c+" bindings can't have children.")},setValue:function(a){return a=null!=a?a.toString():"",a!==this.node.nodeValue&&(this.node.nodeValue=a),this.value=a,this},toString:function(){return this.node.nodeValue}})}var e=a("./binding"),f=a("./util"),g=/^(\S+)\s*(.*)$/,h=c.Node=e.extend({updateNodes:function(){var a=this.parentNode,b=this.nextSiblingNode;return null==a||f.isNodeAtDOMPosition(this.node,a,b)?null==a&&null!=this.node.parentNode&&this.node.parentNode.removeChild(this.node):a.insertBefore(this.node,b),this.trigger("update"),this},prop:function(a,b){return f.isObject(a)&&null==b?(f.each(a,function(a,b){this.prop(b,a)},this),this):"undefined"==typeof b?this.node[a]:(this.node[a]=b,this)},addEventListener:function(a,b,c,d){function e(e){var g;("string"!=typeof b||""===b||(g=f.closest(e.target,b)))&&(d.once&&h.removeEventListener(a,c),c.call(d.context||h,e,g))}var h=this;if(f.isObject(a))return f.each(a,function(a,c){var d=c.match(g);this.addEventListener(d[1],d[2],a,b)},this),this;if("function"==typeof b&&(null==d&&(d=c),c=b,b=null),d=d||{},"string"!=typeof a||""===a)throw new Error("Expecting non-empty string event name.");if("function"!=typeof c)throw new Error("Expecting function for listener.");return null==this._eventListeners&&(this._eventListeners=[]),this._eventListeners.push({type:a,listener:c,event:e,options:d}),this.node.addEventListener(a,e),this},addEventListenerOnce:function(a,b,c,d){return f.isObject(a)?this.addEventListener(a,_.extend({once:!0},b||{})):("function"==typeof b&&(null==d&&(d=c),c=b,b=null),this.addEventListener(a,b,c,_.extend({once:!0},d||{})))},removeEventListener:function(a,b){if(null==this._eventListeners)return this;var c=[];return"function"==typeof a&&null==b&&(b=a,a=null),f.isObject(a)?f.each(a,function(a,b){var d=b.match(g);c.push.apply(c,this._eventListeners.filter(function(b){return b.type===d[1]&&b.listener===a&&!~c.indexOf(b)}))},this):c=this._eventListeners.filter(function(c){return!(null!=a&&a!==c.type||null!=b&&b!==c.listener)}),c.forEach(function(a){var b=this._eventListeners.indexOf(a);~b&&(this.node.removeEventListener(a.type,a.event),this._eventListeners.splice(b,1))},this),this},toNodes:function(){return[this.node]},firstNode:function(){return this.node},find:function(){return null},findAll:function(){return[]}}),i=c.Text=d(3,"createTextNode","Text"),j=c.Comment=d(8,"createComment","Comment");j.prototype.toString=function(){return"<!--"+this.node.nodeValue+"-->"};var k=c.Element=h.extend({constructor:function(a){var b=f.toArray(arguments).slice(1);if(a instanceof window.Node&&1===a.nodeType)this.node=a,this.tagname=a.tagName.toLowerCase(),l(f.toArray(a.childNodes)).forEach(function(a){b.push(a)});else{if("string"!=typeof a)throw new Error("Expecting string for element tag name.");this.tagname=a,this.node=document.createElement(a)}h.apply(this,b);var c="function"==typeof this.events?this.events.call(this):this.events;f.isObject(c)&&this.addEventListener(c)},getAttribute:function(a){return this.node.getAttribute(a)},setAttribute:function(a,b){return this.node.setAttribute(a,b),this},removeAttribute:function(a){return this.node.removeAttribute(a),this},attr:function(a,b){return f.isObject(a)&&null==b?(f.each(a,function(a,b){this.attr(b,a)},this),this):"undefined"==typeof b?this.getAttribute(a):(this.setAttribute(a,b),this)},style:function(a,b){return f.isObject(a)&&null==b?(f.each(a,function(a,b){this.style(b,a)},this),this):"undefined"==typeof b?getComputedStyle(this.node)[a]:(this.node.style[a]=b,this)},hasClass:function(a){return this.node.classList.contains(a)},addClass:function(){return f.flatten(f.toArray(arguments)).forEach(function(a){this.node.classList.add(a.split(" "))},this),this},removeClass:function(){return f.flatten(f.toArray(arguments)).forEach(function(a){this.node.classList.remove(a.split(" "))},this),this},find:function(a){return f.matchesSelector(this.node,a)?this.node:this.node.querySelector(a)},findAll:function(a){var b=[];return f.matchesSelector(this.node,a)&&b.push(this.node),b.push.apply(b,f.toArray(this.node.querySelectorAll(a))),b},toString:function(){return this.node.outerHTML}});c.DOM={},["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"].forEach(function(a){c.DOM[a]=k.extend({constructor:function(){var b=f.toArray(arguments);b.unshift(a),k.apply(this,b)}})});var l=c.fromNode=function(a){if(Array.isArray(a))return a.map(l).filter(function(a){return null!=a});switch(a.nodeType){case 1:return new k(a);case 3:return new i(a);case 8:return new j(a);case 11:var b=new e;return l(f.toArray(a.childNodes)).forEach(b.appendChild,b),b}};c.fromHTML=function(a){var b,c;return b=document.createElement("div"),b.innerHTML=a,c=l(f.toArray(b.childNodes)),1===c.length?c[0]:(new e).append(c)},c.fromSelector=function(a){"object"!=typeof a&&(a=f.parseSelector(a));var b=new k(a.tagname);return null!=a.id&&b.prop("id",a.id),b.addClass(a.classes),b.attr(a.attributes),b.append(f.toArray(arguments).slice(1)),b}},{"./binding":1,"./util":8}],7:[function(a,b){b.exports=function(){function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,b,c,d,e,f){this.message=a,this.expected=b,this.found=c,this.offset=d,this.line=e,this.column=f,this.name="SyntaxError"}function c(a){function c(b){function c(b,c,d){var e,f;for(e=c;d>e;e++)f=a.charAt(e),"\n"===f?(b.seenCR||b.line++,b.column=1,b.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(b.line++,b.column=1,b.seenCR=!0):(b.column++,b.seenCR=!1)}return q!==b&&(q>b&&(q=0,r={line:1,column:1,seenCR:!1}),c(r,q,b),q=b),r}function d(a){s>o||(o>s&&(s=o,t=[]),t.push(a))}function e(d,e,f){function g(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function h(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0180-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1080-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}var i=c(f),j=f<a.length?a.charAt(f):null;return null!==e&&g(e),new b(null!==d?d:h(e,j),e,j,f,i.line,i.column)}function f(a){var b,c=new Array(a.length);for(b=0;b<a.length;b++)c[b]=a.charCodeAt(b)-32;return c}function g(b){function c(a){return"[object Array]"===Object.prototype.toString.apply(a)?[]:a}for(var e,f,h=n[b],i=0,k=[],l=h.length,q=[],r=[];;){for(;l>i;)switch(h[i]){case 0:r.push(c(m[h[i+1]])),i+=2;break;case 1:r.push(o),i++;break;case 2:r.pop(),i++;break;case 3:o=r.pop(),i++;break;case 4:r.length-=h[i+1],i+=2;break;case 5:r.splice(-2,1),i++;break;case 6:r[r.length-2].push(r.pop()),i++;break;case 7:r.push(r.splice(r.length-h[i+1],h[i+1])),i+=2;break;case 8:r.pop(),r.push(a.substring(r[r.length-1],o)),i++;break;case 9:q.push(l),k.push(i+3+h[i+1]+h[i+2]),r[r.length-1]?(l=i+3+h[i+1],i+=3):(l=i+3+h[i+1]+h[i+2],i+=3+h[i+1]);break;case 10:q.push(l),k.push(i+3+h[i+1]+h[i+2]),r[r.length-1]===j?(l=i+3+h[i+1],i+=3):(l=i+3+h[i+1]+h[i+2],i+=3+h[i+1]);break;case 11:q.push(l),k.push(i+3+h[i+1]+h[i+2]),r[r.length-1]!==j?(l=i+3+h[i+1],i+=3):(l=i+3+h[i+1]+h[i+2],i+=3+h[i+1]);break;case 12:r[r.length-1]!==j?(q.push(l),k.push(i),l=i+2+h[i+1],i+=2):i+=2+h[i+1];break;case 13:q.push(l),k.push(i+3+h[i+1]+h[i+2]),a.length>o?(l=i+3+h[i+1],i+=3):(l=i+3+h[i+1]+h[i+2],i+=3+h[i+1]);break;case 14:q.push(l),k.push(i+4+h[i+2]+h[i+3]),a.substr(o,m[h[i+1]].length)===m[h[i+1]]?(l=i+4+h[i+2],i+=4):(l=i+4+h[i+2]+h[i+3],i+=4+h[i+2]);break;case 15:q.push(l),k.push(i+4+h[i+2]+h[i+3]),a.substr(o,m[h[i+1]].length).toLowerCase()===m[h[i+1]]?(l=i+4+h[i+2],i+=4):(l=i+4+h[i+2]+h[i+3],i+=4+h[i+2]);break;case 16:q.push(l),k.push(i+4+h[i+2]+h[i+3]),m[h[i+1]].test(a.charAt(o))?(l=i+4+h[i+2],i+=4):(l=i+4+h[i+2]+h[i+3],i+=4+h[i+2]);break;case 17:r.push(a.substr(o,h[i+1])),o+=h[i+1],i+=2;break;case 18:r.push(m[h[i+1]]),o+=m[h[i+1]].length,i+=2;break;case 19:r.push(j),0===u&&d(m[h[i+1]]),i+=2;break;case 20:p=r[r.length-1-h[i+1]],i+=2;break;case 21:p=o,i++;break;case 22:for(e=h.slice(i+4,i+4+h[i+3]),f=0;f<h[i+3];f++)e[f]=r[r.length-1-e[f]];r.splice(r.length-h[i+2],h[i+2],m[h[i+1]].apply(null,e)),i+=4+h[i+3];break;case 23:r.push(g(h[i+1])),i+=2;break;case 24:u++,i++;break;case 25:u--,i++;break;default:throw new Error("Invalid opcode: "+h[i]+".")}if(!(q.length>0))break;l=q.pop(),i=k.pop()}return r[0]}var h,i=arguments.length>1?arguments[1]:{},j={},k={start:0},l=0,m=[j,null,[],function(a,b){var c={tagname:a,id:null,classes:[],attributes:{}};return b.forEach(function(a){switch(a.type){case"id":c.id=a.value;break;case"class":c.classes.push(a.value);break;case"attr":c.attributes[a.name]=a.value}}),c},function(a){return a.join("")},function(a,b){return a+b.join("")},"#",{type:"literal",value:"#",description:'"#"'},function(a){if(v)throw new Error("Elements cannot have multiple IDs.");return v=!0,{type:"id",value:a}},".",{type:"literal",value:".",description:'"."'},function(a){return{type:"class",value:a}},"[",{type:"literal",value:"[",description:'"["'},"]",{type:"literal",value:"]",description:'"]"'},function(a,b){return{type:"attr",name:a,value:b||""}},/^[a-z0-9_\-]/i,{type:"class",value:"[a-z0-9_\\-]i",description:"[a-z0-9_\\-]i"},function(a){return a.join("")},"=",{type:"literal",value:"=",description:'"="'},function(a){return a},'"',{type:"literal",value:'"',description:'"\\""'},/^[^"]/,{type:"class",value:'[^"]',description:'[^"]'},function(a){return a.join("")},"'",{type:"literal",value:"'",description:'"\'"'},/^[^']/,{type:"class",value:"[^']",description:"[^']"},/^[^\]]/,{type:"class",value:"[^\\]]",description:"[^\\]]"},function(a){return a.join("").trim()},/^[a-z]/,{type:"class",value:"[a-z]",description:"[a-z]"},/^[a-z0-9\-]/,{type:"class",value:"[a-z0-9\\-]",description:"[a-z0-9\\-]"},/^[\x80-\xFF]/,{type:"class",value:"[\\x80-\\xFF]",description:"[\\x80-\\xFF]"},{type:"other",description:"whitespace"},/^[ \t\n\r]/,{type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},"\\",{type:"literal",value:"\\",description:'"\\\\"'},{type:"any",description:"any character"},function(a){return a}],n=[f('!7!*# " !+S$ "7#*) "7$*# "7%,/&7#*) "7$*# "7%"+)%4"6#""! %$"#  "#  '),f('! "7",#&7""+\' 4!6$!! %'),f('!7*+;$ "7+,#&7+"+)%4"6%""! %$"#  "#  '),f('!.&""2&3\'+2$7"+(%4"6("! %$"#  "#  '),f('!.)""2)3*+2$7"+(%4"6+"! %$"#  "#  '),f('!.,""2,3-+S$7&+I%7\'*# " !+9%..""2.3/+)%4$60$""!%$$#  $##  $"#  "#  '),f('!7-+W$ "01""1!32+,$,)&01""1!32"""  +2%7-+(%4#63#!!%$##  $"#  "#  '),f('!.4""2435+L$7-+B%7(*# "7)+2%7-+(%4$66$!!%$$#  $##  $"#  "#  '),f('!.7""2738+b$ "7.*) "09""1!3:,/&7.*) "09""1!3:"+8%.7""2738+(%4#6;#!!%$##  $"#  "#  *s "!.<""2<3=+b$ "7.*) "0>""1!3?,/&7.*) "0>""1!3?"+8%.<""2<3=+(%4#6;#!!%$##  $"#  "#  '),f('! "0@""1!3A,)&0@""1!3A"+\' 4!6B!! %'),f('0C""1!3D*# "7,'),f('0E""1!3F*# "7,'),f('0G""1!3H'),f('8 "0J""1!3K,)&0J""1!3K"9*" 3I'),f('!.L""2L3M+7$-""1!3N+(%4"6O"! %$"#  "#  ')],o=0,p=0,q=0,r={line:1,column:1,seenCR:!1},s=0,t=[],u=0;if("startRule"in i){if(!(i.startRule in k))throw new Error("Can't start parsing from rule \""+i.startRule+'".');l=k[i.startRule]}var v=!1;if(h=g(l),h!==j&&o===a.length)return h;throw h!==j&&o<a.length&&d({type:"end",description:"end of input"}),e(null,t,s)}return a(b,Error),{SyntaxError:b,parse:c}}()},{}],8:[function(a,b,c){var d=c.toArray=function(a){return Array.prototype.slice.call(a,0)},e=c.has=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},f=c.extend=function(a){return d(arguments).slice(1).forEach(function(b){if(b)for(var c in b)a[c]=b[c]}),a},g=c.each=function(a,b,c){if(null==a)return a;if(a.forEach===Array.prototype.forEach)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,e=a.length;e>d;d++)b.call(c,a[d],d,a);else for(var f=Object.keys(a),d=0,e=f.length;e>d;d++)b.call(c,a[f[d]],f[d],a);return a},h=c.flatten=function(a,b){return null==b&&(b=[]),g(a,function(a){Array.isArray(a)?h(a,b):b.push(a)}),b};c.pick=function(a){return h(d(arguments).slice(1)).reduce(function(b,c){return b[c]=a[c],b},{})};var i=c.isObject=function(a){return a===Object(a)};c.uniqueId=function(){var a=0;return function(b){return(b||"")+ ++a}}();var j=c.subclass=function(a,b){var c,d=this;c=a&&e(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},f(c,d,b);var g=function(){this.constructor=c};return g.prototype=d.prototype,c.prototype=new g,a&&f(c.prototype,a),c.__super__=d.prototype,c};c.isNodeAtDOMPosition=function(a,b,c){return a.parentNode===b&&a.nextSibling===c};var k="undefined"!=typeof Element?Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector:function(){return!1};c.matchesSelector=function(a,b){return k.call(a,b)};var l=a("./deps"),m=c.defineReactiveProperty=function(a,b,c,d){function e(c){return l.nonreactive(function(){return d.call(a,c,b,a)})}if(!i(a))throw new Error("Expecting object to define the reactive property on.");if("string"!=typeof b)throw new Error("Expecting string for property name.");"function"==typeof c&&null==d&&(d=c,c=void 0),"function"!=typeof d&&(d=function(a){return a});var f=new l.Dependency;return c=e(c),Object.defineProperty(a,b,{configurable:!0,enumerable:!0,set:function(a){return a=e(a),a!==c&&(c=a,f.changed()),c},get:function(){return f.depend(),c}}),a};c.defineReactiveProperties=function(a,b,c){for(var d in b)m(a,d,b[d],c||!1);return a};var n=c.defineComputedProperty=function(a,b,c){if("function"!=typeof c)throw new Error("Expecting function for computed property value.");Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:function(){return c.call(a)}})};c.defineComputedProperties=function(a,b){Object.keys(b).forEach(function(c){n(a,c,b[c])})},c.runIfExists=function(a,b){return function(){return"function"==typeof a[b]?a[b].apply(a,arguments):void 0}};var o=a("./selector");c.parseSelector=function(a){return o.parse(a)},c.closest=function(a,b){for(;null!=a;){if(1===a.nodeType&&k.call(a,b))return a;a=a.parentNode}return!1},c.ReactiveDict=function(){function a(){this._masterDep=new l.Dependency,this._deps={},this._values={}}return a.extend=j,a.prototype.get=function(a){return this.depend(a),this.getValue(a)},a.prototype.getValue=function(a){return this._values[a]},a.prototype.set=function(a,b){return this.getValue(a)===b?this:(this._values[a]=b,this.changed(a),this)},a.prototype.unset=function(a){return"undefined"==typeof this.getValue(a)?this:(delete this._values[a],this.changed(a),this)},a.prototype.has=function(a){return null!=this.get(a)},a.prototype.keys=function(){return this._masterDep.depend(),Object.keys(this._values)},a.prototype.getDependency=function(a){var b=this._deps[a];return null==b&&(b=this._deps[a]=new l.Dependency),b},a.prototype.depend=function(a){return this.getDependency(a).depend(),this},a.prototype.changed=function(a){return this.getDependency(a).changed(),this._masterDep.changed(),this},a}()},{"./deps":2,"./selector":7}]},{},[5])(5)});