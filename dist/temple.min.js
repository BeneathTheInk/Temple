/* Temple v0.7.0-alpha.2
 * Copyright (c) 2016 Tyler Johnson. License MIT
 */

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Temple=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var assign=require("lodash/object/assign");assign="default"in assign?assign["default"]:assign;var pick=require("lodash/object/pick");pick="default"in pick?pick["default"]:pick;var sourceMap=require("source-map");var _=require("lodash");var detectIndent=require("detect-indent");detectIndent="default"in detectIndent?detectIndent["default"]:detectIndent;var matchesSelector=require("dom-matches");matchesSelector="default"in matchesSelector?matchesSelector["default"]:matchesSelector;var merge=require("plain-merge");merge="default"in merge?merge["default"]:merge;var babelHelpers={};babelHelpers.typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};babelHelpers.classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};babelHelpers.createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();babelHelpers.inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass};babelHelpers.possibleConstructorReturn=function(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self};babelHelpers;var ASTNode=function(){function ASTNode(line,col,props){babelHelpers.classCallCheck(this,ASTNode);this._line=line;this._column=col;assign(this,props)}babelHelpers.createClass(ASTNode,[{key:"_sn",value:function _sn(file,chunk){return new sourceMap.SourceNode(this._line,this._column,file,chunk)}},{key:"start",value:function start(data){this._writer={chunks:[],data:data};return this}},{key:"_normalize_indent",value:function _normalize_indent(){var d=this._writer.data;if(typeof d.indent==="string")d.tabchar=d.indent;if(d.indent!==false&&typeof d.indent!=="number")d.indent=0}},{key:"indent",value:function indent(){this._normalize_indent();var d=this._writer.data;if(typeof d.indent==="number")d.indent++;return this}},{key:"outdent",value:function outdent(){this._normalize_indent();var d=this._writer.data;if(typeof d.indent==="number"&&d.indent>0)d.indent--;return this}},{key:"tabs",value:function tabs(){this._normalize_indent();var res="";var d=this._writer.data;var tabchar=d.tabchar;if(tabchar==null)tabchar="  ";if(typeof d.indent==="number"){for(var i=0;i<d.indent;i++){res+=tabchar}}return res}},{key:"write",value:function write(chunk){this.push([].concat(this.tabs(),chunk,"\n"));return this}},{key:"push",value:function push(chunk){this._writer.chunks.push(chunk);return this}},{key:"end",value:function end(chunk){if(chunk)this.write(chunk);var w=this._writer;delete this._writer;return this._sn(w.data.originalFilename,w.chunks)}},{key:"compile",value:function compile(){throw new Error("Not implemented.")}},{key:"toJSON",value:function toJSON(){var _this=this;var out={};Object.keys(this).forEach(function(k){if(k[0]==="_")return;out[k]=_this[k]});assign(out,pick(this,"_line","_column"))}}]);return ASTNode}();var Comment=function(_Node){babelHelpers.inherits(Comment,_Node);function Comment(){babelHelpers.classCallCheck(this,Comment);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(Comment).apply(this,arguments))}babelHelpers.createClass(Comment,[{key:"compile",value:function compile(data){this.start(data);return this.end()}}]);return Comment}(ASTNode);var Literal=function(_Node){babelHelpers.inherits(Literal,_Node);function Literal(){babelHelpers.classCallCheck(this,Literal);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(Literal).apply(this,arguments))}babelHelpers.createClass(Literal,[{key:"compile",value:function compile(data){this.start(data);this.push(JSON.stringify(this.value));return this.end()}},{key:"reactive",get:function get(){return false}}]);return Literal}(ASTNode);function header(data,h){if(_.isArray(data.headers)&&!_.contains(data.headers,h)){data.headers.push(h)}}function hash(str){var h=0,i,chr,len;if(str.length===0)return h;for(i=0,len=str.length;i<len;i++){chr=str.charCodeAt(i);h=(h<<5)-h+chr;h|=0}return h}function compileGroup(nodes,data){return nodes.map(function(n,i){return n.compile(addKey(data,i.toString()))})}function getKey(data){return(data.key||[]).reduce(function(memo,v){if(_.isString(v)&&_.isString(_.last(memo))){memo.push(memo.pop()+"-"+v)}else{memo.push(v)}return memo},[]).map(function(v,i,l){if((typeof v==="undefined"?"undefined":babelHelpers.typeof(v))==="object")return v.value;if(i!==0)v="-"+v;if(i!==l.length-1)v+="-";return JSON.stringify(v)}).join(" + ")}function addKey(data,key){var base=data.key||[];return _.extend({},data,{key:[].concat(base,key)})}function resetKey(data){return _.extend({},data,{key:[]})}function contextHeader(data,h){if(_.isArray(data.contextHeaders)&&!_.contains(data.contextHeaders,h)){data.contextHeaders.push(h)}}function resetContextHeader(data){return _.extend({},data,{contextHeaders:[]})}var Expression=function(_Node){babelHelpers.inherits(Expression,_Node);function Expression(){babelHelpers.classCallCheck(this,Expression);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(Expression).apply(this,arguments))}babelHelpers.createClass(Expression,[{key:"compile",value:function compile(data){this.start(data);var exp=Expression.render(this.tree);var v=("EXP_"+hash(exp)).replace("-","_");if(Expression.isStatic(this.tree)){if(data.asFn){header(data,"var "+v+" = function(){return "+exp+";};\n");this.push(""+v)}else{this.push(exp)}}else{header(data,"var "+v+" = function(c){return "+exp+";};\n");if(data.asFn){var cv="B"+v;contextHeader(data,"var "+cv+" = function(){return "+v+"(ctx);};");this.push(cv)}else{this.push(v+"(ctx)")}}return this.end()}},{key:"reactive",get:function get(){return true}}],[{key:"isStatic",value:function isStatic(tree){var _isStatic=Expression.isStatic;switch(tree.type){case"Compound":return tree.body.every(_isStatic);case"Identifier":return false;case"ThisExpression":return false;case"MemberExpression":{if(!_isStatic(tree.object))return false;var prop=tree.property;if(!tree.computed&&prop.type==="Identifier")return true;return _isStatic(prop)}case"Literal":return true;case"CallExpression":{return _isStatic(tree.callee)&&tree.arguments.every(_isStatic)}case"UnaryExpression":return _isStatic(tree.argument);case"LogicalExpression":case"BinaryExpression":return _isStatic(tree.left)&&_isStatic(tree.right);case"ArrayExpression":return tree.elements.every(_isStatic);case"ConditionalExpression":{return[tree.test,tree.consequent,tree.alternate].every(_isStatic)}default:return false}}},{key:"render",value:function render(tree){var _render=Expression.render;switch(tree.type){case"Compound":{return"("+tree.body.map(_render).join(",")+")"}case"Identifier":return"c.lookup("+JSON.stringify(tree.name)+")";case"ThisExpression":return"c.lookup()";case"MemberExpression":{var out=_render(tree.object);var prop=tree.property;if(!tree.computed&&prop.type==="Identifier")out+="."+prop.name;else out+="["+_render(prop)+"]";return out}case"Literal":return JSON.stringify(tree.value);case"CallExpression":{var out=_render(tree.callee);if(tree.callee.type==="MemberExpression")out+="(";else out+=".call(c.lookup()"+(tree.arguments.length?", ":"");out+=tree.arguments.map(_render).join(", ")+")";return out}case"UnaryExpression":{var out=_render(tree.argument);if(tree.prefix)out=tree.operator+out;else out+=tree.operator;return out}case"LogicalExpression":case"BinaryExpression":{return"("+_render(tree.left)+tree.operator+_render(tree.right)+")"}case"ArrayExpression":{return"["+tree.elements.map(_render).join(",")+"]"}case"ConditionalExpression":{return"("+_render(tree.test)+"?"+_render(tree.consequent)+":"+_render(tree.alternate)+")"}default:throw new Error("Not supported.")}}}]);return Expression}(ASTNode);var Interpolator=function(_Node){babelHelpers.inherits(Interpolator,_Node);function Interpolator(){babelHelpers.classCallCheck(this,Interpolator);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(Interpolator).apply(this,arguments))}babelHelpers.createClass(Interpolator,[{key:"compile",value:function compile(data){this.start(data);this.write("idom.autotext("+this.expression.compile(_.assign({asFn:true},data))+");");return this.end()}},{key:"reactive",get:function get(){return false}}]);return Interpolator}(ASTNode);var Render=function(_Node){babelHelpers.inherits(Render,_Node);function Render(){babelHelpers.classCallCheck(this,Render);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(Render).apply(this,arguments))}babelHelpers.createClass(Render,[{key:"compile",value:function compile(data){this.start(data);var exp=this.expression.compile(data);this.write(["Temple.render(",exp,", ctx, "+getKey(data)+");"]);return this.end()}},{key:"reactive",get:function get(){return true}}]);return Render}(ASTNode);var Set=function(_Node){babelHelpers.inherits(Set,_Node);function Set(){babelHelpers.classCallCheck(this,Set);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(Set).apply(this,arguments))}babelHelpers.createClass(Set,[{key:"compile",value:function compile(data){this.start(data);var exp=this.expression.compile(data);var safevar=JSON.stringify(this.variable);if(this.attribute)this.push("(");this.push(["ctx.set("+safevar+", ",exp,")"]);if(!this.attribute)this.write(";");else this.push(', "")');return this.end()}},{key:"reactive",get:function get(){return true}}]);return Set}(ASTNode);var With=function(_Node){babelHelpers.inherits(With,_Node);function With(){babelHelpers.classCallCheck(this,With);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(With).apply(this,arguments))}babelHelpers.createClass(With,[{key:"compile",value:function compile(data){this.start(data);var exp=this.expression.compile(data);if(!this.attribute)this.push(this.tabs());this.push(["Temple.With(",exp,", ctx, function(ctx) {"]).indent();if(!this.attribute)this.push("\n");data=resetContextHeader(data);var c=this._sn(data.originalFilename,compileGroup(this.children,data));data.contextHeaders.forEach(this.write,this);if(this.attribute)c=[" return Temple.utils.joinValues(",c.join(","),"); "];this.push(c);this.outdent().push("})");if(!this.attribute)this.write(";");return this.end()}},{key:"reactive",get:function get(){return true}}]);return With}(ASTNode);var Each=function(_Node){babelHelpers.inherits(Each,_Node);function Each(){babelHelpers.classCallCheck(this,Each);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(Each).apply(this,arguments))}babelHelpers.createClass(Each,[{key:"compile",value:function compile(data){this.start(data);var exp=this.expression.compile(data);var indexvar=_.uniqueId("index");var vars=JSON.stringify(this.variables||[]);if(!this.attribute)this.push(this.tabs());this.push(["Temple.Each(",exp,", ",vars,", ctx, function(ctx, "+indexvar+") {"]).indent();if(!this.attribute)this.push("\n");data=resetContextHeader(data);data=addKey(data,{value:indexvar});var c=this._sn(data.originalFilename,compileGroup(this.children,data));data.contextHeaders.forEach(this.write,this);if(this.attribute)c=[" return Temple.utils.joinValues(",c.join(","),"); "];this.push(c);this.outdent().push("})");if(!this.attribute)this.write(";");else this.push('.join("")');return this.end()}},{key:"reactive",get:function get(){return true}}]);return Each}(ASTNode);var Branch=function(_Node){babelHelpers.inherits(Branch,_Node);function Branch(){babelHelpers.classCallCheck(this,Branch);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(Branch).apply(this,arguments))}babelHelpers.createClass(Branch,[{key:"compile",value:function compile(data){this.start(data);this.push(compileGroup(this.children,data));return this.end()}}]);return Branch}(ASTNode);var If=function(_Node){babelHelpers.inherits(If,_Node);function If(){babelHelpers.classCallCheck(this,If);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(If).apply(this,arguments))}babelHelpers.createClass(If,[{key:"compile",value:function compile(data){var _this2=this;this.start(data);if(this.attribute){this.push("(")}this.children.forEach(function(c,i,l){if(_this2.attribute){if(c.expression)_this2.push([c.expression.compile(data)," ? "]);_this2.push(["Temple.utils.joinValues(",c.compile(addKey(data,i.toString())).join(","),")"]);if(i+1===l.length&&c.expression)_this2.push(" : ''")}else{var line=[];line.push(!i?"if":!c.expression?"else":"else if"," ");if(c.expression)line.push(["(",c.expression.compile(data),") "]);line.push("{");_this2.write(line).indent();_this2.push(c.compile(addKey(data,i.toString())));_this2.outdent().write("}")}});if(this.attribute){this.push(")")}return this.end()}},{key:"reactive",get:function get(){return true}}]);return If}(ASTNode);var Attribute=function(_Node){babelHelpers.inherits(Attribute,_Node);function Attribute(){babelHelpers.classCallCheck(this,Attribute);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(Attribute).apply(this,arguments))}babelHelpers.createClass(Attribute,[{key:"compile",value:function compile(data){this.start(data);var value=undefined;if(this.children){var str=undefined,fun=undefined;if(this.children instanceof Expression){str=this.children.compile(data);fun=true}else{var len=this.children.length;data=resetContextHeader(data);str=_.invoke(this.children,"compile",data);str=!len?null:this._sn(data.originalFilename,str).join(",");if(len>1)str=["Temple.utils.joinValues(",str,")"];fun=len&&this.children.some(function(c){return c.reactive});if(fun)str=["[",str,"]"]}if(fun){str=["function(ctx){",data.contextHeaders.join("\n"),"return ",str,";}"];value=_.uniqueId("ATTR_");header(data,["var ",value,"=",str,";\n"])}else{value=str}}this.write(["decorators.render(ctx, "+JSON.stringify(this.name),value!=null?[", ",value]:"",");"]);return this.end()}},{key:"reactive",get:function get(){return false}}]);return Attribute}(ASTNode);function emptyNode(node){while(node.lastChild){node.removeChild(node.lastChild)}return node}var entity=/&(?:#x[a-f0-9]+|#[0-9]+|[a-z0-9]+);?/gi;function containsEntities(str){return entity.test(str)}var decodeEntities=function(){if(typeof document==="undefined")return;var element=document.createElement("div");return function decodeHTMLEntities(str){str=str.replace(entity,function(m){element.innerHTML=m;return element.textContent});emptyNode(element);return str}}();var Text=function(_Node){babelHelpers.inherits(Text,_Node);function Text(){babelHelpers.classCallCheck(this,Text);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(Text).apply(this,arguments))}babelHelpers.createClass(Text,[{key:"compile",value:function compile(data){this.start(data);var value=this.value.replace(/\s+/g," ");var safe=JSON.stringify(value);if(containsEntities(value)){safe="Temple.utils.decodeEntities("+safe+")"}this.write("idom.text("+safe+");");return this.end()}}]);return Text}(ASTNode);var Element=function(_Node){babelHelpers.inherits(Element,_Node);function Element(){babelHelpers.classCallCheck(this,Element);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(Element).apply(this,arguments))}babelHelpers.createClass(Element,[{key:"compile",value:function compile(data){var _this2=this;this.start(data);var tagName=JSON.stringify(this.tagname);var key=getKey(data);var childs=this.children;var attrs=this.attributes;var body=function body(newctx){if(newctx){data=resetContextHeader(data)}var c=[].concat(_.invoke(attrs,"compile",data),compileGroup(childs,resetKey(data)));if(newctx){data.contextHeaders.forEach(_this2.write,_this2)}_this2.push(c)};if(childs.length||attrs.length){if(!this.reactive){this.write("idom.elementOpen("+tagName+(key?", "+key:"")+");");body();this.write("idom.elementClose("+tagName+");")}else{this.write("Temple.Element("+tagName+", "+(key||"null")+", ctx, function(ctx) {").indent();body(true);this.outdent().write("});")}}else{this.write("idom.elementVoid("+tagName+(key?", "+key:"")+");")}return this.end()}},{key:"reactive",get:function get(){return this.children.some(function(c){return c.reactive})}}]);return Element}(ASTNode);var Script=function(_Node){babelHelpers.inherits(Script,_Node);function Script(){babelHelpers.classCallCheck(this,Script);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(Script).apply(this,arguments))}babelHelpers.createClass(Script,[{key:"compile",value:function compile(data){var _this2=this;this.start(data);this._normalize_indent();var line=this._line||1;var column=this._column||1;var indent=detectIndent(this.value);this.value.split(/\r?\n/g).forEach(function(l,i){var lindent=detectIndent(l);l=l.replace(/^\s+/,"");var len=Math.round(lindent.amount/indent.amount);var tabs=_this2.tabs();var tabchar=data.tabchar;if(tabchar==null)tabchar="  ";for(var j=0;j<len;j++){tabs+=tabchar}_this2.push(new sourceMap.SourceNode(i+line,i===0?column:1,data.originalFilename,tabs+l+"\n"))});return this.end()}},{key:"reactive",get:function get(){return true}}]);return Script}(ASTNode);var Template=function(_Node){babelHelpers.inherits(Template,_Node);function Template(){babelHelpers.classCallCheck(this,Template);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(Template).apply(this,arguments))}babelHelpers.createClass(Template,[{key:"compile",value:function compile(data){var _this2=this;this.start(data);var safename=JSON.stringify(this.name);var safetype=this.type?JSON.stringify(this.type):null;this.write("Template["+safename+"] = Temple.create("+safename+", "+(safetype?safetype+", ":"")+"function(ctx, key) {").indent();data=resetContextHeader(data);data=addKey(data,{value:"key"});var c=compileGroup(this.children,data);data.contextHeaders.forEach(this.write,this);this.push(c);this.outdent().write("});\n");if(this.plugins&&this.plugins.length){this.plugins.forEach(function(p){_this2.write("Template["+safename+"].use("+JSON.stringify(p)+");")});this.write("")}return this.end()}}]);return Template}(ASTNode);var Root=function(_Node){babelHelpers.inherits(Root,_Node);function Root(){babelHelpers.classCallCheck(this,Root);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(Root).apply(this,arguments))}babelHelpers.createClass(Root,[{key:"compile",value:function compile(data){var oheads=data.headers;data.headers=[];this.start(data);header(data,"var Template = {};\n");header(data,"var idom = Temple.idom;\n");header(data,"var decorators = Temple.decorators;\n");this.push(_.invoke(this.children,"compile",data));if(data.exports==="es6"){this.write("export default Template;")}else if(data.exports==="cjs"){this.write("module.exports = Template;")}else if(data.exports==="none"){}else{this.write("return Template;")}var output=this.end();if(data.headers.length)output.prepend("\n").prepend(data.headers);data.headers=oheads;return output}}]);return Root}(ASTNode);exports.Node=ASTNode;exports.Root=Root;exports.Template=Template;exports.Script=Script;exports.Element=Element;exports.Text=Text;exports.Attribute=Attribute;exports.If=If;exports.Branch=Branch;exports.Each=Each;exports.With=With;exports.Set=Set;exports.Render=Render;exports.Interpolator=Interpolator;exports.Expression=Expression;exports.Literal=Literal;exports.Comment=Comment},{"detect-indent":10,"dom-matches":11,lodash:20,"lodash/object/assign":48,"lodash/object/pick":51,"plain-merge":55,"source-map":70}],2:[function(require,module,exports){module.exports=function(){"use strict";function peg$subclass(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor}function peg$SyntaxError(message,expected,found,location){this.message=message;this.expected=expected;this.found=found;this.location=location;this.name="SyntaxError";if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,peg$SyntaxError)}}peg$subclass(peg$SyntaxError,Error);function peg$parse(input){var options=arguments.length>1?arguments[1]:{},parser=this,peg$FAILED={},peg$startRuleFunctions={start:peg$parsestart},peg$startRuleFunction=peg$parsestart,peg$c0=function(nodes){return createNode("Root",{children:_.pluck(nodes,0)})},peg$c1="<",peg$c2={type:"literal",value:"<",description:'"<"'},peg$c3="template",peg$c4={type:"literal",value:"template",description:'"template"'},peg$c5=">",peg$c6={type:"literal",value:">",description:'">"'},peg$c7="</template>",peg$c8={type:"literal",value:"</template>",description:'"</template>"'},peg$c9=function(attrs,nodes){var name,type,plugins=[];attrs.forEach(function(a){switch(a.name){case"name":name=a.value;break;case"type":type=a.value;break;case"use":plugins.push(a.value);break}});return createNode("Template",{name:name,type:type,children:nodes,plugins:plugins})},peg$c10="{-",peg$c11={type:"literal",value:"{-",description:'"{-"'},peg$c12="-}",peg$c13={type:"literal",value:"-}",description:'"-}"'},peg$c14={type:"any",description:"any character"},peg$c15=function(v){return v},peg$c16="{{",peg$c17={type:"literal",value:"{{",description:'"{{"'},peg$c18="}}",peg$c19={type:"literal",value:"}}",description:'"}}"'},peg$c20=function(value){return createExpression(value)},peg$c21=function(expression){return createNode("Interpolator",{expression:expression})},peg$c22=function(nodes){return combineText(nodes)},peg$c23=/^[a-z0-9\-$]/i,peg$c24={type:"class",value:"[a-z0-9\\-$]i",description:"[a-z0-9\\-$]i"},peg$c25=function(k){return k.toLowerCase()},peg$c26="</",peg$c27={type:"literal",value:"</",description:'"</"'},peg$c28="{%",peg$c29={type:"literal",value:"{%",description:'"{%"'},peg$c30="<!--",peg$c31={type:"literal",value:"<!--",description:'"<!--"'},peg$c32="-->",peg$c33={type:"literal",value:"-->",description:'"-->"'},peg$c34="{#",peg$c35={type:"literal",value:"{#",description:'"{#"'},peg$c36="#}",peg$c37={type:"literal",value:"#}",description:'"#}"'},peg$c38=function(value){return createNode("Comment",{value:value})},peg$c39="script",peg$c40={type:"literal",value:"script",description:'"script"'},peg$c41="</script>",peg$c42={type:"literal",value:"</script>",description:'"</script>"'},peg$c43=function(attrs,v){return createNode("Script",{attributes:attrs,value:v})},peg$c44="$script",peg$c45={type:"literal",value:"$script",description:'"$script"'},peg$c46="</$script>",peg$c47={type:"literal",value:"</$script>",description:'"</$script>"'},peg$c48="/>",peg$c49={type:"literal",value:"/>",description:'"/>"'},peg$c50=function(tagname,attrs){return createNode("Element",{tagname:tagname,attributes:attrs,children:[]})},peg$c51=function(starttag,attrs,nodes,endtag){starttag=starttag;endtag=endtag;if(starttag!==endtag){throw new Error("Element tag mismatch: "+starttag+" !== "+endtag)}return createNode("Element",{tagname:starttag,attributes:attrs,children:nodes})},peg$c52="=",peg$c53={type:"literal",value:"=",description:'"="'},peg$c54=function(key,value){value=value!=null?value[2]:void 0;return createNode("Attribute",_.assign({name:key},value))},peg$c55=function(){enterAttribute();return true},peg$c56="{",peg$c57={type:"literal",value:"{",description:'"{"'},peg$c58="}",peg$c59={type:"literal",value:"}",description:'"}"'},peg$c60=function(exp){var e=createExpression(exp);var root={type:"ArrayExpression"};if(e.tree.type==="Compound"){root.elements=e.tree.body}else{root.elements=[e.tree]}e.tree=root;return e},peg$c61='"',peg$c62={type:"literal",value:'"',description:'"\\""'},peg$c63=function(n){return combineText(n,"Literal")},peg$c64="'",peg$c65={type:"literal",value:"'",description:'"\'"'},peg$c66=function(nodes){exitAttribute();return true},peg$c67=function(nodes){var t=text();t=t.substr(1,t.length-2);return{children:nodes,value:t}},peg$c68="%}",peg$c69={type:"literal",value:"%}",description:'"%}"'},peg$c70=function(){return attributeMode},peg$c71=function(n){return combineText(n,"Literal")},peg$c72="if",peg$c73={type:"literal",value:"if",description:'"if"'},peg$c74="else",peg$c75={type:"literal",value:"else",description:'"else"'},peg$c76=function(exp,nodes){return[exp,nodes]},peg$c77=function(exp,nodes,elsifs){return nodes},peg$c78="endif",peg$c79={type:"literal",value:"endif",description:'"endif"'},peg$c80=function(exp,nodes,elsifs,els){var branches=[createNode("Branch",{expression:createExpression(exp),children:nodes})];elsifs.forEach(function(b){branches.push(createNode("Branch",{expression:createExpression(b[0]),children:b[1]}))});if(els)branches.push(createNode("Branch",{expression:null,children:els}));return createNode("If",{children:branches,attribute:attributeMode})},peg$c81="each",peg$c82={type:"literal",value:"each",description:'"each"'},peg$c83=",",peg$c84={type:"literal",value:",",description:'","'},peg$c85="in",peg$c86={type:"literal",value:"in",description:'"in"'},peg$c87=function(l,r){return[l].concat(_.pluck(r,3))},peg$c88="endeach",peg$c89={type:"literal",value:"endeach",description:'"endeach"'},peg$c90=function(vars,exp,nodes){return createNode("Each",{expression:createExpression(exp),children:nodes,variables:vars||[],attribute:attributeMode})},peg$c91=/^[a-z_$]/i,peg$c92={type:"class",value:"[a-z_$]i",description:"[a-z_$]i"},peg$c93=/^[a-z0-9_$]/i,peg$c94={type:"class",value:"[a-z0-9_$]i",description:"[a-z0-9_$]i"},peg$c95=function(){return!attributeMode},peg$c96="render",peg$c97={type:"literal",value:"render",description:'"render"'},peg$c98=function(exp){return createNode("Render",{expression:createExpression(exp)})},peg$c99="with",peg$c100={type:"literal",value:"with",description:'"with"'},peg$c101="endwith",peg$c102={type:"literal",value:"endwith",description:'"endwith"'},peg$c103=function(exp,nodes){return createNode("With",{expression:createExpression(exp),children:nodes,attribute:attributeMode})},peg$c104="set",peg$c105={type:"literal",value:"set",description:'"set"'},peg$c106=/^[a-z]/i,peg$c107={type:"class",value:"[a-z]i",description:"[a-z]i"},peg$c108=function(v,exp){return createNode("Set",{variable:v,expression:createExpression(exp),attribute:attributeMode})},peg$c109="true",peg$c110={type:"literal",value:"true",description:'"true"'},peg$c111=function(){return true},peg$c112="false",peg$c113={type:"literal",value:"false",description:'"false"'},peg$c114=function(){return false},peg$c115="-",peg$c116={type:"literal",value:"-",description:'"-"'},peg$c117=/^[0-9]/,peg$c118={type:"class",value:"[0-9]",description:"[0-9]"},peg$c119=".",peg$c120={type:"literal",value:".",description:'"."'},peg$c121=function(){return parseFloat(text(),10)},peg$c122=function(){return parseInt(text(),10)},peg$c123=/^[^"]/,peg$c124={type:"class",value:'[^"]',description:'[^"]'},peg$c125=function(v){return v.join("")},peg$c126=/^[^']/,peg$c127={type:"class",value:"[^']",description:"[^']"},peg$c128="null",peg$c129={type:"literal",value:"null",description:'"null"'},peg$c130=function(){return null},peg$c131="undefined",peg$c132={type:"literal",value:"undefined",description:'"undefined"'},peg$c133="void",peg$c134={type:"literal",value:"void",description:'"void"'},peg$c135=/^[,; \t\n\r]/,peg$c136={type:"class",value:"[,; \\t\\n\\r]",description:"[,; \\t\\n\\r]"},peg$c137=function(){return void 0},peg$c138={type:"other",description:"whitespace"},peg$c139=/^[ \t\n\r]/,peg$c140={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},peg$c141={type:"other",description:"guaranteed whitespace"},peg$c142="\\",peg$c143={type:"literal",value:"\\",description:'"\\\\"'},peg$c144=function(char){return char},peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1,seenCR:false}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0,peg$result;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions)){throw new Error("Can't start parsing from rule \""+options.startRule+'".')}peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function text(){return input.substring(peg$savedPos,peg$currPos)}function location(){return peg$computeLocation(peg$savedPos,peg$currPos)}function expected(description){throw peg$buildException(null,[{type:"other",description:description}],input.substring(peg$savedPos,peg$currPos),peg$computeLocation(peg$savedPos,peg$currPos))}function error(message){throw peg$buildException(message,null,input.substring(peg$savedPos,peg$currPos),peg$computeLocation(peg$savedPos,peg$currPos))}function peg$computePosDetails(pos){var details=peg$posDetailsCache[pos],p,ch;if(details){return details}else{p=pos-1;while(!peg$posDetailsCache[p]){p--}details=peg$posDetailsCache[p];details={line:details.line,column:details.column,seenCR:details.seenCR};while(p<pos){ch=input.charAt(p);if(ch==="\n"){if(!details.seenCR){details.line++}details.column=1;details.seenCR=false}else if(ch==="\r"||ch==="\u2028"||ch==="\u2029"){details.line++;details.column=1;details.seenCR=true}else{details.column++;details.seenCR=false}p++}peg$posDetailsCache[pos]=details;return details}}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){if(peg$currPos<peg$maxFailPos){return}if(peg$currPos>peg$maxFailPos){peg$maxFailPos=peg$currPos;peg$maxFailExpected=[]}peg$maxFailExpected.push(expected)}function peg$buildException(message,expected,found,location){function cleanupExpected(expected){var i=1;expected.sort(function(a,b){if(a.description<b.description){return-1}else if(a.description>b.description){return 1}else{return 0}});while(i<expected.length){if(expected[i-1]===expected[i]){expected.splice(i,1)}else{i++}}}function buildMessage(expected,found){function stringEscape(s){function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(ch){return"\\x0"+hex(ch)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(ch){return"\\x"+hex(ch)}).replace(/[\u0100-\u0FFF]/g,function(ch){return"\\u0"+hex(ch)}).replace(/[\u1000-\uFFFF]/g,function(ch){return"\\u"+hex(ch)})}var expectedDescs=new Array(expected.length),expectedDesc,foundDesc,i;
for(i=0;i<expected.length;i++){expectedDescs[i]=expected[i].description}expectedDesc=expected.length>1?expectedDescs.slice(0,-1).join(", ")+" or "+expectedDescs[expected.length-1]:expectedDescs[0];foundDesc=found?'"'+stringEscape(found)+'"':"end of input";return"Expected "+expectedDesc+" but "+foundDesc+" found."}if(expected!==null){cleanupExpected(expected)}return new peg$SyntaxError(message!==null?message:buildMessage(expected,found),expected,found,location)}function peg$parsestart(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parsews();if(s1!==peg$FAILED){s2=[];s3=peg$currPos;s4=peg$parsescriptNode();if(s4===peg$FAILED){s4=peg$parsetemplateNode();if(s4===peg$FAILED){s4=peg$parsecommentNode()}}if(s4!==peg$FAILED){s5=peg$parsews();if(s5!==peg$FAILED){s4=[s4,s5];s3=s4}else{peg$currPos=s3;s3=peg$FAILED}}else{peg$currPos=s3;s3=peg$FAILED}while(s3!==peg$FAILED){s2.push(s3);s3=peg$currPos;s4=peg$parsescriptNode();if(s4===peg$FAILED){s4=peg$parsetemplateNode();if(s4===peg$FAILED){s4=peg$parsecommentNode()}}if(s4!==peg$FAILED){s5=peg$parsews();if(s5!==peg$FAILED){s4=[s4,s5];s3=s4}else{peg$currPos=s3;s3=peg$FAILED}}else{peg$currPos=s3;s3=peg$FAILED}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c0(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsetemplateNode(){var s0,s1,s2,s3,s4,s5,s6,s7;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===60){s1=peg$c1;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c2)}}if(s1!==peg$FAILED){s2=peg$parsews();if(s2!==peg$FAILED){if(input.substr(peg$currPos,8)===peg$c3){s3=peg$c3;peg$currPos+=8}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c4)}}if(s3!==peg$FAILED){s4=peg$parseattributes();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===62){s5=peg$c5;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c6)}}if(s5!==peg$FAILED){s6=peg$parsehtml();if(s6!==peg$FAILED){if(input.substr(peg$currPos,11)===peg$c7){s7=peg$c7;peg$currPos+=11}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c8)}}if(s7!==peg$FAILED){peg$savedPos=s0;s1=peg$c9(s4,s6);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsevariable(){var s0,s1,s2,s3,s4,s5,s6,s7;s0=peg$currPos;s1=peg$currPos;if(input.substr(peg$currPos,2)===peg$c10){s2=peg$c10;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s2!==peg$FAILED){s3=peg$currPos;s4=[];s5=peg$currPos;s6=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,2)===peg$c12){s7=peg$c12;peg$currPos+=2}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}peg$silentFails--;if(s7===peg$FAILED){s6=void 0}else{peg$currPos=s6;s6=peg$FAILED}if(s6!==peg$FAILED){if(input.length>peg$currPos){s7=input.charAt(peg$currPos);peg$currPos++}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s7!==peg$FAILED){s6=[s6,s7];s5=s6}else{peg$currPos=s5;s5=peg$FAILED}}else{peg$currPos=s5;s5=peg$FAILED}while(s5!==peg$FAILED){s4.push(s5);s5=peg$currPos;s6=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,2)===peg$c12){s7=peg$c12;peg$currPos+=2}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}peg$silentFails--;if(s7===peg$FAILED){s6=void 0}else{peg$currPos=s6;s6=peg$FAILED}if(s6!==peg$FAILED){if(input.length>peg$currPos){s7=input.charAt(peg$currPos);peg$currPos++}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s7!==peg$FAILED){s6=[s6,s7];s5=s6}else{peg$currPos=s5;s5=peg$FAILED}}else{peg$currPos=s5;s5=peg$FAILED}}if(s4!==peg$FAILED){s3=input.substring(s3,peg$currPos)}else{s3=s4}if(s3!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c12){s4=peg$c12;peg$currPos+=2}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}if(s4!==peg$FAILED){peg$savedPos=s1;s2=peg$c15(s3);s1=s2}else{peg$currPos=s1;s1=peg$FAILED}}else{peg$currPos=s1;s1=peg$FAILED}}else{peg$currPos=s1;s1=peg$FAILED}if(s1===peg$FAILED){s1=peg$currPos;if(input.substr(peg$currPos,2)===peg$c16){s2=peg$c16;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c17)}}if(s2!==peg$FAILED){s3=peg$currPos;s4=[];s5=peg$currPos;s6=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,2)===peg$c18){s7=peg$c18;peg$currPos+=2}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c19)}}peg$silentFails--;if(s7===peg$FAILED){s6=void 0}else{peg$currPos=s6;s6=peg$FAILED}if(s6!==peg$FAILED){if(input.length>peg$currPos){s7=input.charAt(peg$currPos);peg$currPos++}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s7!==peg$FAILED){s6=[s6,s7];s5=s6}else{peg$currPos=s5;s5=peg$FAILED}}else{peg$currPos=s5;s5=peg$FAILED}while(s5!==peg$FAILED){s4.push(s5);s5=peg$currPos;s6=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,2)===peg$c18){s7=peg$c18;peg$currPos+=2}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c19)}}peg$silentFails--;if(s7===peg$FAILED){s6=void 0}else{peg$currPos=s6;s6=peg$FAILED}if(s6!==peg$FAILED){if(input.length>peg$currPos){s7=input.charAt(peg$currPos);peg$currPos++}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s7!==peg$FAILED){s6=[s6,s7];s5=s6}else{peg$currPos=s5;s5=peg$FAILED}}else{peg$currPos=s5;s5=peg$FAILED}}if(s4!==peg$FAILED){s3=input.substring(s3,peg$currPos)}else{s3=s4}if(s3!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c18){s4=peg$c18;peg$currPos+=2}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c19)}}if(s4!==peg$FAILED){peg$savedPos=s1;s2=peg$c15(s3);s1=s2}else{peg$currPos=s1;s1=peg$FAILED}}else{peg$currPos=s1;s1=peg$FAILED}}else{peg$currPos=s1;s1=peg$FAILED}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c20(s1)}s0=s1;return s0}function peg$parseinterpolator(){var s0,s1;s0=peg$currPos;s1=peg$parsevariable();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c21(s1)}s0=s1;return s0}function peg$parsehtml(){var s0,s1,s2;s0=peg$currPos;s1=[];s2=peg$parsecommentNode();if(s2===peg$FAILED){s2=peg$parsesection();if(s2===peg$FAILED){s2=peg$parseinterpolator();if(s2===peg$FAILED){s2=peg$parsescriptNode();if(s2===peg$FAILED){s2=peg$parseelementNode();if(s2===peg$FAILED){s2=peg$parsenotClosingTag()}}}}}while(s2!==peg$FAILED){s1.push(s2);s2=peg$parsecommentNode();if(s2===peg$FAILED){s2=peg$parsesection();if(s2===peg$FAILED){s2=peg$parseinterpolator();if(s2===peg$FAILED){s2=peg$parsescriptNode();if(s2===peg$FAILED){s2=peg$parseelementNode();if(s2===peg$FAILED){s2=peg$parsenotClosingTag()}}}}}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c22(s1)}s0=s1;return s0}function peg$parsetagname(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parsews();if(s1!==peg$FAILED){s2=peg$currPos;s3=[];if(peg$c23.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c24)}}if(s4!==peg$FAILED){while(s4!==peg$FAILED){s3.push(s4);if(peg$c23.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c24)}}}}else{s3=peg$FAILED}if(s3!==peg$FAILED){s2=input.substring(s2,peg$currPos)}else{s2=s3}if(s2!==peg$FAILED){s3=peg$parsews();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c25(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsenotClosingTag(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;s1=peg$currPos;s2=peg$currPos;peg$silentFails++;s3=peg$currPos;if(input.substr(peg$currPos,2)===peg$c26){s4=peg$c26;peg$currPos+=2}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c27)}}if(s4!==peg$FAILED){s5=peg$parsetagname();if(s5!==peg$FAILED){if(input.charCodeAt(peg$currPos)===62){s6=peg$c5;peg$currPos++}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c6)}}if(s6!==peg$FAILED){s4=[s4,s5,s6];s3=s4}else{peg$currPos=s3;s3=peg$FAILED}}else{peg$currPos=s3;s3=peg$FAILED}}else{peg$currPos=s3;s3=peg$FAILED}peg$silentFails--;if(s3===peg$FAILED){s2=void 0}else{peg$currPos=s2;s2=peg$FAILED}if(s2!==peg$FAILED){s3=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,2)===peg$c28){s4=peg$c28;peg$currPos+=2}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c29)}}peg$silentFails--;if(s4===peg$FAILED){s3=void 0}else{peg$currPos=s3;s3=peg$FAILED}if(s3!==peg$FAILED){s4=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,2)===peg$c16){s5=peg$c16;peg$currPos+=2}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c17)}}peg$silentFails--;if(s5===peg$FAILED){s4=void 0}else{peg$currPos=s4;s4=peg$FAILED}if(s4!==peg$FAILED){if(input.length>peg$currPos){s5=input.charAt(peg$currPos);peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s5!==peg$FAILED){s2=[s2,s3,s4,s5];s1=s2}else{peg$currPos=s1;s1=peg$FAILED}}else{peg$currPos=s1;s1=peg$FAILED}}else{peg$currPos=s1;s1=peg$FAILED}}else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){s0=input.substring(s0,peg$currPos)}else{s0=s1}return s0}function peg$parsecommentNode(){var s0,s1,s2,s3,s4,s5,s6,s7;s0=peg$currPos;s1=peg$currPos;if(input.substr(peg$currPos,4)===peg$c30){s2=peg$c30;peg$currPos+=4}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c31)}}if(s2!==peg$FAILED){s3=peg$currPos;s4=[];s5=peg$currPos;s6=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,3)===peg$c32){s7=peg$c32;peg$currPos+=3}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c33)}}peg$silentFails--;if(s7===peg$FAILED){s6=void 0}else{peg$currPos=s6;s6=peg$FAILED}if(s6!==peg$FAILED){if(input.length>peg$currPos){s7=input.charAt(peg$currPos);peg$currPos++}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s7!==peg$FAILED){s6=[s6,s7];s5=s6}else{peg$currPos=s5;s5=peg$FAILED}}else{peg$currPos=s5;s5=peg$FAILED}while(s5!==peg$FAILED){s4.push(s5);s5=peg$currPos;s6=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,3)===peg$c32){s7=peg$c32;peg$currPos+=3}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c33)}}peg$silentFails--;if(s7===peg$FAILED){s6=void 0}else{peg$currPos=s6;s6=peg$FAILED}if(s6!==peg$FAILED){if(input.length>peg$currPos){s7=input.charAt(peg$currPos);peg$currPos++}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s7!==peg$FAILED){s6=[s6,s7];s5=s6}else{peg$currPos=s5;s5=peg$FAILED}}else{peg$currPos=s5;s5=peg$FAILED}}if(s4!==peg$FAILED){s3=input.substring(s3,peg$currPos)}else{s3=s4}if(s3!==peg$FAILED){if(input.substr(peg$currPos,3)===peg$c32){s4=peg$c32;peg$currPos+=3}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c33)}}if(s4!==peg$FAILED){peg$savedPos=s1;s2=peg$c15(s3);s1=s2}else{peg$currPos=s1;s1=peg$FAILED}}else{peg$currPos=s1;s1=peg$FAILED}}else{peg$currPos=s1;s1=peg$FAILED}if(s1===peg$FAILED){s1=peg$currPos;if(input.substr(peg$currPos,2)===peg$c34){s2=peg$c34;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c35)}}if(s2!==peg$FAILED){s3=peg$currPos;s4=[];s5=peg$currPos;s6=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,2)===peg$c36){s7=peg$c36;peg$currPos+=2}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c37)}}peg$silentFails--;if(s7===peg$FAILED){s6=void 0}else{peg$currPos=s6;s6=peg$FAILED}if(s6!==peg$FAILED){if(input.length>peg$currPos){s7=input.charAt(peg$currPos);peg$currPos++}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s7!==peg$FAILED){s6=[s6,s7];s5=s6}else{peg$currPos=s5;s5=peg$FAILED}}else{peg$currPos=s5;s5=peg$FAILED}while(s5!==peg$FAILED){s4.push(s5);s5=peg$currPos;s6=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,2)===peg$c36){s7=peg$c36;peg$currPos+=2}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c37)}}peg$silentFails--;if(s7===peg$FAILED){s6=void 0}else{peg$currPos=s6;s6=peg$FAILED}if(s6!==peg$FAILED){if(input.length>peg$currPos){s7=input.charAt(peg$currPos);peg$currPos++}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s7!==peg$FAILED){s6=[s6,s7];s5=s6}else{peg$currPos=s5;s5=peg$FAILED}}else{peg$currPos=s5;s5=peg$FAILED}}if(s4!==peg$FAILED){s3=input.substring(s3,peg$currPos)}else{s3=s4}if(s3!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c36){s4=peg$c36;peg$currPos+=2}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c37)}}if(s4!==peg$FAILED){peg$savedPos=s1;s2=peg$c15(s3);s1=s2}else{peg$currPos=s1;s1=peg$FAILED}}else{peg$currPos=s1;s1=peg$FAILED}}else{peg$currPos=s1;s1=peg$FAILED}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c38(s1)}s0=s1;return s0}function peg$parsescriptNode(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===60){s1=peg$c1;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c2)}}if(s1!==peg$FAILED){s2=peg$parsews();if(s2!==peg$FAILED){if(input.substr(peg$currPos,6)===peg$c39){s3=peg$c39;peg$currPos+=6}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c40)}}if(s3!==peg$FAILED){s4=[];s5=peg$parseattribute();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseattribute()}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===62){s5=peg$c5;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c6)}}if(s5!==peg$FAILED){s6=peg$currPos;s7=[];s8=peg$currPos;s9=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,9)===peg$c41){s10=peg$c41;peg$currPos+=9}else{s10=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c42)}}peg$silentFails--;if(s10===peg$FAILED){s9=void 0}else{peg$currPos=s9;s9=peg$FAILED}if(s9!==peg$FAILED){if(input.length>peg$currPos){s10=input.charAt(peg$currPos);peg$currPos++}else{s10=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s10!==peg$FAILED){s9=[s9,s10];s8=s9}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}while(s8!==peg$FAILED){s7.push(s8);s8=peg$currPos;s9=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,9)===peg$c41){s10=peg$c41;peg$currPos+=9}else{s10=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c42)}}peg$silentFails--;if(s10===peg$FAILED){s9=void 0}else{peg$currPos=s9;s9=peg$FAILED}if(s9!==peg$FAILED){if(input.length>peg$currPos){s10=input.charAt(peg$currPos);peg$currPos++}else{s10=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s10!==peg$FAILED){s9=[s9,s10];s8=s9}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}}if(s7!==peg$FAILED){s6=input.substring(s6,peg$currPos)}else{s6=s7}if(s6!==peg$FAILED){if(input.substr(peg$currPos,9)===peg$c41){s7=peg$c41;peg$currPos+=9}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c42)}}if(s7!==peg$FAILED){peg$savedPos=s0;s1=peg$c43(s4,s6);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===60){s1=peg$c1;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c2)}}if(s1!==peg$FAILED){s2=peg$parsews();if(s2!==peg$FAILED){if(input.substr(peg$currPos,7)===peg$c44){s3=peg$c44;peg$currPos+=7}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c45)}}if(s3!==peg$FAILED){s4=[];s5=peg$parseattribute();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseattribute()}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===62){s5=peg$c5;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c6)}}if(s5!==peg$FAILED){s6=peg$currPos;s7=[];s8=peg$currPos;s9=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,10)===peg$c46){s10=peg$c46;peg$currPos+=10}else{s10=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c47)}}peg$silentFails--;if(s10===peg$FAILED){s9=void 0}else{peg$currPos=s9;s9=peg$FAILED}if(s9!==peg$FAILED){if(input.length>peg$currPos){s10=input.charAt(peg$currPos);peg$currPos++}else{s10=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s10!==peg$FAILED){s9=[s9,s10];s8=s9}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}while(s8!==peg$FAILED){s7.push(s8);s8=peg$currPos;s9=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,10)===peg$c46){s10=peg$c46;peg$currPos+=10}else{s10=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c47)}}peg$silentFails--;if(s10===peg$FAILED){s9=void 0}else{peg$currPos=s9;s9=peg$FAILED}if(s9!==peg$FAILED){if(input.length>peg$currPos){s10=input.charAt(peg$currPos);peg$currPos++}else{s10=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s10!==peg$FAILED){s9=[s9,s10];s8=s9}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}}if(s7!==peg$FAILED){s6=input.substring(s6,peg$currPos)}else{s6=s7}if(s6!==peg$FAILED){if(input.substr(peg$currPos,10)===peg$c46){s7=peg$c46;peg$currPos+=10}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c47)}}if(s7!==peg$FAILED){peg$savedPos=s0;s1=peg$c43(s4,s6);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}return s0}function peg$parseelementNode(){var s0,s1,s2,s3,s4,s5,s6,s7,s8;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===60){s1=peg$c1;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c2)}}if(s1!==peg$FAILED){s2=peg$parsetagname();if(s2!==peg$FAILED){s3=peg$parseattributes();if(s3!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c48){s4=peg$c48;peg$currPos+=2}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c49)}}if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c50(s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===60){s1=peg$c1;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c2)}}if(s1!==peg$FAILED){s2=peg$parsetagname();if(s2!==peg$FAILED){s3=peg$parseattributes();if(s3!==peg$FAILED){if(input.charCodeAt(peg$currPos)===62){s4=peg$c5;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c6)}}if(s4!==peg$FAILED){s5=peg$parsehtml();if(s5!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c26){s6=peg$c26;peg$currPos+=2}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c27)}}if(s6!==peg$FAILED){s7=peg$parsetagname();if(s7!==peg$FAILED){if(input.charCodeAt(peg$currPos)===62){s8=peg$c5;peg$currPos++}else{s8=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c6)}}if(s8!==peg$FAILED){peg$savedPos=s0;s1=peg$c51(s2,s3,s5,s7);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}return s0}function peg$parseattributes(){var s0,s1;s0=[];s1=peg$parseattribute();while(s1!==peg$FAILED){s0.push(s1);s1=peg$parseattribute()}return s0}function peg$parseattribute(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;s1=peg$parseattributeName();if(s1!==peg$FAILED){s2=peg$currPos;if(input.charCodeAt(peg$currPos)===61){s3=peg$c52;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c53)}}if(s3!==peg$FAILED){s4=peg$parsews();if(s4!==peg$FAILED){s5=peg$parseattributeValue();if(s5!==peg$FAILED){s6=peg$parsews();if(s6!==peg$FAILED){s3=[s3,s4,s5,s6];s2=s3}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c54(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseattributeName(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parsews();if(s1!==peg$FAILED){s2=peg$currPos;s3=[];if(peg$c23.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c24)}}if(s4!==peg$FAILED){while(s4!==peg$FAILED){s3.push(s4);if(peg$c23.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c24)}}}}else{s3=peg$FAILED}if(s3!==peg$FAILED){s2=input.substring(s2,peg$currPos)}else{s2=s3}if(s2!==peg$FAILED){s3=peg$parsews();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c25(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseattributeNode(){var s0;s0=peg$parseescape();if(s0===peg$FAILED){s0=peg$parsesection();if(s0===peg$FAILED){s0=peg$parsevariable()}}return s0}function peg$parseattributeValue(){var s0,s1,s2,s3,s4,s5,s6,s7,s8;s0=peg$currPos;peg$savedPos=peg$currPos;s1=peg$c55();if(s1){s1=void 0}else{s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$currPos;if(input.charCodeAt(peg$currPos)===123){s3=peg$c56;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c57)}}if(s3!==peg$FAILED){s4=peg$currPos;s5=[];s6=peg$currPos;s7=peg$currPos;peg$silentFails++;if(input.charCodeAt(peg$currPos)===125){s8=peg$c58;peg$currPos++}else{s8=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c59)}}peg$silentFails--;if(s8===peg$FAILED){s7=void 0}else{peg$currPos=s7;s7=peg$FAILED}if(s7!==peg$FAILED){if(input.length>peg$currPos){s8=input.charAt(peg$currPos);peg$currPos++}else{s8=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s8!==peg$FAILED){s7=[s7,s8];s6=s7}else{peg$currPos=s6;s6=peg$FAILED}}else{peg$currPos=s6;s6=peg$FAILED}while(s6!==peg$FAILED){s5.push(s6);s6=peg$currPos;s7=peg$currPos;peg$silentFails++;if(input.charCodeAt(peg$currPos)===125){s8=peg$c58;peg$currPos++}else{s8=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c59)}}peg$silentFails--;if(s8===peg$FAILED){s7=void 0}else{peg$currPos=s7;s7=peg$FAILED}if(s7!==peg$FAILED){if(input.length>peg$currPos){s8=input.charAt(peg$currPos);peg$currPos++}else{s8=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s8!==peg$FAILED){s7=[s7,s8];s6=s7}else{peg$currPos=s6;s6=peg$FAILED}}else{peg$currPos=s6;s6=peg$FAILED}}if(s5!==peg$FAILED){s4=input.substring(s4,peg$currPos)}else{s4=s5}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s5=peg$c58;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c59)}}if(s5!==peg$FAILED){peg$savedPos=s2;s3=peg$c60(s4);s2=s3}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}if(s2===peg$FAILED){s2=peg$currPos;if(input.charCodeAt(peg$currPos)===34){s3=peg$c61;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c62)}}if(s3!==peg$FAILED){s4=[];s5=peg$parseattributeNode();if(s5===peg$FAILED){s5=peg$currPos;s6=peg$currPos;s7=peg$currPos;peg$silentFails++;if(input.charCodeAt(peg$currPos)===34){s8=peg$c61;peg$currPos++}else{s8=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c62)}}peg$silentFails--;if(s8===peg$FAILED){s7=void 0}else{peg$currPos=s7;s7=peg$FAILED}if(s7!==peg$FAILED){if(input.length>peg$currPos){s8=input.charAt(peg$currPos);peg$currPos++}else{s8=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s8!==peg$FAILED){s7=[s7,s8];s6=s7}else{peg$currPos=s6;s6=peg$FAILED}}else{peg$currPos=s6;s6=peg$FAILED}if(s6!==peg$FAILED){s5=input.substring(s5,peg$currPos)}else{s5=s6}}while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseattributeNode();if(s5===peg$FAILED){s5=peg$currPos;s6=peg$currPos;s7=peg$currPos;peg$silentFails++;if(input.charCodeAt(peg$currPos)===34){s8=peg$c61;peg$currPos++}else{s8=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c62)}}peg$silentFails--;if(s8===peg$FAILED){s7=void 0}else{peg$currPos=s7;s7=peg$FAILED}if(s7!==peg$FAILED){if(input.length>peg$currPos){s8=input.charAt(peg$currPos);peg$currPos++}else{s8=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s8!==peg$FAILED){s7=[s7,s8];s6=s7}else{peg$currPos=s6;s6=peg$FAILED}}else{peg$currPos=s6;s6=peg$FAILED}if(s6!==peg$FAILED){s5=input.substring(s5,peg$currPos)}else{s5=s6}}}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===34){s5=peg$c61;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c62)}}if(s5!==peg$FAILED){peg$savedPos=s2;s3=peg$c63(s4);s2=s3}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}if(s2===peg$FAILED){s2=peg$currPos;if(input.charCodeAt(peg$currPos)===39){s3=peg$c64;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c65)}}if(s3!==peg$FAILED){s4=[];s5=peg$parseattributeNode();if(s5===peg$FAILED){s5=peg$currPos;s6=peg$currPos;s7=peg$currPos;peg$silentFails++;if(input.charCodeAt(peg$currPos)===39){s8=peg$c64;peg$currPos++}else{s8=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c65)}}peg$silentFails--;if(s8===peg$FAILED){s7=void 0}else{peg$currPos=s7;s7=peg$FAILED}if(s7!==peg$FAILED){if(input.length>peg$currPos){s8=input.charAt(peg$currPos);peg$currPos++}else{s8=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s8!==peg$FAILED){s7=[s7,s8];s6=s7}else{peg$currPos=s6;s6=peg$FAILED}}else{peg$currPos=s6;s6=peg$FAILED}if(s6!==peg$FAILED){s5=input.substring(s5,peg$currPos)}else{s5=s6}}while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseattributeNode();if(s5===peg$FAILED){s5=peg$currPos;s6=peg$currPos;s7=peg$currPos;peg$silentFails++;if(input.charCodeAt(peg$currPos)===39){s8=peg$c64;peg$currPos++}else{s8=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c65)}}peg$silentFails--;if(s8===peg$FAILED){s7=void 0}else{peg$currPos=s7;s7=peg$FAILED}if(s7!==peg$FAILED){if(input.length>peg$currPos){s8=input.charAt(peg$currPos);peg$currPos++}else{s8=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s8!==peg$FAILED){s7=[s7,s8];s6=s7}else{peg$currPos=s6;s6=peg$FAILED}}else{peg$currPos=s6;s6=peg$FAILED}if(s6!==peg$FAILED){s5=input.substring(s5,peg$currPos)}else{s5=s6}}}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===39){s5=peg$c64;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c65)}}if(s5!==peg$FAILED){peg$savedPos=s2;s3=peg$c63(s4);s2=s3}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}}}if(s2!==peg$FAILED){peg$savedPos=peg$currPos;s3=peg$c66(s2);if(s3){s3=void 0}else{s3=peg$FAILED}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c67(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsesection(){var s0;s0=peg$parseifSection();if(s0===peg$FAILED){s0=peg$parseeachSection();if(s0===peg$FAILED){s0=peg$parserenderSection();if(s0===peg$FAILED){s0=peg$parsewithSection();if(s0===peg$FAILED){s0=peg$parsesetSection()}}}}return s0}function peg$parsesOpen(){var s0,s1,s2;s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c28){s1=peg$c28;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c29)}}if(s1!==peg$FAILED){s2=peg$parsews();if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsesClose(){var s0,s1,s2;s0=peg$currPos;s1=peg$parsews();if(s1!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c68){s2=peg$c68;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c69)}}if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsesectionNodes(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;peg$savedPos=peg$currPos;s1=peg$c70();if(s1){s1=void 0}else{s1=peg$FAILED}if(s1!==peg$FAILED){s2=[];s3=peg$parseattributeNode();if(s3===peg$FAILED){s3=peg$currPos;s4=peg$currPos;s5=peg$currPos;peg$silentFails++;s6=peg$parsesOpen();peg$silentFails--;if(s6===peg$FAILED){s5=void 0}else{peg$currPos=s5;s5=peg$FAILED}if(s5!==peg$FAILED){if(input.length>peg$currPos){s6=input.charAt(peg$currPos);peg$currPos++}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s6!==peg$FAILED){s5=[s5,s6];s4=s5}else{peg$currPos=s4;s4=peg$FAILED}}else{peg$currPos=s4;s4=peg$FAILED}if(s4!==peg$FAILED){s3=input.substring(s3,peg$currPos)}else{s3=s4}}while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseattributeNode();if(s3===peg$FAILED){s3=peg$currPos;s4=peg$currPos;s5=peg$currPos;peg$silentFails++;s6=peg$parsesOpen();peg$silentFails--;if(s6===peg$FAILED){s5=void 0}else{peg$currPos=s5;s5=peg$FAILED}if(s5!==peg$FAILED){if(input.length>peg$currPos){s6=input.charAt(peg$currPos);peg$currPos++}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s6!==peg$FAILED){s5=[s5,s6];s4=s5}else{peg$currPos=s4;s4=peg$FAILED}}else{peg$currPos=s4;s4=peg$FAILED}if(s4!==peg$FAILED){s3=input.substring(s3,peg$currPos)}else{s3=s4}}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c71(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parsehtml()}return s0}function peg$parseifSection(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10,s11,s12,s13,s14,s15,s16;s0=peg$currPos;s1=peg$parsesOpen();if(s1!==peg$FAILED){if(input.substr(peg$currPos,2).toLowerCase()===peg$c72){s2=input.substr(peg$currPos,2);peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c73)}}if(s2!==peg$FAILED){s3=peg$parsews();if(s3!==peg$FAILED){s4=peg$currPos;s5=[];s6=peg$parsesectionChar();while(s6!==peg$FAILED){s5.push(s6);s6=peg$parsesectionChar()}if(s5!==peg$FAILED){s4=input.substring(s4,peg$currPos)}else{s4=s5}if(s4!==peg$FAILED){s5=peg$parsesClose();if(s5!==peg$FAILED){s6=peg$parsesectionNodes();if(s6!==peg$FAILED){s7=[];s8=peg$currPos;s9=peg$parsesOpen();if(s9!==peg$FAILED){if(input.substr(peg$currPos,4).toLowerCase()===peg$c74){s10=input.substr(peg$currPos,4);peg$currPos+=4}else{s10=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c75)}}if(s10!==peg$FAILED){s11=peg$parsegws();if(s11!==peg$FAILED){if(input.substr(peg$currPos,2).toLowerCase()===peg$c72){s12=input.substr(peg$currPos,2);peg$currPos+=2}else{s12=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c73)}}if(s12!==peg$FAILED){s13=peg$parsews();if(s13!==peg$FAILED){s14=peg$currPos;s15=[];s16=peg$parsesectionChar();while(s16!==peg$FAILED){s15.push(s16);s16=peg$parsesectionChar()}if(s15!==peg$FAILED){s14=input.substring(s14,peg$currPos)}else{s14=s15}if(s14!==peg$FAILED){s15=peg$parsesClose();if(s15!==peg$FAILED){s16=peg$parsesectionNodes();if(s16!==peg$FAILED){peg$savedPos=s8;s9=peg$c76(s14,s16);s8=s9}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}while(s8!==peg$FAILED){s7.push(s8);s8=peg$currPos;s9=peg$parsesOpen();if(s9!==peg$FAILED){if(input.substr(peg$currPos,4).toLowerCase()===peg$c74){s10=input.substr(peg$currPos,4);peg$currPos+=4}else{s10=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c75)}}if(s10!==peg$FAILED){s11=peg$parsegws();if(s11!==peg$FAILED){if(input.substr(peg$currPos,2).toLowerCase()===peg$c72){s12=input.substr(peg$currPos,2);peg$currPos+=2}else{s12=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c73)}}if(s12!==peg$FAILED){s13=peg$parsews();if(s13!==peg$FAILED){s14=peg$currPos;s15=[];s16=peg$parsesectionChar();while(s16!==peg$FAILED){s15.push(s16);s16=peg$parsesectionChar()}if(s15!==peg$FAILED){s14=input.substring(s14,peg$currPos)}else{s14=s15}if(s14!==peg$FAILED){s15=peg$parsesClose();if(s15!==peg$FAILED){s16=peg$parsesectionNodes();if(s16!==peg$FAILED){peg$savedPos=s8;s9=peg$c76(s14,s16);s8=s9}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}}if(s7!==peg$FAILED){s8=peg$currPos;s9=peg$parsesOpen();if(s9!==peg$FAILED){if(input.substr(peg$currPos,4).toLowerCase()===peg$c74){s10=input.substr(peg$currPos,4);peg$currPos+=4}else{s10=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c75)}}if(s10!==peg$FAILED){s11=peg$parsesClose();if(s11!==peg$FAILED){s12=peg$parsesectionNodes();if(s12!==peg$FAILED){
peg$savedPos=s8;s9=peg$c77(s4,s12,s7);s8=s9}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}}else{peg$currPos=s8;s8=peg$FAILED}if(s8===peg$FAILED){s8=null}if(s8!==peg$FAILED){s9=peg$parsesOpen();if(s9!==peg$FAILED){if(input.substr(peg$currPos,5).toLowerCase()===peg$c78){s10=input.substr(peg$currPos,5);peg$currPos+=5}else{s10=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c79)}}if(s10!==peg$FAILED){s11=peg$parsesClose();if(s11!==peg$FAILED){peg$savedPos=s0;s1=peg$c80(s4,s6,s7,s8);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseeachSection(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10,s11;s0=peg$currPos;s1=peg$parsesOpen();if(s1!==peg$FAILED){if(input.substr(peg$currPos,4).toLowerCase()===peg$c81){s2=input.substr(peg$currPos,4);peg$currPos+=4}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c82)}}if(s2!==peg$FAILED){s3=peg$parsews();if(s3!==peg$FAILED){s4=peg$currPos;s5=peg$parsejsVariable();if(s5!==peg$FAILED){s6=[];s7=peg$currPos;s8=peg$parsews();if(s8!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s9=peg$c83;peg$currPos++}else{s9=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c84)}}if(s9!==peg$FAILED){s10=peg$parsews();if(s10!==peg$FAILED){s11=peg$parsejsVariable();if(s11!==peg$FAILED){s8=[s8,s9,s10,s11];s7=s8}else{peg$currPos=s7;s7=peg$FAILED}}else{peg$currPos=s7;s7=peg$FAILED}}else{peg$currPos=s7;s7=peg$FAILED}}else{peg$currPos=s7;s7=peg$FAILED}while(s7!==peg$FAILED){s6.push(s7);s7=peg$currPos;s8=peg$parsews();if(s8!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s9=peg$c83;peg$currPos++}else{s9=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c84)}}if(s9!==peg$FAILED){s10=peg$parsews();if(s10!==peg$FAILED){s11=peg$parsejsVariable();if(s11!==peg$FAILED){s8=[s8,s9,s10,s11];s7=s8}else{peg$currPos=s7;s7=peg$FAILED}}else{peg$currPos=s7;s7=peg$FAILED}}else{peg$currPos=s7;s7=peg$FAILED}}else{peg$currPos=s7;s7=peg$FAILED}}if(s6!==peg$FAILED){s7=peg$parsews();if(s7!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c85){s8=peg$c85;peg$currPos+=2}else{s8=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c86)}}if(s8!==peg$FAILED){peg$savedPos=s4;s5=peg$c87(s5,s6);s4=s5}else{peg$currPos=s4;s4=peg$FAILED}}else{peg$currPos=s4;s4=peg$FAILED}}else{peg$currPos=s4;s4=peg$FAILED}}else{peg$currPos=s4;s4=peg$FAILED}if(s4===peg$FAILED){s4=null}if(s4!==peg$FAILED){s5=peg$parsews();if(s5!==peg$FAILED){s6=peg$currPos;s7=[];s8=peg$parsesectionChar();while(s8!==peg$FAILED){s7.push(s8);s8=peg$parsesectionChar()}if(s7!==peg$FAILED){s6=input.substring(s6,peg$currPos)}else{s6=s7}if(s6!==peg$FAILED){s7=peg$parsesClose();if(s7!==peg$FAILED){s8=peg$parsesectionNodes();if(s8!==peg$FAILED){s9=peg$parsesOpen();if(s9!==peg$FAILED){if(input.substr(peg$currPos,7).toLowerCase()===peg$c88){s10=input.substr(peg$currPos,7);peg$currPos+=7}else{s10=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c89)}}if(s10!==peg$FAILED){s11=peg$parsesClose();if(s11!==peg$FAILED){peg$savedPos=s0;s1=peg$c90(s4,s6,s8);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsejsVariable(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$currPos;if(peg$c91.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c92)}}if(s2!==peg$FAILED){s3=[];if(peg$c93.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c94)}}while(s4!==peg$FAILED){s3.push(s4);if(peg$c93.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c94)}}}if(s3!==peg$FAILED){s2=[s2,s3];s1=s2}else{peg$currPos=s1;s1=peg$FAILED}}else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){s0=input.substring(s0,peg$currPos)}else{s0=s1}return s0}function peg$parserenderSection(){var s0,s1,s2,s3,s4,s5,s6,s7;s0=peg$currPos;peg$savedPos=peg$currPos;s1=peg$c95();if(s1){s1=void 0}else{s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$parsesOpen();if(s2!==peg$FAILED){if(input.substr(peg$currPos,6).toLowerCase()===peg$c96){s3=input.substr(peg$currPos,6);peg$currPos+=6}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c97)}}if(s3!==peg$FAILED){s4=peg$parsews();if(s4!==peg$FAILED){s5=peg$currPos;s6=[];s7=peg$parsesectionChar();while(s7!==peg$FAILED){s6.push(s7);s7=peg$parsesectionChar()}if(s6!==peg$FAILED){s5=input.substring(s5,peg$currPos)}else{s5=s6}if(s5!==peg$FAILED){s6=peg$parsesClose();if(s6!==peg$FAILED){peg$savedPos=s0;s1=peg$c98(s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsewithSection(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9;s0=peg$currPos;s1=peg$parsesOpen();if(s1!==peg$FAILED){if(input.substr(peg$currPos,4).toLowerCase()===peg$c99){s2=input.substr(peg$currPos,4);peg$currPos+=4}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c100)}}if(s2!==peg$FAILED){s3=peg$parsews();if(s3!==peg$FAILED){s4=peg$currPos;s5=[];s6=peg$parsesectionChar();while(s6!==peg$FAILED){s5.push(s6);s6=peg$parsesectionChar()}if(s5!==peg$FAILED){s4=input.substring(s4,peg$currPos)}else{s4=s5}if(s4!==peg$FAILED){s5=peg$parsesClose();if(s5!==peg$FAILED){s6=peg$parsesectionNodes();if(s6!==peg$FAILED){s7=peg$parsesOpen();if(s7!==peg$FAILED){if(input.substr(peg$currPos,7).toLowerCase()===peg$c101){s8=input.substr(peg$currPos,7);peg$currPos+=7}else{s8=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c102)}}if(s8!==peg$FAILED){s9=peg$parsesClose();if(s9!==peg$FAILED){peg$savedPos=s0;s1=peg$c103(s4,s6);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsesetSection(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10;s0=peg$currPos;s1=peg$parsesOpen();if(s1!==peg$FAILED){if(input.substr(peg$currPos,3).toLowerCase()===peg$c104){s2=input.substr(peg$currPos,3);peg$currPos+=3}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c105)}}if(s2!==peg$FAILED){s3=peg$parsews();if(s3!==peg$FAILED){s4=peg$currPos;s5=peg$currPos;if(peg$c106.test(input.charAt(peg$currPos))){s6=input.charAt(peg$currPos);peg$currPos++}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c107)}}if(s6!==peg$FAILED){s7=[];if(peg$c93.test(input.charAt(peg$currPos))){s8=input.charAt(peg$currPos);peg$currPos++}else{s8=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c94)}}if(s8!==peg$FAILED){while(s8!==peg$FAILED){s7.push(s8);if(peg$c93.test(input.charAt(peg$currPos))){s8=input.charAt(peg$currPos);peg$currPos++}else{s8=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c94)}}}}else{s7=peg$FAILED}if(s7!==peg$FAILED){s6=[s6,s7];s5=s6}else{peg$currPos=s5;s5=peg$FAILED}}else{peg$currPos=s5;s5=peg$FAILED}if(s5!==peg$FAILED){s4=input.substring(s4,peg$currPos)}else{s4=s5}if(s4!==peg$FAILED){s5=peg$parsews();if(s5!==peg$FAILED){if(input.charCodeAt(peg$currPos)===61){s6=peg$c52;peg$currPos++}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c53)}}if(s6!==peg$FAILED){s7=peg$parsews();if(s7!==peg$FAILED){s8=peg$currPos;s9=[];s10=peg$parsesectionChar();while(s10!==peg$FAILED){s9.push(s10);s10=peg$parsesectionChar()}if(s9!==peg$FAILED){s8=input.substring(s8,peg$currPos)}else{s8=s9}if(s8!==peg$FAILED){s9=peg$parsesClose();if(s9!==peg$FAILED){peg$savedPos=s0;s1=peg$c108(s4,s8);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsesectionChar(){var s0,s1,s2;s0=peg$currPos;s1=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,2)===peg$c68){s2=peg$c68;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c69)}}peg$silentFails--;if(s2===peg$FAILED){s1=void 0}else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){if(input.length>peg$currPos){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseboolean(){var s0,s1;s0=peg$currPos;if(input.substr(peg$currPos,4)===peg$c109){s1=peg$c109;peg$currPos+=4}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c110)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c111()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,5)===peg$c112){s1=peg$c112;peg$currPos+=5}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c113)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c114()}s0=s1}return s0}function peg$parsenumber(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===45){s1=peg$c115;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c116)}}if(s1===peg$FAILED){s1=null}if(s1!==peg$FAILED){s2=[];if(peg$c117.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c118)}}if(s3!==peg$FAILED){while(s3!==peg$FAILED){s2.push(s3);if(peg$c117.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c118)}}}}else{s2=peg$FAILED}if(s2!==peg$FAILED){s3=peg$currPos;if(input.charCodeAt(peg$currPos)===46){s4=peg$c119;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c120)}}if(s4!==peg$FAILED){s5=[];if(peg$c117.test(input.charAt(peg$currPos))){s6=input.charAt(peg$currPos);peg$currPos++}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c118)}}if(s6!==peg$FAILED){while(s6!==peg$FAILED){s5.push(s6);if(peg$c117.test(input.charAt(peg$currPos))){s6=input.charAt(peg$currPos);peg$currPos++}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c118)}}}}else{s5=peg$FAILED}if(s5!==peg$FAILED){s4=[s4,s5];s3=s4}else{peg$currPos=s3;s3=peg$FAILED}}else{peg$currPos=s3;s3=peg$FAILED}if(s3===peg$FAILED){s3=null}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c121();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseinteger(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c117.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c118)}}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c117.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c118)}}}}else{s1=peg$FAILED}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c122()}s0=s1;return s0}function peg$parsestring(){var s0,s1,s2,s3;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===34){s1=peg$c61;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c62)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseescape();if(s3===peg$FAILED){if(peg$c123.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c124)}}}while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseescape();if(s3===peg$FAILED){if(peg$c123.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c124)}}}}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===34){s3=peg$c61;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c62)}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c125(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===39){s1=peg$c64;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c65)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseescape();if(s3===peg$FAILED){if(peg$c126.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c127)}}}while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseescape();if(s3===peg$FAILED){if(peg$c126.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c127)}}}}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===39){s3=peg$c64;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c65)}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c125(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}return s0}function peg$parsenull(){var s0,s1;s0=peg$currPos;if(input.substr(peg$currPos,4)===peg$c128){s1=peg$c128;peg$currPos+=4}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c129)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c130()}s0=s1;return s0}function peg$parseundefined(){var s0,s1,s2,s3,s4,s5,s6,s7;s0=peg$currPos;if(input.substr(peg$currPos,9)===peg$c131){s1=peg$c131;peg$currPos+=9}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c132)}}if(s1===peg$FAILED){s1=peg$currPos;if(input.substr(peg$currPos,4)===peg$c133){s2=peg$c133;peg$currPos+=4}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c134)}}if(s2!==peg$FAILED){s3=peg$parsegws();if(s3!==peg$FAILED){s4=[];s5=peg$currPos;s6=peg$currPos;peg$silentFails++;if(peg$c135.test(input.charAt(peg$currPos))){s7=input.charAt(peg$currPos);peg$currPos++}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c136)}}peg$silentFails--;if(s7===peg$FAILED){s6=void 0}else{peg$currPos=s6;s6=peg$FAILED}if(s6!==peg$FAILED){if(input.length>peg$currPos){s7=input.charAt(peg$currPos);peg$currPos++}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s7!==peg$FAILED){s6=[s6,s7];s5=s6}else{peg$currPos=s5;s5=peg$FAILED}}else{peg$currPos=s5;s5=peg$FAILED}if(s5!==peg$FAILED){while(s5!==peg$FAILED){s4.push(s5);s5=peg$currPos;s6=peg$currPos;peg$silentFails++;if(peg$c135.test(input.charAt(peg$currPos))){s7=input.charAt(peg$currPos);peg$currPos++}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c136)}}peg$silentFails--;if(s7===peg$FAILED){s6=void 0}else{peg$currPos=s6;s6=peg$FAILED}if(s6!==peg$FAILED){if(input.length>peg$currPos){s7=input.charAt(peg$currPos);peg$currPos++}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s7!==peg$FAILED){s6=[s6,s7];s5=s6}else{peg$currPos=s5;s5=peg$FAILED}}else{peg$currPos=s5;s5=peg$FAILED}}}else{s4=peg$FAILED}if(s4!==peg$FAILED){s2=[s2,s3,s4];s1=s2}else{peg$currPos=s1;s1=peg$FAILED}}else{peg$currPos=s1;s1=peg$FAILED}}else{peg$currPos=s1;s1=peg$FAILED}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c137()}s0=s1;return s0}function peg$parsews(){var s0,s1,s2;peg$silentFails++;s0=peg$currPos;s1=[];if(peg$c139.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c140)}}while(s2!==peg$FAILED){s1.push(s2);if(peg$c139.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c140)}}}if(s1!==peg$FAILED){s0=input.substring(s0,peg$currPos)}else{s0=s1}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c138)}}return s0}function peg$parsegws(){var s0,s1,s2;peg$silentFails++;s0=peg$currPos;s1=[];if(peg$c139.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c140)}}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c139.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c140)}}}}else{s1=peg$FAILED}if(s1!==peg$FAILED){s0=input.substring(s0,peg$currPos)}else{s0=s1}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c141)}}return s0}function peg$parseescape(){var s0,s1,s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s1=peg$c142;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c143)}}if(s1!==peg$FAILED){if(input.length>peg$currPos){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c144(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}var ast=require("./ast");var _=require("lodash");var jsep=require("jsep");options=_.assign({strict:true},options);function createNode(type,props){var loc=location();return new ast[type](loc.start.line,loc.start.column,props)}function combineText(nodes,type){return nodes.reduce(function(m,n){var last=m.length-1;if(typeof n==="string"&&typeof m[last]==="string"){m[last]+=n}else{m.push(n)}return m},[]).map(function(n){if(typeof n!=="string")return n;return createNode(type||"Text",{value:n})})}function createExpression(v){return createNode("Expression",{value:v,tree:jsep(v)})}var attributeMode=false;function enterAttribute(){attributeMode=true}function exitAttribute(){attributeMode=false}peg$result=peg$startRuleFunction();if(peg$result!==peg$FAILED&&peg$currPos===input.length){return peg$result}else{if(peg$result!==peg$FAILED&&peg$currPos<input.length){peg$fail({type:"end",description:"end of input"})}throw peg$buildException(null,peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}}return{SyntaxError:peg$SyntaxError,parse:peg$parse}}()},{"./ast":1,jsep:18,lodash:20}],3:[function(require,module,exports){(function(process,global,Buffer){"use strict";var Trackr=require("trackr");Trackr="default"in Trackr?Trackr["default"]:Trackr;var trackrObjects=require("trackr-objects");var _=require("lodash");var matchesSelector=require("dom-matches");matchesSelector="default"in matchesSelector?matchesSelector["default"]:matchesSelector;var merge=require("plain-merge");merge="default"in merge?merge["default"]:merge;var events=require("events");var assignProps=require("assign-props");assignProps="default"in assignProps?assignProps["default"]:assignProps;var subclass=require("backbone-extend-standalone");subclass="default"in subclass?subclass["default"]:subclass;var sourceMap=require("source-map");var raf=require("raf");raf="default"in raf?raf["default"]:raf;var babelHelpers={};babelHelpers.typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};babelHelpers.classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};babelHelpers.createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();babelHelpers;var hasOwnProperty=Object.prototype.hasOwnProperty;var create$1=Object.create;var has=function(map,property){return hasOwnProperty.call(map,property)};var createMap=function(){return create$1(null)};function NodeData(nodeName,key){this.attrs=createMap();this.attrsArr=[];this.newAttrs=createMap();this.key=key;this.keyMap=null;this.keyMapValid=true;this.nodeName=nodeName;this.text=null}var initData=function(node,nodeName,key){var data=new NodeData(nodeName,key);node["__incrementalDOMData"]=data;return data};var getData=function(node){var data=node["__incrementalDOMData"];if(!data){var nodeName=node.nodeName.toLowerCase();var key=null;if(node instanceof Element){key=node.getAttribute("key")}data=initData(node,nodeName,key)}return data};var symbols={"default":"__default",placeholder:"__placeholder"};var applyAttr=function(el,name,value){if(value==null){el.removeAttribute(name)}else{el.setAttribute(name,value)}};var applyProp=function(el,name,value){el[name]=value};var applyStyle=function(el,name,style){if(typeof style==="string"){el.style.cssText=style}else{el.style.cssText="";var elStyle=el.style;var obj=style;for(var prop in obj){if(has(obj,prop)){elStyle[prop]=obj[prop]}}}};var applyAttributeTyped=function(el,name,value){var type=typeof value;if(type==="object"||type==="function"){applyProp(el,name,value)}else{applyAttr(el,name,value)}};var updateAttribute=function(el,name,value){var data=getData(el);var attrs=data.attrs;if(attrs[name]===value){return}var mutator=attributes[name]||attributes[symbols.default];mutator(el,name,value);attrs[name]=value};var attributes=createMap();attributes[symbols.default]=applyAttributeTyped;attributes[symbols.placeholder]=function(){};attributes["style"]=applyStyle;var notifications={nodesCreated:null,nodesDeleted:null};var getNamespaceForTag=function(tag,parent){if(tag==="svg"){return"http://www.w3.org/2000/svg"}if(getData(parent).nodeName==="foreignObject"){return null}return parent.namespaceURI};var createElement=function(doc,parent,tag,key,statics){var namespace=getNamespaceForTag(tag,parent);var el;if(namespace){el=doc.createElementNS(namespace,tag)}else{el=doc.createElement(tag)}initData(el,tag,key);if(statics){for(var i=0;i<statics.length;i+=2){updateAttribute(el,statics[i],statics[i+1])}}return el};var createText=function(doc){var node=doc.createTextNode("");initData(node,"#text",null);return node};var createKeyMap=function(el){var map=createMap();var children=el.children;var count=children.length;for(var i=0;i<count;i+=1){var child=children[i];var key=getData(child).key;if(key){map[key]=child}}return map};var getKeyMap=function(el){var data=getData(el);if(!data.keyMap){data.keyMap=createKeyMap(el)}return data.keyMap};var getChild=function(parent,key){return key?getKeyMap(parent)[key]:null};var registerChild=function(parent,key,child){getKeyMap(parent)[key]=child};function Context$1(){this.created=notifications.nodesCreated&&[];this.deleted=notifications.nodesDeleted&&[]}Context$1.prototype.markCreated=function(node){if(this.created){this.created.push(node)}};Context$1.prototype.markDeleted=function(node){if(this.deleted){this.deleted.push(node)}};Context$1.prototype.notifyChanges=function(){if(this.created&&this.created.length>0){notifications.nodesCreated(this.created)}if(this.deleted&&this.deleted.length>0){notifications.nodesDeleted(this.deleted)}};var inAttributes=false;var inSkip=false;var assertInPatch=function(context){if(!context){throw new Error("Cannot call currentElement() unless in patch")}};var assertKeyedTagMatches=function(nodeName,tag,key){if(nodeName!==tag){throw new Error('Was expecting node with key "'+key+'" to be a '+tag+", not a "+nodeName+".")}};var assertNoUnclosedTags=function(openElement,root){if(openElement===root){return}var currentElement=openElement;var openTags=[];while(currentElement&&currentElement!==root){openTags.push(currentElement.nodeName.toLowerCase());currentElement=currentElement.parentNode}throw new Error("One or more tags were not closed:\n"+openTags.join("\n"))};var assertNotInAttributes=function(functionName){if(inAttributes){throw new Error(functionName+"() may not be called between "+"elementOpenStart() and elementOpenEnd().")}};var assertNotInSkip=function(functionName){if(inSkip){throw new Error(functionName+"() may not be called inside an element "+"that has called skip().")}};var assertInAttributes=function(functionName){if(!inAttributes){throw new Error(functionName+"() must be called after "+"elementOpenStart().")}};var assertVirtualAttributesClosed=function(){if(inAttributes){throw new Error("elementOpenEnd() must be called after calling "+"elementOpenStart().")}};var assertPlaceholderKeySpecified=function(key){if(!key){throw new Error("Placeholder elements must have a key specified.")}};var assertCloseMatchesOpenTag=function(nodeName,tag){if(nodeName!==tag){throw new Error("Received a call to close "+tag+" but "+nodeName+" was open.")}};var assertNoChildrenDeclaredYet=function(functionName,previousNode){if(previousNode!==null){throw new Error(functionName+"() must come before any child "+"declarations inside the current element.")}};var setInAttributes=function(value){var previous=inAttributes;inAttributes=value;return previous};var setInSkip=function(value){var previous=inSkip;inSkip=value;return previous};var context=null;var currentNode;var currentParent;var previousNode;var root;var doc;var patch=function(node,fn,data){var prevContext=context;var prevRoot=root;var prevDoc=doc;var prevCurrentNode=currentNode;var prevCurrentParent=currentParent;var prevPreviousNode=previousNode;var previousInAttributes=false;var previousInSkip=false;context=new Context$1;root=node;doc=node.ownerDocument;currentNode=node;currentParent=null;previousNode=null;if(process.env.NODE_ENV!=="production"){previousInAttributes=setInAttributes(false);previousInSkip=setInSkip(false)}enterNode();fn(data);exitNode();if(process.env.NODE_ENV!=="production"){assertVirtualAttributesClosed();assertNoUnclosedTags(previousNode,node);setInAttributes(previousInAttributes);setInSkip(previousInSkip)}context.notifyChanges();context=prevContext;root=prevRoot;doc=prevDoc;currentNode=prevCurrentNode;currentParent=prevCurrentParent;previousNode=prevPreviousNode};var matches$1=function(nodeName,key){var data=getData(currentNode);return nodeName===data.nodeName&&key==data.key};var alignWithDOM=function(nodeName,key,statics){if(currentNode&&matches$1(nodeName,key)){return}var node;if(key){node=getChild(currentParent,key);if(node&&process.env.NODE_ENV!=="production"){assertKeyedTagMatches(getData(node).nodeName,nodeName,key)}}if(!node){if(nodeName==="#text"){node=createText(doc)}else{node=createElement(doc,currentParent,nodeName,key,statics)}if(key){registerChild(currentParent,key,node)}context.markCreated(node)}if(currentNode&&getData(currentNode).key){currentParent.replaceChild(node,currentNode);getData(currentParent).keyMapValid=false}else{currentParent.insertBefore(node,currentNode)}currentNode=node};var clearUnvisitedDOM=function(){var node=currentParent;var data=getData(node);var keyMap=data.keyMap;var keyMapValid=data.keyMapValid;var child=node.lastChild;var key;if(child===previousNode&&keyMapValid){return}if(data.attrs[symbols.placeholder]&&node!==root){return}while(child!==previousNode){node.removeChild(child);context.markDeleted(child);key=getData(child).key;if(key){delete keyMap[key]}child=node.lastChild}if(!keyMapValid){for(key in keyMap){child=keyMap[key];if(child.parentNode!==node){context.markDeleted(child);delete keyMap[key]}}data.keyMapValid=true}};var enterNode=function(){currentParent=currentNode;currentNode=currentNode.firstChild;previousNode=null};var nextNode=function(){previousNode=currentNode;currentNode=currentNode.nextSibling};var exitNode=function(){clearUnvisitedDOM();previousNode=currentParent;currentNode=currentParent.nextSibling;currentParent=currentParent.parentNode};var coreElementOpen=function(tag,key,statics){alignWithDOM(tag,key,statics);enterNode();return currentParent};var coreElementClose=function(){if(process.env.NODE_ENV!=="production"){setInSkip(false)}exitNode();return previousNode};var coreText=function(){alignWithDOM("#text",null,null);nextNode();return previousNode};var currentElement=function(){if(process.env.NODE_ENV!=="production"){assertInPatch(context);assertNotInAttributes("currentElement")}return currentParent};var skip=function(){if(process.env.NODE_ENV!=="production"){assertNoChildrenDeclaredYet("skip",previousNode);setInSkip(true)}previousNode=currentParent.lastChild};var ATTRIBUTES_OFFSET=3;var argsBuilder=[];var elementOpen=function(tag,key,statics,var_args){if(process.env.NODE_ENV!=="production"){assertNotInAttributes("elementOpen");assertNotInSkip("elementOpen")}var node=coreElementOpen(tag,key,statics);var data=getData(node);var attrsArr=data.attrsArr;var newAttrs=data.newAttrs;var attrsChanged=false;var i=ATTRIBUTES_OFFSET;var j=0;for(;i<arguments.length;i+=1,j+=1){if(attrsArr[j]!==arguments[i]){attrsChanged=true;break}}for(;i<arguments.length;i+=1,j+=1){attrsArr[j]=arguments[i]}if(j<attrsArr.length){attrsChanged=true;attrsArr.length=j}if(attrsChanged){for(i=ATTRIBUTES_OFFSET;i<arguments.length;i+=2){newAttrs[arguments[i]]=arguments[i+1]}for(var attr in newAttrs){updateAttribute(node,attr,newAttrs[attr]);newAttrs[attr]=undefined}}return node};var elementOpenStart=function(tag,key,statics){if(process.env.NODE_ENV!=="production"){assertNotInAttributes("elementOpenStart");setInAttributes(true)}argsBuilder[0]=tag;argsBuilder[1]=key;argsBuilder[2]=statics};var attr=function(name,value){if(process.env.NODE_ENV!=="production"){assertInAttributes("attr")}argsBuilder.push(name,value)};var elementOpenEnd=function(){if(process.env.NODE_ENV!=="production"){assertInAttributes("elementOpenEnd");setInAttributes(false)}var node=elementOpen.apply(null,argsBuilder);argsBuilder.length=0;return node};var elementClose=function(tag){if(process.env.NODE_ENV!=="production"){assertNotInAttributes("elementClose")}var node=coreElementClose();if(process.env.NODE_ENV!=="production"){assertCloseMatchesOpenTag(getData(node).nodeName,tag)}return node};var elementVoid=function(tag,key,statics,var_args){var node=elementOpen.apply(null,arguments);elementClose.apply(null,arguments);return node};var elementPlaceholder=function(tag,key,statics,var_args){if(process.env.NODE_ENV!=="production"){assertPlaceholderKeySpecified(key)}elementOpen.apply(null,arguments);skip();return elementClose.apply(null,arguments)};var text=function(value,var_args){if(process.env.NODE_ENV!=="production"){assertNotInAttributes("text");assertNotInSkip("text")}var node=coreText();var data=getData(node);if(data.text!==value){data.text=value;var formatted=value;for(var i=1;i<arguments.length;i+=1){formatted=arguments[i](formatted)}node.data=formatted}return node};function forEach(val,fn,ctx){if(val&&typeof val.forEach==="function")val.forEach(fn,ctx);else _.forEach(val,fn,ctx)}function map(val,fn,ctx){var res=[];forEach(val,function(v,i,l){res.push(fn.call(ctx,v,i,l))});return res}function emptyNode(node){while(node.lastChild){node.removeChild(node.lastChild)}return node}var entity=/&(?:#x[a-f0-9]+|#[0-9]+|[a-z0-9]+);?/gi;function containsEntities(str){return entity.test(str)}var decodeEntities=function(){if(typeof document==="undefined")return;var element=document.createElement("div");return function decodeHTMLEntities(str){str=str.replace(entity,function(m){element.innerHTML=m;return element.textContent});emptyNode(element);return str}}();function toString(value){if(typeof value!=="string"){value=value!=null?value.toString():""}return value}function joinValues(){return _.toArray(arguments).map(toString).join("")}function matches(node,selector){if(_.isArray(selector))return selector.some(function(s){
return matches(node,s)});if(selector instanceof window.Node){return node===selector}if(typeof selector==="function"){return!!selector(node)}if(node.nodeType===window.Node.ELEMENT_NODE){return matchesSelector(node,selector)}return false}function getPropertyFromClass(obj,prop){var val;var proto=Object.getPrototypeOf(obj);if(typeof prop==="string"&&prop){(function(){var p=prop;prop=function prop(c){return c[p]}})()}if(typeof prop!=="function"){throw new Error("Expecting function or string for property.")}while(proto){val=merge.defaults(val,prop(proto.constructor));proto=Object.getPrototypeOf(proto)}return val}var utils=Object.freeze({assign:_.assign,forEach:forEach,map:map,emptyNode:emptyNode,containsEntities:containsEntities,decodeEntities:decodeEntities,toString:toString,joinValues:joinValues,matches:matches,getPropertyFromClass:getPropertyFromClass});function autotext(fn,that){var node=coreText();function renderText(c){c.node=node;var data=getData(node);var value=fn.call(that,node);if(data.text!==value){data.text=value;node.data=toString(value)}}return Trackr.autorun(renderText)}function autoelement(node,fn){return Trackr.autorun(function(c){c.element=node;var cur=undefined;try{cur=currentElement()}catch(e){}if(cur===node)fn(node,c);else patch(node,function(){return fn(node,c)})})}var execDeletedCallbacks=function execDeletedCallbacks(node){var data=getData(node);var cbs=data.deletedCallbacks;if(!cbs)return;cbs.splice(0,cbs.length).forEach(function(fn){fn.call(null,node)})};notifications.nodesDeleted=function(nodes){_.forEach(nodes,function(node){if(node.childNodes)notifications.nodesDeleted(node.childNodes);execDeletedCallbacks(node)})};function onDestroy(node,fn){if(typeof fn!=="function"){throw new Error("Expecting function.")}var data=getData(node);if(!data.deletedCallbacks)data.deletedCallbacks=[];data.deletedCallbacks.push(fn)}function removeDestroyListener(node,fn){var data=getData(node);if(data.deletedCallbacks){data.deletedCallbacks=_.without(data.deletedCallbacks,fn)}}function updateProperty(el,name,value){var data=getData(el);var attrs=data.attrs;if(attrs[name]===value){return}el[name]=value;attrs[name]=value}var idom=Object.freeze({updateAttribute:updateAttribute,getData:getData,autotext:autotext,autoelement:autoelement,onDestroy:onDestroy,removeDestroyListener:removeDestroyListener,updateProperty:updateProperty,patch:patch,currentElement:currentElement,skip:skip,elementVoid:elementVoid,elementOpenStart:elementOpenStart,elementOpenEnd:elementOpenEnd,elementOpen:elementOpen,elementClose:elementClose,elementPlaceholder:elementPlaceholder,text:text,attr:attr,symbols:symbols,attributes:attributes,applyAttr:applyAttr,applyProp:applyProp,notifications:notifications});var templates={};var types={};function Template(name,render){if(typeof name!=="string"||name===""){throw new Error("Expecting a non-empty string for template name.")}if(typeof render!=="function"){throw new Error("Expecting a function for render.")}events.EventEmitter.call(this);this.setMaxListeners(0);this.s={name:name,render:render,renderdep:new Trackr.Dependency,helpers:new trackrObjects.Map};this.use("decorators");this.initialize()}Template.extend=subclass;Template.prototype=Object.create(events.EventEmitter.prototype);Template.prototype.constructor=Template;Template.prototype.type="template";Template.prototype.initialize=function(){};Template.prototype.use=function use(p){return load(this,p,_.toArray(arguments).slice(1))};Template.prototype.createContext=function(data,parent){if(data instanceof Context){var _ref=[data,null];parent=_ref[0];data=_ref[1]}var ctx=new Context(data,parent,this);this.emit("context",ctx);return ctx};Template.prototype.invalidate=function(){this.s.renderdep.changed();return this};Template.prototype.render=function(data,key){this.s.renderdep.depend();var ctx=this.createContext(data);this.s.render(ctx,key);this.emit("render",ctx);return ctx};Template.prototype.paint=function(node,data){var _this=this;if(typeof node==="string")node=document.querySelector(node);if(!node||node.nodeType!==Node.ELEMENT_NODE){throw new Error("Expecting a valid DOM element to paint.")}var ctx=data instanceof Context?data:new Context(data);var c=Trackr.autorun(function(){patch(node,function(){return _this.render(ctx)})});c.context=ctx;c.template=this;c.onStop(function(){patch(node,function(){})});return c};var globalHelpers=new trackrObjects.Map;var helpers=Template.prototype.helpers=function(key,value){var _this2=this;if((typeof key==="undefined"?"undefined":babelHelpers.typeof(key))==="object"){Object.keys(key).forEach(function(k){return helpers.call(_this2,k,key[k])});return this}var h=globalHelpers;if(this instanceof Template)h=this.s.helpers;if(typeof value==="undefined")h.delete(key);else h.set(key,value);return this};var getHelper=Template.prototype.getHelper=function(key){if(this instanceof Template){return this.s.helpers.get(key)}return globalHelpers.get(key)};function render(name,ctx,key){var tpl=getByName(name);if(tpl)return tpl.render(ctx,key)}function getByName(name){return templates[name]}function paint(tpl,node,data){if(typeof tpl==="string"){tpl=getByName(tpl);if(!tpl)throw new Error("No template exists with name '"+tpl+"'")}if(!(tpl instanceof Template)){throw new Error("Expecting template name or instance of Template.")}return tpl.paint(node,data)}function registerType(type,props){if(typeof type!=="string"||!type){throw new Error("Expecting non-empty string for type.")}if(_.has(types,type)){throw new Error("Template type '"+type+"' already exists.")}if(typeof props==="function"){props={initialize:props}}props=_.assign({},props,{type:type});var T=Template;if(props.extends&&_.has(types,props.extends)){T=types[props.extends];delete props.extends}function wrap(k,f){return function(){var osuper=this.super;this.super=T.prototype[k];var ret=f.apply(this,arguments);this.super=osuper;return ret}}for(var k in props){var fn=props[k];if(typeof fn!=="function")continue;if(/this\.super|this\["super"\]|this\['super'\]/.test(fn.toString())){props[k]=wrap(k,fn)}}return types[type]=T.extend(props)}function create(name,type,render){if(typeof name!=="string"||!name){throw new Error("Expecting non-empty string for name.")}if(getByName(name)){throw new Error("Template '"+name+"' already exists.")}if(typeof type==="function"){var _ref2=[type,null];render=_ref2[0];type=_ref2[1]}if(type&&!_.has(types,type)){throw new Error("Template type "+type+" does not exist.")}var T=type?types[type]:Template;return templates[name]=new T(name,render)}function Context(data,parent,template){if(!(this instanceof Context)){return new Context(parent)}events.EventEmitter.call(this);this.setMaxListeners(0);if(data instanceof Context){var _ref=[parent,data,null];template=_ref[0];parent=_ref[1];data=_ref[2]}if(parent&&!(parent instanceof Context)){throw new Error("Expecting an instance of Context for parent.")}this.s={parent:parent||null,template:template||null,scope:{},data:new trackrObjects.Variable};if(data!=null)this.set(data);if(!this.parent)this.dataVar.set(data)}Context.prototype=Object.create(events.EventEmitter.prototype);Context.prototype.constructor=Context;assignProps(Context.prototype,{scope:function scope(){return this.s.scope},dataVar:function dataVar(){return this.s.data},data:function data(){return this.s.data.get()},template:function template(){return this.s.template},parent:function parent(){return this.s.parent}});Context.prototype.set=function(key,value){var _this=this;if((typeof key==="undefined"?"undefined":babelHelpers.typeof(key))==="object"){_.forEach(key,function(v,k){return _this.set(k,v)});return this}if(key==="this"){this.s.data.set(value)}else{if(typeof value==="undefined")delete this.s.scope[key];else this.s.scope[key]=value}return this};Context.prototype.get=function(key){return _.has(this.s.scope,key)?this.s.scope[key]:void 0};Context.prototype.parentData=function(dist){if(typeof dist!=="number"||isNaN(dist))dist=1;if(dist>=0){var _v=this;while(dist&&_v){dist--;_v=_v.parent}return!dist&&_v?_v.data:void 0}var views=[];var v=this;while(v){views.push(v);v=v.parent}var view=views[Math.abs(dist)-1];return view?view.data:void 0};Context.prototype.getTemplateContext=function(){var view=this;while(view){if(view.template!=null){return view}view=view.parent}};Context.prototype.getTemplate=function(){var ctx=this.getTemplateContext();return ctx?ctx.template:void 0};var lookup=function lookup(tpl,ctx,key){var view=undefined;if(!key||key==="this"){view=ctx;while(view){var _val=view.data;if(_val!==void 0)return _val;view=view.parent}}if(key==="$this"){return function(d){return ctx.parentData(d)}}if(tpl){var _val2=tpl.getHelper(key);if(_val2!==void 0)return _val2}view=ctx;while(view){var _val3=view.get(key);if(_val3!==void 0)return _val3;view=view.parent}var val=getHelper(key);if(val!==void 0)return val};Context.prototype.lookup=function(key){return lookup(this.getTemplate(),this,key)};var plugins;function load(tpl,plugin,args){var name=undefined;if(plugins==null)plugins={};if(_.isString(plugin)){name=plugin;if(plugins[name]==null)throw new Error("No plugin exists with id '"+name+"'.");plugin=plugins[name]}if(!_.isFunction(plugin))throw new Error("Expecting string or function for plugin");if(tpl._loaded_plugins==null)tpl._loaded_plugins=[];if(tpl._loaded_plugins.some(function(p){return p.plugin===plugin}))return tpl;if(args==null)args=[];if(!_.isArray(args))args=[args];tpl._loaded_plugins.push({name:name,plugin:plugin,args:args});plugin.apply(tpl,args);return tpl}function register(name,fn){if(plugins==null)plugins={};if(typeof name!=="string"){throw new Error("Expecting string name for plugin.")}if(typeof fn!=="function"){throw new Error("Expecting function for plugin.")}if(fn===plugins[name])return;if(plugins[name]!=null){throw new Error('Refusing to overwrite existing plugin "name".')}plugins[name]=fn}function get(name){return plugins&&plugins[name]}var plugins$1=Object.freeze({load:load,register:register,get:get});var decorators={};function plugin(){this._decorators={};this.decorate=add;this.stopDecorating=remove;this.findDecorator=find}register("decorators",plugin);function add(name,fn,options){if((typeof name==="undefined"?"undefined":babelHelpers.typeof(name))==="object"){options=fn;_.each(name,function(fn,n){if(_.isArray(fn))add.call(this,n,fn[0],fn[1]);else add.call(this,n,fn,options)},this);return this}if(typeof name!=="string"||name==="")throw new Error("Expecting non-empty string for decorator name.");if(typeof fn!=="function")throw new Error("Expecting function for decorator.");var decs=this._decorators?this._decorators:decorators;decs[name]={template:this,callback:fn,options:options||{}};return this}function remove(name){if(this._decorators){if(name==null)this._decorators={};else delete this._decorators[name]}else if(name){delete decorators[name]}return this}function find(name){var decs=this._decorators;if(decs!=null&&decs[name]){return decs[name]}}function lookup$1(ctx,name){var owner=ctx.getTemplateContext();if(owner){var dec=owner.template.findDecorator(name);if(dec)return _.assign({owner:owner},dec)}if(decorators[name]){return _.assign({owner:global},decorators[name])}}function setAttribute(node,name,values){var v=!values||!values.length||values[0]==null?"":values[0];updateAttribute(node,name,v)}function render$1(_ctx,name,value){var node=currentElement();if(!node)throw new Error("Not currently patching.");var ctx=new Context(null,_ctx);var isStaticValue=typeof value!=="function";var getValue=function getValue(){var val=isStaticValue?value:value(ctx);if(!_.isArray(val))val=[val];return val};var d=lookup$1(ctx,name);if(isStaticValue&&!d){setAttribute(node,name,getValue());return}var anim=undefined,comp=undefined;var cancel=false;var decctx=_.assign({target:node,context:ctx},d);var run=function run(c){decctx.comp=c;var val=getValue();if(!d){setAttribute(node,name,val);return}d.callback.apply(d.template,[decctx].concat(val))};if(d&&d.options&&d.options.defer){var pcomp=Trackr.currentComputation;if(!pcomp)throw new Error("Can only render decorator in a computation.");pcomp.onInvalidate(function(){cancel=true;if(anim)raf.cancel(anim);if(comp)comp.stop()});anim=raf(function(){if(cancel)return;anim=null;comp=Trackr.autorun(run)})}else{Trackr.autorun(run)}}var decorators$1=Object.freeze({plugin:plugin,"default":plugin,add:add,remove:remove,find:find,lookup:lookup$1,render:render$1});var value_types=["radio","option"];var selection_types=["text","search","tel","url","password"];var formBindings={};function plugin$2(options){this.use("decorators");options=options||{};this._formBindings={};this.twoway=this.addFormBinding=add$2;this.getFormBinding=get$1;this.removeFormBinding=remove$2;this.decorate("bind-to",bindTo.bind(this,options,false));this.decorate("lazybind-to",bindTo.bind(this,options,true));this.decorate("value",valueOf,{parse:"string"})}register("twoway",plugin$2);function add$2(id,getter,onChange){if(_.isObject(id)){_.each(id,function(v,k){add$2.call(this,k,v)},this);return this}if(typeof id!=="string")throw new Error("Expecting a string for the form binding ID.");var bindings=this._formBindings||formBindings;if(bindings[id]!=null)throw new Error("A form binding with id '"+id+"' already exists.");if(_.isObject(getter)&&onChange==null){onChange=getter.change;getter=getter.get}if(typeof getter!=="function")throw new Error("Expecting a function or object for the form binding getter.");if(typeof onChange!=="function")onChange=null;bindings[id]={get:getter,change:onChange};return this}function get$1(id){if(typeof id!=="string")return;if(this._formBindings&&this._formBindings[id]){return this._formBindings[id]}return formBindings[id]}function remove$2(id){if(this._formBindings){if(id==null)this._formBindings={};else delete this._formBindings[id]}else if(id){delete formBindings[id]}return this}var type_map={text:["text","color","email","password","search","tel","url","hidden"],number:["number","range"],date:["date","datetime","datetime-local","month","time","week"],file:["file"],checkbox:["checkbox"],radio:["radio"]};function getType(el){switch(el.tagName.toLowerCase()){case"input":for(var type in type_map){if(_.contains(type_map[type],el.type))return type}break;case"select":return"select";case"option":return"option";case"textarea":return"text"}}function getNodeValue(node,type){if(type==null)type=getType(node);var val;switch(type){case"number":val=node.valueAsNumber;break;case"text":val=node.value;break;case"checkbox":val=node.checked;break;case"date":val=node.valueAsDate;break;case"select":var opt=node.querySelector("option:checked");if(opt!=null)val=opt.$bound_value;break;case"file":val=!node.multiple?node.files[0]:_.toArray(node.files);break;case"radio":val=node.$bound_value;break}return val}function setLiveValue(live,el,fn){var active=document.activeElement===el;if(!live&&active)return;var sel=selection_types.indexOf(el.type)>-1;var pos=sel?[el.selectionStart,el.selectionEnd]:null;fn();if(sel&&active)el.setSelectionRange.apply(el,pos)}function setNodeValue(el,val,type,live){if(type==null)type=getType(el);switch(type){case"number":setLiveValue(live,el,function(){updateProperty(el,_.isNumber(val)?"valueAsNumber":"value",val)});break;case"text":setLiveValue(live,el,function(){updateProperty(el,"value",toString(val))});break;case"checkbox":updateProperty(el,"checked",Boolean(val));break;case"date":setLiveValue(live,el,function(){updateProperty(el,_.isDate(val)?"valueAsDate":"value",val)});break;case"select":_.toArray(el.querySelectorAll("option")).forEach(function(opt){updateProperty(opt,"selected",opt.$bound_value===val)});break;case"radio":updateProperty(el,"checked",el.$bound_value===val);break}}function bindTo(options,lazy,d,id){var fbind=this.getFormBinding(id);if(fbind==null)return;var el=d.target;var args=_.toArray(arguments).slice(4);var type=getType(el);var onChange=undefined;var twctx=_.pick(d,"context","template","target");if(typeof fbind.change==="function"){onChange=function onChange(e){fbind.change.apply(_.assign(twctx,{original:e}),[getNodeValue(el,type)].concat(args))};el.addEventListener("change",onChange);el.addEventListener("paste",onChange);if(!(options.lazy||lazy))el.addEventListener("keyup",onChange);d.comp.onInvalidate(function(){el.removeEventListener("change",onChange);el.removeEventListener("paste",onChange);el.removeEventListener("keyup",onChange)})}var nodeValueComp=undefined,stopped=false;d.comp.onInvalidate(function(){stopped=true;if(nodeValueComp)nodeValueComp.stop()});_.defer(function(){if(stopped)return;nodeValueComp=Trackr.autorun(function(){setNodeValue(el,fbind.get.apply(twctx,args),type,options.live)})})}function valueOf(d,val){var el=d.target,type=getType(el);if(!_.contains(value_types,type)){updateAttribute(el,"value",val);return}el.$bound_value=val;updateProperty(el,"value",val)}function plugin$3(){this.use("decorators");this.decorate("ref",decorator)}register("refs",plugin$3);var warned=[];function warnOnce(msg){if(_.contains(warned,msg))return;console.warn(msg);warned.push(msg)}function decorator(d,key){var ctx=d.owner;if(!ctx.refs)ctx.refs={};if(_.has(ctx.refs,key)){warnOnce("Multiple elements with reference '"+key+"'.");return}ctx.refs[key]=d.target;d.comp.onInvalidate(function(){delete ctx.refs[key]})}var decorators$2={};var actions={};var Action=function(){function Action(name,context){babelHelpers.classCallCheck(this,Action);this.name=name;this.context=context;this.bubbles=true}babelHelpers.createClass(Action,[{key:"stopPropagation",value:function stopPropagation(){this.bubbles=false;return this}}],[{key:"create",value:function create(name,context){var action=undefined;if(typeof name==="string"){action=new Action(name,context)}else if(_.isObject(name)&&!(name instanceof Action)){action=_.extend(new Action,action)}else{action=name}if(!(action instanceof Action)){throw new Error("Expecting action name, object or instance of Action.")}return action}}]);return Action}();function plugin$1(){this.use("decorators");this._actions={};this.actions=this.addAction=add$1;this.removeAction=remove$1;this.decorate(decorators$2)}register("actions",plugin$1);defineEvent(["load","scroll","click","dblclick","mousedown","mouseup","mouseenter","mouseleave","keydown","keypress","keyup","blur","focus","change","input","submit","reset","drag","dragdrop","dragend","dragenter","dragexit","dragleave","dragover","dragstart","drop"]);function defineEvent(event){if(_.isArray(event))return event.forEach(defineEvent);decorators$2["on-"+event]=function(decor,key){var node=undefined,args=undefined;var listener=function listener(e){var action=new Action(key,decor.context);action.original=e;action.target=action.node=node;action.owner=decor.owner;action.template=decor.template;fire(action,null,args)};node=decor.target;args=Array.prototype.slice.call(arguments,2);node.addEventListener(event,listener);decor.comp.onInvalidate(function(){node.removeEventListener(event,listener)})}}function add$1(name,fn){if((typeof name==="undefined"?"undefined":babelHelpers.typeof(name))==="object"&&fn==null){_.each(name,function(fn,n){add$1.call(this,n,fn)},this);return this}if(typeof name!=="string"||name==="")throw new Error("Expecting non-empty string for action name.");if(typeof fn!=="function")throw new Error("Expecting function for action.");var obj=this._actions;if(!obj)obj=actions;if(obj[name]==null)obj[name]=[];if(!~obj[name].indexOf(fn))obj[name].push(fn);return this}function remove$1(name,fn){if(typeof name==="function"&&fn==null){fn=name;name=null}var obj=this._actions;if(!obj)obj=actions;if(name==null&&fn==null){if(this._actions!=null)this._actions={}}else if(fn==null){delete obj[name]}else if(name==null){_.each(obj,function(d,n){obj[n]=d.filter(function(f){return f!==fn})})}else if(obj[name]!=null){obj[name]=_.without(obj[name],fn)}return this}function fire(a,b,args){var action=Action.create(a,b);if(!action.context){throw new Error("Action is missing a context.")}var ctx=action.context;var name=action.name;args=[].concat(action,args);function run(fn){if(!action.bubbles)return true;fn.apply(ctx,args)}while(action.bubbles&&ctx){if(ctx.template){var acts=ctx.template._actions;if(acts!=null&&Array.isArray(acts[name])){acts[name].some(run)}}ctx=ctx.parent}if(action.bubbles&&Array.isArray(actions[name])){actions[name].some(run)}return action}var actions$1=Object.freeze({Action:Action,plugin:plugin$1,"default":plugin$1,defineEvent:defineEvent,add:add$1,remove:remove$1,fire:fire});var parse$1=require("./m+xml").parse;var url="sourceMappingURL=data:application/json;charset=utf-8;base64,";function getSource(nodes,src,options){var source=new sourceMap.SourceNode(null,null,options.originalFilename,nodes);if(!options.sourceMap)return source.toString();if(src)source.setSourceContent(options.originalFilename,src);var result=source.toStringWithSourceMap();var map64=new Buffer(result.map.toString(),"utf-8").toString("base64");return result.code+"//# "+url+map64}function compile(tree,options){options=_.extend({originalFilename:"template.js"},options);var src=undefined;if(typeof tree==="string"){src=tree;tree=parse$1(src,options)}var nodes=_.invoke([].concat(tree),"compile",options);return getSource(nodes,src,options)}function exec(tpl,options){var r=compile(tpl,options);console.log(r);return new Function("Temple",r)(require("../"))}function Each(val,vars,ctx,fn,that){return map(val,function(item,key){var nctx=new Context(ctx);if(vars.length===1)nctx.set(vars[0],item);else if(vars.length==2){nctx.set(vars[0],key);nctx.set(vars[1],item)}return fn.call(that,nctx,key,val)})}function With(val,ctx,fn,that){var nctx=new Context(ctx);nctx.set(val);nctx.dataVar.set(val);return fn.call(that,nctx)}function Element$1(tagname,key,ctx,fn,that){var node=elementOpen(tagname,key);var nctx=new Context(null,ctx);var comp=autoelement(node,function(){return fn.call(that,nctx,node)});elementClose(tagname);return comp}var version="0.7.0-alpha.2";var parse=require("./m+xml").parse;var AST=require("./ast");exports.version=version;exports.parse=parse;exports.AST=AST;exports.Context=Context;exports.idom=idom;exports.utils=utils;exports.Trackr=Trackr;exports.Map=trackrObjects.Map;exports.List=trackrObjects.List;exports.Variable=trackrObjects.Variable;exports.plugins=plugins$1;exports.decorators=decorators$1;exports.actions=actions$1;exports.templates=templates;exports.types=types;exports.Template=Template;exports.helpers=helpers;exports.getHelper=getHelper;exports.render=render;exports.getByName=getByName;exports.paint=paint;exports.registerType=registerType;exports.create=create;exports.getSource=getSource;exports.compile=compile;exports.exec=exec;exports.Each=Each;exports.With=With;exports.Element=Element$1}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer)},{"../":3,"./ast":1,"./m+xml":2,_process:56,"assign-props":5,"backbone-extend-standalone":6,buffer:8,"dom-matches":11,events:12,lodash:20,"plain-merge":55,raf:57,"source-map":70,trackr:77,"trackr-objects":72}],4:[function(require,module,exports){var mutatorMethods=["pop","push","reverse","shift","sort","splice","unshift"];var patchArray=module.exports=function(arr){if(arr._patched)return arr;var patchedArrayProto=[],observers=[];mutatorMethods.forEach(function(methodName){Object.defineProperty(patchedArrayProto,methodName,{value:method});function method(){var spliceEquivalent,summary,args,res;args=Array.prototype.slice.call(arguments,0);spliceEquivalent=getSpliceEquivalent(this,methodName,args);summary=summariseSpliceOperation(this,spliceEquivalent);res=Array.prototype[methodName].apply(this,args);observers.forEach(function(fn){fn.call(this,summary)},this);return res}});if({}.__proto__)arr.__proto__=patchedArrayProto;else{mutatorMethods.forEach(function(methodName){Object.defineProperty(arr,methodName,{value:patchedArrayProto[methodName],configurable:true})})}var extras={_patched:true,observe:function(fn){if(typeof fn!=="function")throw new Error("Expecting function to observe with.");observers.push(fn);return this},stopObserving:function(fn){var index=observers.indexOf(fn);if(index>-1)observers.splice(index,1);return this}};for(var k in extras){Object.defineProperty(arr,k,{configurable:false,enumerable:false,value:extras[k],writeable:false})}return arr};var getSpliceEquivalent=patchArray.getSpliceEquivalent=function(array,methodName,args){switch(methodName){case"splice":return args;case"sort":case"reverse":return null;case"pop":if(array.length){return[-1]}return null;case"push":return[array.length,0].concat(args);case"shift":return[0,1];case"unshift":return[0,0].concat(args)}};var summariseSpliceOperation=patchArray.summariseSpliceOperation=function(array,args){var index,addedItems,removedItems;if(!args)return null;index=+(args[0]<0?array.length+args[0]:args[0]);addedItems=Math.max(0,args.length-2);removedItems=args[1]!==undefined?args[1]:array.length-index;removedItems=Math.min(removedItems,array.length-index);return{index:index,added:addedItems,removed:removedItems}}},{}],5:[function(require,module,exports){var hasOwn=Object.prototype.hasOwnProperty;var defaults={configurable:false,enumerable:true};function assignProps(obj,key,val,opts){var k;if(typeof key==="object"){for(k in key){if(hasOwn.call(key,k))assignProps(obj,k,key[k],val)}return}var desc={};opts=opts||{};for(k in defaults){desc[k]=typeof opts[k]==="boolean"?opts[k]:defaults[k]}if(!opts.forceStatic&&typeof val==="function"){desc.get=val}else{desc.value=val;desc.writable=false}Object.defineProperty(obj,key,desc)}module.exports=assignProps},{}],6:[function(require,module,exports){(function(definition){if(typeof exports==="object"){module.exports=definition()}else if(typeof define==="function"&&define.amd){define(definition)}else{window.BackboneExtend=definition()}})(function(){"use strict";var _={has:function(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)},extend:function(obj){for(var i=1;i<arguments.length;++i){var source=arguments[i];if(source){for(var prop in source){obj[prop]=source[prop]}}}return obj}};var extend=function(protoProps,staticProps){var parent=this;var child;if(protoProps&&_.has(protoProps,"constructor")){child=protoProps.constructor}else{child=function(){return parent.apply(this,arguments)}}_.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};Surrogate.prototype=parent.prototype;child.prototype=new Surrogate;if(protoProps)_.extend(child.prototype,protoProps);child.__super__=parent.prototype;return child};return extend})},{}],7:[function(require,module,exports){var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";(function(exports){"use strict";var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var PLUS="+".charCodeAt(0);var SLASH="/".charCodeAt(0);var NUMBER="0".charCodeAt(0);var LOWER="a".charCodeAt(0);var UPPER="A".charCodeAt(0);var PLUS_URL_SAFE="-".charCodeAt(0);var SLASH_URL_SAFE="_".charCodeAt(0);function decode(elt){var code=elt.charCodeAt(0);if(code===PLUS||code===PLUS_URL_SAFE)return 62;if(code===SLASH||code===SLASH_URL_SAFE)return 63;if(code<NUMBER)return-1;if(code<NUMBER+10)return code-NUMBER+26+26;if(code<UPPER+26)return code-UPPER;if(code<LOWER+26)return code-LOWER+26}function b64ToByteArray(b64){var i,j,l,tmp,placeHolders,arr;if(b64.length%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var len=b64.length;placeHolders="="===b64.charAt(len-2)?2:"="===b64.charAt(len-1)?1:0;arr=new Arr(b64.length*3/4-placeHolders);l=placeHolders>0?b64.length-4:b64.length;var L=0;function push(v){arr[L++]=v}for(i=0,j=0;i<l;i+=4,j+=3){tmp=decode(b64.charAt(i))<<18|decode(b64.charAt(i+1))<<12|decode(b64.charAt(i+2))<<6|decode(b64.charAt(i+3));push((tmp&16711680)>>16);push((tmp&65280)>>8);push(tmp&255)}if(placeHolders===2){tmp=decode(b64.charAt(i))<<2|decode(b64.charAt(i+1))>>4;push(tmp&255)}else if(placeHolders===1){tmp=decode(b64.charAt(i))<<10|decode(b64.charAt(i+1))<<4|decode(b64.charAt(i+2))>>2;push(tmp>>8&255);push(tmp&255)}return arr}function uint8ToBase64(uint8){var i,extraBytes=uint8.length%3,output="",temp,length;function encode(num){return lookup.charAt(num)}function tripletToBase64(num){return encode(num>>18&63)+encode(num>>12&63)+encode(num>>6&63)+encode(num&63)}for(i=0,length=uint8.length-extraBytes;i<length;i+=3){temp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2];output+=tripletToBase64(temp)}switch(extraBytes){case 1:temp=uint8[uint8.length-1];output+=encode(temp>>2);output+=encode(temp<<4&63);output+="==";break;case 2:temp=(uint8[uint8.length-2]<<8)+uint8[uint8.length-1];output+=encode(temp>>10);output+=encode(temp>>4&63);output+=encode(temp<<2&63);output+="=";break}return output}exports.toByteArray=b64ToByteArray;exports.fromByteArray=uint8ToBase64})(typeof exports==="undefined"?this.base64js={}:exports)},{}],8:[function(require,module,exports){(function(global){"use strict";var base64=require("base64-js");var ieee754=require("ieee754");var isArray=require("isarray");exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;Buffer.poolSize=8192;var rootParent={};Buffer.TYPED_ARRAY_SUPPORT=global.TYPED_ARRAY_SUPPORT!==undefined?global.TYPED_ARRAY_SUPPORT:typedArraySupport();function typedArraySupport(){function Bar(){}try{var arr=new Uint8Array(1);arr.foo=function(){return 42};arr.constructor=Bar;return arr.foo()===42&&arr.constructor===Bar&&typeof arr.subarray==="function"&&arr.subarray(1,1).byteLength===0}catch(e){return false}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Buffer(arg){if(!(this instanceof Buffer)){if(arguments.length>1)return new Buffer(arg,arguments[1]);return new Buffer(arg)}if(!Buffer.TYPED_ARRAY_SUPPORT){this.length=0;this.parent=undefined}if(typeof arg==="number"){return fromNumber(this,arg)}if(typeof arg==="string"){return fromString(this,arg,arguments.length>1?arguments[1]:"utf8")}return fromObject(this,arg)}function fromNumber(that,length){that=allocate(that,length<0?0:checked(length)|0);if(!Buffer.TYPED_ARRAY_SUPPORT){for(var i=0;i<length;i++){that[i]=0}}return that}function fromString(that,string,encoding){if(typeof encoding!=="string"||encoding==="")encoding="utf8";var length=byteLength(string,encoding)|0;that=allocate(that,length);that.write(string,encoding);return that}function fromObject(that,object){if(Buffer.isBuffer(object))return fromBuffer(that,object);if(isArray(object))return fromArray(that,object);if(object==null){throw new TypeError("must start with number, buffer, array or string")}if(typeof ArrayBuffer!=="undefined"){if(object.buffer instanceof ArrayBuffer){return fromTypedArray(that,object)}if(object instanceof ArrayBuffer){return fromArrayBuffer(that,object)}}if(object.length)return fromArrayLike(that,object);return fromJsonObject(that,object)}function fromBuffer(that,buffer){var length=checked(buffer.length)|0;that=allocate(that,length);buffer.copy(that,0,0,length);return that}function fromArray(that,array){var length=checked(array.length)|0;that=allocate(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255}return that}function fromTypedArray(that,array){var length=checked(array.length)|0;that=allocate(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255}return that}function fromArrayBuffer(that,array){if(Buffer.TYPED_ARRAY_SUPPORT){array.byteLength;that=Buffer._augment(new Uint8Array(array))}else{that=fromTypedArray(that,new Uint8Array(array))}return that}function fromArrayLike(that,array){var length=checked(array.length)|0;that=allocate(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255}return that}function fromJsonObject(that,object){var array;var length=0;if(object.type==="Buffer"&&isArray(object.data)){array=object.data;length=checked(array.length)|0}that=allocate(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255}return that}if(Buffer.TYPED_ARRAY_SUPPORT){Buffer.prototype.__proto__=Uint8Array.prototype;Buffer.__proto__=Uint8Array}else{Buffer.prototype.length=undefined;
Buffer.prototype.parent=undefined}function allocate(that,length){if(Buffer.TYPED_ARRAY_SUPPORT){that=Buffer._augment(new Uint8Array(length));that.__proto__=Buffer.prototype}else{that.length=length;that._isBuffer=true}var fromPool=length!==0&&length<=Buffer.poolSize>>>1;if(fromPool)that.parent=rootParent;return that}function checked(length){if(length>=kMaxLength()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+kMaxLength().toString(16)+" bytes")}return length|0}function SlowBuffer(subject,encoding){if(!(this instanceof SlowBuffer))return new SlowBuffer(subject,encoding);var buf=new Buffer(subject,encoding);delete buf.parent;return buf}Buffer.isBuffer=function isBuffer(b){return!!(b!=null&&b._isBuffer)};Buffer.compare=function compare(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)){throw new TypeError("Arguments must be Buffers")}if(a===b)return 0;var x=a.length;var y=b.length;var i=0;var len=Math.min(x,y);while(i<len){if(a[i]!==b[i])break;++i}if(i!==len){x=a[i];y=b[i]}if(x<y)return-1;if(y<x)return 1;return 0};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Buffer.concat=function concat(list,length){if(!isArray(list))throw new TypeError("list argument must be an Array of Buffers.");if(list.length===0){return new Buffer(0)}var i;if(length===undefined){length=0;for(i=0;i<list.length;i++){length+=list[i].length}}var buf=new Buffer(length);var pos=0;for(i=0;i<list.length;i++){var item=list[i];item.copy(buf,pos);pos+=item.length}return buf};function byteLength(string,encoding){if(typeof string!=="string")string=""+string;var len=string.length;if(len===0)return 0;var loweredCase=false;for(;;){switch(encoding){case"ascii":case"binary":case"raw":case"raws":return len;case"utf8":case"utf-8":return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return len*2;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase();loweredCase=true}}}Buffer.byteLength=byteLength;function slowToString(encoding,start,end){var loweredCase=false;start=start|0;end=end===undefined||end===Infinity?this.length:end|0;if(!encoding)encoding="utf8";if(start<0)start=0;if(end>this.length)end=this.length;if(end<=start)return"";while(true){switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"binary":return binarySlice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase();loweredCase=true}}}Buffer.prototype.toString=function toString(){var length=this.length|0;if(length===0)return"";if(arguments.length===0)return utf8Slice(this,0,length);return slowToString.apply(this,arguments)};Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return true;return Buffer.compare(this,b)===0};Buffer.prototype.inspect=function inspect(){var str="";var max=exports.INSPECT_MAX_BYTES;if(this.length>0){str=this.toString("hex",0,max).match(/.{2}/g).join(" ");if(this.length>max)str+=" ... "}return"<Buffer "+str+">"};Buffer.prototype.compare=function compare(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return 0;return Buffer.compare(this,b)};Buffer.prototype.indexOf=function indexOf(val,byteOffset){if(byteOffset>2147483647)byteOffset=2147483647;else if(byteOffset<-2147483648)byteOffset=-2147483648;byteOffset>>=0;if(this.length===0)return-1;if(byteOffset>=this.length)return-1;if(byteOffset<0)byteOffset=Math.max(this.length+byteOffset,0);if(typeof val==="string"){if(val.length===0)return-1;return String.prototype.indexOf.call(this,val,byteOffset)}if(Buffer.isBuffer(val)){return arrayIndexOf(this,val,byteOffset)}if(typeof val==="number"){if(Buffer.TYPED_ARRAY_SUPPORT&&Uint8Array.prototype.indexOf==="function"){return Uint8Array.prototype.indexOf.call(this,val,byteOffset)}return arrayIndexOf(this,[val],byteOffset)}function arrayIndexOf(arr,val,byteOffset){var foundIndex=-1;for(var i=0;byteOffset+i<arr.length;i++){if(arr[byteOffset+i]===val[foundIndex===-1?0:i-foundIndex]){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===val.length)return byteOffset+foundIndex}else{foundIndex=-1}}return-1}throw new TypeError("val must be string, number or Buffer")};Buffer.prototype.get=function get(offset){console.log(".get() is deprecated. Access using array indexes instead.");return this.readUInt8(offset)};Buffer.prototype.set=function set(v,offset){console.log(".set() is deprecated. Access using array indexes instead.");return this.writeUInt8(v,offset)};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}var strLen=string.length;if(strLen%2!==0)throw new Error("Invalid hex string");if(length>strLen/2){length=strLen/2}for(var i=0;i<length;i++){var parsed=parseInt(string.substr(i*2,2),16);if(isNaN(parsed))throw new Error("Invalid hex string");buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function binaryWrite(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}Buffer.prototype.write=function write(string,offset,length,encoding){if(offset===undefined){encoding="utf8";length=this.length;offset=0}else if(length===undefined&&typeof offset==="string"){encoding=offset;length=this.length;offset=0}else if(isFinite(offset)){offset=offset|0;if(isFinite(length)){length=length|0;if(encoding===undefined)encoding="utf8"}else{encoding=length;length=undefined}}else{var swap=encoding;encoding=offset;offset=length|0;length=swap}var remaining=this.length-offset;if(length===undefined||length>remaining)length=remaining;if(string.length>0&&(length<0||offset<0)||offset>this.length){throw new RangeError("attempt to write outside buffer bounds")}if(!encoding)encoding="utf8";var loweredCase=false;for(;;){switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"binary":return binaryWrite(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase();loweredCase=true}}};Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf)}else{return base64.fromByteArray(buf.slice(start,end))}}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);var res=[];var i=start;while(i<end){var firstByte=buf[i];var codePoint=null;var bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:if(firstByte<128){codePoint=firstByte}break;case 2:secondByte=buf[i+1];if((secondByte&192)===128){tempCodePoint=(firstByte&31)<<6|secondByte&63;if(tempCodePoint>127){codePoint=tempCodePoint}}break;case 3:secondByte=buf[i+1];thirdByte=buf[i+2];if((secondByte&192)===128&&(thirdByte&192)===128){tempCodePoint=(firstByte&15)<<12|(secondByte&63)<<6|thirdByte&63;if(tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)){codePoint=tempCodePoint}}break;case 4:secondByte=buf[i+1];thirdByte=buf[i+2];fourthByte=buf[i+3];if((secondByte&192)===128&&(thirdByte&192)===128&&(fourthByte&192)===128){tempCodePoint=(firstByte&15)<<18|(secondByte&63)<<12|(thirdByte&63)<<6|fourthByte&63;if(tempCodePoint>65535&&tempCodePoint<1114112){codePoint=tempCodePoint}}}}if(codePoint===null){codePoint=65533;bytesPerSequence=1}else if(codePoint>65535){codePoint-=65536;res.push(codePoint>>>10&1023|55296);codePoint=56320|codePoint&1023}res.push(codePoint);i+=bytesPerSequence}return decodeCodePointsArray(res)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH){return String.fromCharCode.apply(String,codePoints)}var res="";var i=0;while(i<len){res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH))}return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;i++){ret+=String.fromCharCode(buf[i]&127)}return ret}function binarySlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;i++){ret+=String.fromCharCode(buf[i])}return ret}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;i++){out+=toHex(buf[i])}return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res="";for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}return res}Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0}else if(start>len){start=len}if(end<0){end+=len;if(end<0)end=0}else if(end>len){end=len}if(end<start)end=start;var newBuf;if(Buffer.TYPED_ARRAY_SUPPORT){newBuf=Buffer._augment(this.subarray(start,end))}else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,undefined);for(var i=0;i<sliceLen;i++){newBuf[i]=this[i+start]}}if(newBuf.length)newBuf.parent=this.parent||this;return newBuf};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}return val};Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert){checkOffset(offset,byteLength,this.length)}var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=256)){val+=this[offset+--byteLength]*mul}return val};Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8};Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1]};Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216};Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=256)){val+=this[offset+--i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readInt8=function readInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&128))return this[offset];return(255-this[offset]+1)*-1};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4)};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4)};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8)};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8)};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError("buffer must be a Buffer instance");if(value>max||value<min)throw new RangeError("value is out of bounds");if(offset+ext>buf.length)throw new RangeError("index out of range")}Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var mul=1;var i=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var i=byteLength-1;var mul=1;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,255,0);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);this[offset]=value&255;return offset+1};function objectWriteUInt16(buf,value,offset,littleEndian){if(value<0)value=65535+value+1;for(var i=0,j=Math.min(buf.length-offset,2);i<j;i++){buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>(littleEndian?i:1-i)*8}}Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8}else{objectWriteUInt16(this,value,offset,true)}return offset+2};Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&255}else{objectWriteUInt16(this,value,offset,false)}return offset+2};function objectWriteUInt32(buf,value,offset,littleEndian){if(value<0)value=4294967295+value+1;for(var i=0,j=Math.min(buf.length-offset,4);i<j;i++){buf[offset+i]=value>>>(littleEndian?i:3-i)*8&255}}Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value&255}else{objectWriteUInt32(this,value,offset,true)}return offset+4};Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255}else{objectWriteUInt32(this,value,offset,false)}return offset+4};Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0;var mul=1;var sub=value<0?1:0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1;var mul=1;var sub=value<0?1:0;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,127,-128);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);if(value<0)value=255+value+1;this[offset]=value&255;return offset+1};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8}else{objectWriteUInt16(this,value,offset,true)}return offset+2};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&255}else{objectWriteUInt16(this,value,offset,false)}return offset+2};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24}else{objectWriteUInt32(this,value,offset,true)}return offset+4};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(value<0)value=4294967295+value+1;if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255}else{objectWriteUInt32(this,value,offset,false)}return offset+4};function checkIEEE754(buf,value,offset,ext,max,min){if(value>max||value<min)throw new RangeError("value is out of bounds");if(offset+ext>buf.length)throw new RangeError("index out of range");if(offset<0)throw new RangeError("index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,4,3.4028234663852886e38,-3.4028234663852886e38)}ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)};function writeDouble(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,8,1.7976931348623157e308,-1.7976931348623157e308)}ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!start)start=0;if(!end&&end!==0)end=this.length;if(targetStart>=target.length)targetStart=target.length;if(!targetStart)targetStart=0;if(end>0&&end<start)end=start;if(end===start)return 0;if(target.length===0||this.length===0)return 0;if(targetStart<0){throw new RangeError("targetStart out of bounds")}if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-targetStart<end-start){end=target.length-targetStart+start}var len=end-start;var i;if(this===target&&start<targetStart&&targetStart<end){for(i=len-1;i>=0;i--){target[i+targetStart]=this[i+start]}}else if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT){for(i=0;i<len;i++){target[i+targetStart]=this[i+start]}}else{target._set(this.subarray(start,start+len),targetStart)}return len};Buffer.prototype.fill=function fill(value,start,end){if(!value)value=0;if(!start)start=0;if(!end)end=this.length;if(end<start)throw new RangeError("end < start");if(end===start)return;if(this.length===0)return;if(start<0||start>=this.length)throw new RangeError("start out of bounds");if(end<0||end>this.length)throw new RangeError("end out of bounds");var i;if(typeof value==="number"){for(i=start;i<end;i++){this[i]=value}}else{var bytes=utf8ToBytes(value.toString());var len=bytes.length;for(i=start;i<end;i++){this[i]=bytes[i%len]}}return this};Buffer.prototype.toArrayBuffer=function toArrayBuffer(){if(typeof Uint8Array!=="undefined"){if(Buffer.TYPED_ARRAY_SUPPORT){return new Buffer(this).buffer}else{var buf=new Uint8Array(this.length);for(var i=0,len=buf.length;i<len;i+=1){buf[i]=this[i]}return buf.buffer}}else{throw new TypeError("Buffer.toArrayBuffer not supported in this browser")}};var BP=Buffer.prototype;Buffer._augment=function _augment(arr){arr.constructor=Buffer;arr._isBuffer=true;arr._set=arr.set;arr.get=BP.get;arr.set=BP.set;arr.write=BP.write;arr.toString=BP.toString;arr.toLocaleString=BP.toString;arr.toJSON=BP.toJSON;arr.equals=BP.equals;arr.compare=BP.compare;arr.indexOf=BP.indexOf;arr.copy=BP.copy;arr.slice=BP.slice;arr.readUIntLE=BP.readUIntLE;arr.readUIntBE=BP.readUIntBE;arr.readUInt8=BP.readUInt8;arr.readUInt16LE=BP.readUInt16LE;arr.readUInt16BE=BP.readUInt16BE;arr.readUInt32LE=BP.readUInt32LE;arr.readUInt32BE=BP.readUInt32BE;arr.readIntLE=BP.readIntLE;arr.readIntBE=BP.readIntBE;arr.readInt8=BP.readInt8;arr.readInt16LE=BP.readInt16LE;arr.readInt16BE=BP.readInt16BE;arr.readInt32LE=BP.readInt32LE;arr.readInt32BE=BP.readInt32BE;arr.readFloatLE=BP.readFloatLE;arr.readFloatBE=BP.readFloatBE;arr.readDoubleLE=BP.readDoubleLE;arr.readDoubleBE=BP.readDoubleBE;arr.writeUInt8=BP.writeUInt8;arr.writeUIntLE=BP.writeUIntLE;arr.writeUIntBE=BP.writeUIntBE;arr.writeUInt16LE=BP.writeUInt16LE;arr.writeUInt16BE=BP.writeUInt16BE;arr.writeUInt32LE=BP.writeUInt32LE;arr.writeUInt32BE=BP.writeUInt32BE;arr.writeIntLE=BP.writeIntLE;arr.writeIntBE=BP.writeIntBE;arr.writeInt8=BP.writeInt8;arr.writeInt16LE=BP.writeInt16LE;arr.writeInt16BE=BP.writeInt16BE;arr.writeInt32LE=BP.writeInt32LE;arr.writeInt32BE=BP.writeInt32BE;arr.writeFloatLE=BP.writeFloatLE;arr.writeFloatBE=BP.writeFloatBE;arr.writeDoubleLE=BP.writeDoubleLE;arr.writeDoubleBE=BP.writeDoubleBE;arr.fill=BP.fill;arr.inspect=BP.inspect;arr.toArrayBuffer=BP.toArrayBuffer;return arr};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(str){str=stringtrim(str).replace(INVALID_BASE64_RE,"");if(str.length<2)return"";while(str.length%4!==0){str=str+"="}return str}function stringtrim(str){if(str.trim)return str.trim();return str.replace(/^\s+|\s+$/g,"")}function toHex(n){if(n<16)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];for(var i=0;i<length;i++){codePoint=string.charCodeAt(i);if(codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){if((units-=3)>-1)bytes.push(239,191,189);continue}else if(i+1===length){if((units-=3)>-1)bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else if(leadSurrogate){if((units-=3)>-1)bytes.push(239,191,189)}leadSurrogate=null;if(codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<1114112){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else{throw new Error("Invalid code point")}}return bytes}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;i++){byteArray.push(str.charCodeAt(i)&255)}return byteArray}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;i++){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;i++){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i]}return i}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"base64-js":7,ieee754:14,isarray:9}],9:[function(require,module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return toString.call(arr)=="[object Array]"}},{}],10:[function(require,module,exports){"use strict";var repeating=require("repeating");var INDENT_RE=/^(?:( )+|\t+)/;function getMostUsed(indents){var result=0;var maxUsed=0;var maxWeight=0;for(var n in indents){var indent=indents[n];var u=indent[0];var w=indent[1];if(u>maxUsed||u===maxUsed&&w>maxWeight){maxUsed=u;maxWeight=w;result=Number(n)}}return result}module.exports=function(str){if(typeof str!=="string"){throw new TypeError("Expected a string")}var tabs=0;var spaces=0;var prev=0;var indents={};var current;var isIndent;str.split(/\n/g).forEach(function(line){if(!line){return}var indent;var matches=line.match(INDENT_RE);if(!matches){indent=0}else{indent=matches[0].length;if(matches[1]){spaces++}else{tabs++}}var diff=indent-prev;prev=indent;if(diff){isIndent=diff>0;current=indents[isIndent?diff:-diff];if(current){current[0]++}else{current=indents[diff]=[1,0]}}else if(current){current[1]+=Number(isIndent)}});var amount=getMostUsed(indents);var type;var actual;if(!amount){type=null;actual=""}else if(spaces>=tabs){type="space";actual=repeating(" ",amount)}else{type="tab";actual=repeating("	",amount)}return{amount:amount,type:type,indent:actual}}},{repeating:58}],11:[function(require,module,exports){"use strict";function matches(elem,selector){var proto=window.Element.prototype;var nativeMatches=proto.matches||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector||proto.webkitMatchesSelector;if(!elem||elem.nodeType!==1){return false}var parentElem=elem.parentNode;if(nativeMatches){return nativeMatches.call(elem,selector)}var nodes=parentElem.querySelectorAll(selector);var len=nodes.length;for(var i=0;i<len;i++){if(nodes[i]===elem){return true}}return false}module.exports=matches},{}],12:[function(require,module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}throw TypeError('Uncaught, unspecified "error" event.')}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1);handler.apply(this,args)}}else if(isObject(handler)){args=Array.prototype.slice.call(arguments,1);listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-- >0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;
this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else if(listeners){while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;else if(evlistener)return evlistener.length}return 0};EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},{}],13:[function(require,module,exports){"use strict";var hasOwnProp=Object.prototype.hasOwnProperty;module.exports=function(obj,prop){return hasOwnProp.call(obj,prop)}},{}],14:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128}},{}],15:[function(require,module,exports){"use strict";var numberIsNan=require("number-is-nan");module.exports=Number.isFinite||function(val){return!(typeof val!=="number"||numberIsNan(val)||val===Infinity||val===-Infinity)}},{"number-is-nan":53}],16:[function(require,module,exports){"use strict";var isObject=require("isobject");function isObjectObject(o){return isObject(o)===true&&Object.prototype.toString.call(o)==="[object Object]"}module.exports=function isPlainObject(o){var ctor,prot;if(isObjectObject(o)===false)return false;ctor=o.constructor;if(typeof ctor!=="function")return false;prot=ctor.prototype;if(isObjectObject(prot)===false)return false;if(prot.hasOwnProperty("isPrototypeOf")===false){return false}return true}},{isobject:17}],17:[function(require,module,exports){"use strict";module.exports=function isObject(val){return val!=null&&typeof val==="object"&&!Array.isArray(val)}},{}],18:[function(require,module,exports){(function(root){"use strict";var COMPOUND="Compound",IDENTIFIER="Identifier",MEMBER_EXP="MemberExpression",LITERAL="Literal",THIS_EXP="ThisExpression",CALL_EXP="CallExpression",UNARY_EXP="UnaryExpression",BINARY_EXP="BinaryExpression",LOGICAL_EXP="LogicalExpression",CONDITIONAL_EXP="ConditionalExpression",ARRAY_EXP="ArrayExpression",PERIOD_CODE=46,COMMA_CODE=44,SQUOTE_CODE=39,DQUOTE_CODE=34,OPAREN_CODE=40,CPAREN_CODE=41,OBRACK_CODE=91,CBRACK_CODE=93,QUMARK_CODE=63,SEMCOL_CODE=59,COLON_CODE=58,throwError=function(message,index){var error=new Error(message+" at character "+index);error.index=index;error.description=message;throw error},t=true,unary_ops={"-":t,"!":t,"~":t,"+":t},binary_ops={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},getMaxKeyLen=function(obj){var max_len=0,len;for(var key in obj){if((len=key.length)>max_len&&obj.hasOwnProperty(key)){max_len=len}}return max_len},max_unop_len=getMaxKeyLen(unary_ops),max_binop_len=getMaxKeyLen(binary_ops),literals={"true":true,"false":false,"null":null},this_str="this",binaryPrecedence=function(op_val){return binary_ops[op_val]||0},createBinaryExpression=function(operator,left,right){var type=operator==="||"||operator==="&&"?LOGICAL_EXP:BINARY_EXP;return{type:type,operator:operator,left:left,right:right}},isDecimalDigit=function(ch){return ch>=48&&ch<=57},isIdentifierStart=function(ch){return ch===36||ch===95||ch>=65&&ch<=90||ch>=97&&ch<=122},isIdentifierPart=function(ch){return ch===36||ch===95||ch>=65&&ch<=90||ch>=97&&ch<=122||ch>=48&&ch<=57},jsep=function(expr){var index=0,charAtFunc=expr.charAt,charCodeAtFunc=expr.charCodeAt,exprI=function(i){return charAtFunc.call(expr,i)},exprICode=function(i){return charCodeAtFunc.call(expr,i)},length=expr.length,gobbleSpaces=function(){var ch=exprICode(index);while(ch===32||ch===9){ch=exprICode(++index)}},gobbleExpression=function(){var test=gobbleBinaryExpression(),consequent,alternate;gobbleSpaces();if(exprICode(index)===QUMARK_CODE){index++;consequent=gobbleExpression();if(!consequent){throwError("Expected expression",index)}gobbleSpaces();if(exprICode(index)===COLON_CODE){index++;alternate=gobbleExpression();if(!alternate){throwError("Expected expression",index)}return{type:CONDITIONAL_EXP,test:test,consequent:consequent,alternate:alternate}}else{throwError("Expected :",index)}}else{return test}},gobbleBinaryOp=function(){gobbleSpaces();var biop,to_check=expr.substr(index,max_binop_len),tc_len=to_check.length;while(tc_len>0){if(binary_ops.hasOwnProperty(to_check)){index+=tc_len;return to_check}to_check=to_check.substr(0,--tc_len)}return false},gobbleBinaryExpression=function(){var ch_i,node,biop,prec,stack,biop_info,left,right,i;left=gobbleToken();biop=gobbleBinaryOp();if(!biop){return left}biop_info={value:biop,prec:binaryPrecedence(biop)};right=gobbleToken();if(!right){throwError("Expected expression after "+biop,index)}stack=[left,biop_info,right];while(biop=gobbleBinaryOp()){prec=binaryPrecedence(biop);if(prec===0){break}biop_info={value:biop,prec:prec};while(stack.length>2&&prec<=stack[stack.length-2].prec){right=stack.pop();biop=stack.pop().value;left=stack.pop();node=createBinaryExpression(biop,left,right);stack.push(node)}node=gobbleToken();if(!node){throwError("Expected expression after "+biop,index)}stack.push(biop_info,node)}i=stack.length-1;node=stack[i];while(i>1){node=createBinaryExpression(stack[i-1].value,stack[i-2],node);i-=2}return node},gobbleToken=function(){var ch,to_check,tc_len;gobbleSpaces();ch=exprICode(index);if(isDecimalDigit(ch)||ch===PERIOD_CODE){return gobbleNumericLiteral()}else if(ch===SQUOTE_CODE||ch===DQUOTE_CODE){return gobbleStringLiteral()}else if(isIdentifierStart(ch)||ch===OPAREN_CODE){return gobbleVariable()}else if(ch===OBRACK_CODE){return gobbleArray()}else{to_check=expr.substr(index,max_unop_len);tc_len=to_check.length;while(tc_len>0){if(unary_ops.hasOwnProperty(to_check)){index+=tc_len;return{type:UNARY_EXP,operator:to_check,argument:gobbleToken(),prefix:true}}to_check=to_check.substr(0,--tc_len)}return false}},gobbleNumericLiteral=function(){var number="",ch,chCode;while(isDecimalDigit(exprICode(index))){number+=exprI(index++)}if(exprICode(index)===PERIOD_CODE){number+=exprI(index++);while(isDecimalDigit(exprICode(index))){number+=exprI(index++)}}ch=exprI(index);if(ch==="e"||ch==="E"){number+=exprI(index++);ch=exprI(index);if(ch==="+"||ch==="-"){number+=exprI(index++)}while(isDecimalDigit(exprICode(index))){number+=exprI(index++)}if(!isDecimalDigit(exprICode(index-1))){throwError("Expected exponent ("+number+exprI(index)+")",index)}}chCode=exprICode(index);if(isIdentifierStart(chCode)){throwError("Variable names cannot start with a number ("+number+exprI(index)+")",index)}else if(chCode===PERIOD_CODE){throwError("Unexpected period",index)}return{type:LITERAL,value:parseFloat(number),raw:number}},gobbleStringLiteral=function(){var str="",quote=exprI(index++),closed=false,ch;while(index<length){ch=exprI(index++);if(ch===quote){closed=true;break}else if(ch==="\\"){ch=exprI(index++);switch(ch){case"n":str+="\n";break;case"r":str+="\r";break;case"t":str+="	";break;case"b":str+="\b";break;case"f":str+="\f";break;case"v":str+="\x0B";break}}else{str+=ch}}if(!closed){throwError('Unclosed quote after "'+str+'"',index)}return{type:LITERAL,value:str,raw:quote+str+quote}},gobbleIdentifier=function(){var ch=exprICode(index),start=index,identifier;if(isIdentifierStart(ch)){index++}else{throwError("Unexpected "+exprI(index),index)}while(index<length){ch=exprICode(index);if(isIdentifierPart(ch)){index++}else{break}}identifier=expr.slice(start,index);if(literals.hasOwnProperty(identifier)){return{type:LITERAL,value:literals[identifier],raw:identifier}}else if(identifier===this_str){return{type:THIS_EXP}}else{return{type:IDENTIFIER,name:identifier}}},gobbleArguments=function(termination){var ch_i,args=[],node;while(index<length){gobbleSpaces();ch_i=exprICode(index);if(ch_i===termination){index++;break}else if(ch_i===COMMA_CODE){index++}else{node=gobbleExpression();if(!node||node.type===COMPOUND){throwError("Expected comma",index)}args.push(node)}}return args},gobbleVariable=function(){var ch_i,node;ch_i=exprICode(index);if(ch_i===OPAREN_CODE){node=gobbleGroup()}else{node=gobbleIdentifier()}gobbleSpaces();ch_i=exprICode(index);while(ch_i===PERIOD_CODE||ch_i===OBRACK_CODE||ch_i===OPAREN_CODE){index++;if(ch_i===PERIOD_CODE){gobbleSpaces();node={type:MEMBER_EXP,computed:false,object:node,property:gobbleIdentifier()}}else if(ch_i===OBRACK_CODE){node={type:MEMBER_EXP,computed:true,object:node,property:gobbleExpression()};gobbleSpaces();ch_i=exprICode(index);if(ch_i!==CBRACK_CODE){throwError("Unclosed [",index)}index++}else if(ch_i===OPAREN_CODE){node={type:CALL_EXP,arguments:gobbleArguments(CPAREN_CODE),callee:node}}gobbleSpaces();ch_i=exprICode(index)}return node},gobbleGroup=function(){index++;var node=gobbleExpression();gobbleSpaces();if(exprICode(index)===CPAREN_CODE){index++;return node}else{throwError("Unclosed (",index)}},gobbleArray=function(){index++;return{type:ARRAY_EXP,elements:gobbleArguments(CBRACK_CODE)}},nodes=[],ch_i,node;while(index<length){ch_i=exprICode(index);if(ch_i===SEMCOL_CODE||ch_i===COMMA_CODE){index++}else{if(node=gobbleExpression()){nodes.push(node)}else if(index<length){throwError('Unexpected "'+exprI(index)+'"',index)}}}if(nodes.length===1){return nodes[0]}else{return{type:COMPOUND,body:nodes}}};jsep.version="0.3.0";jsep.toString=function(){return"JavaScript Expression Parser (JSEP) v"+jsep.version};jsep.addUnaryOp=function(op_name){unary_ops[op_name]=t;return this};jsep.addBinaryOp=function(op_name,precedence){max_binop_len=Math.max(op_name.length,max_binop_len);binary_ops[op_name]=precedence;return this};jsep.removeUnaryOp=function(op_name){delete unary_ops[op_name];if(op_name.length===max_unop_len){max_unop_len=getMaxKeyLen(unary_ops)}return this};jsep.removeBinaryOp=function(op_name){delete binary_ops[op_name];if(op_name.length===max_binop_len){max_binop_len=getMaxKeyLen(binary_ops)}return this};if(typeof exports==="undefined"){var old_jsep=root.jsep;root.jsep=jsep;jsep.noConflict=function(){if(root.jsep===jsep){root.jsep=old_jsep}return jsep}}else{if(typeof module!=="undefined"&&module.exports){exports=module.exports=jsep}else{exports.parse=jsep}}})(this)},{}],19:[function(require,module,exports){var FUNC_ERROR_TEXT="Expected a function";var nativeMax=Math.max;function restParam(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=nativeMax(start===undefined?func.length-1:+start||0,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);while(++index<length){rest[index]=args[start+index]}switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);index=-1;while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=rest;return func.apply(this,otherArgs)}}module.exports=restParam},{}],20:[function(require,module,exports){(function(global){(function(){var undefined;var VERSION="3.10.1";var BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_BOUND_FLAG=4,CURRY_FLAG=8,CURRY_RIGHT_FLAG=16,PARTIAL_FLAG=32,PARTIAL_RIGHT_FLAG=64,ARY_FLAG=128,REARG_FLAG=256;var DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...";var HOT_COUNT=150,HOT_SPAN=16;var LARGE_ARRAY_SIZE=200;var LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2;var FUNC_ERROR_TEXT="Expected a function";var PLACEHOLDER="__lodash_placeholder__";var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEscapedHtml=/&(?:amp|lt|gt|quot|#39|#96);/g,reUnescapedHtml=/[&<>"'`]/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source);var reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g;var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g;var reRegExpChars=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,reHasRegExpChars=RegExp(reRegExpChars.source);var reComboMark=/[\u0300-\u036f\ufe20-\ufe23]/g;var reEscapeChar=/\\(\\)?/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reHasHexPrefix=/^0[xX]/;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^\d+$/;var reLatin1=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g;var reNoMatch=/($^)/;var reUnescapedString=/['\n\r\u2028\u2029\\]/g;var reWords=function(){var upper="[A-Z\\xc0-\\xd6\\xd8-\\xde]",lower="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(upper+"+(?="+upper+lower+")|"+upper+"?"+lower+"|"+upper+"+|[0-9]+","g")}();var contextProps=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"];var templateCounter=-1;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[stringTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[mapTag]=cloneableTags[setTag]=cloneableTags[weakMapTag]=false;var deburredLetters={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"};var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};var htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"};var objectTypes={"function":true,object:true};var regexpEscapes={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"};var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module;var freeGlobal=freeExports&&freeModule&&typeof global=="object"&&global&&global.Object&&global;var freeSelf=objectTypes[typeof self]&&self&&self.Object&&self;var freeWindow=objectTypes[typeof window]&&window&&window.Object&&window;var moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports;var root=freeGlobal||freeWindow!==(this&&this.window)&&freeWindow||freeSelf||this;function baseCompareAscending(value,other){if(value!==other){var valIsNull=value===null,valIsUndef=value===undefined,valIsReflexive=value===value;var othIsNull=other===null,othIsUndef=other===undefined,othIsReflexive=other===other;if(value>other&&!othIsNull||!valIsReflexive||valIsNull&&!othIsUndef&&othIsReflexive||valIsUndef&&othIsReflexive){return 1}if(value<other&&!valIsNull||!othIsReflexive||othIsNull&&!valIsUndef&&valIsReflexive||othIsUndef&&valIsReflexive){return-1}}return 0}function baseFindIndex(array,predicate,fromRight){var length=array.length,index=fromRight?length:-1;while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index}}return-1}function baseIndexOf(array,value,fromIndex){if(value!==value){return indexOfNaN(array,fromIndex)}var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index}}return-1}function baseIsFunction(value){return typeof value=="function"||false}function baseToString(value){return value==null?"":value+""}function charsLeftIndex(string,chars){var index=-1,length=string.length;while(++index<length&&chars.indexOf(string.charAt(index))>-1){}return index}function charsRightIndex(string,chars){var index=string.length;while(index--&&chars.indexOf(string.charAt(index))>-1){}return index}function compareAscending(object,other){return baseCompareAscending(object.criteria,other.criteria)||object.index-other.index}function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index<length){var result=baseCompareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength){return result}var order=orders[index];return result*(order==="asc"||order===true?1:-1)}}return object.index-other.index}function deburrLetter(letter){return deburredLetters[letter]}function escapeHtmlChar(chr){return htmlEscapes[chr]}function escapeRegExpChar(chr,leadingChar,whitespaceChar){if(leadingChar){chr=regexpEscapes[chr]}else if(whitespaceChar){chr=stringEscapes[chr]}return"\\"+chr}function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function indexOfNaN(array,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?0:-1);while(fromRight?index--:++index<length){var other=array[index];if(other!==other){return index}}return-1}function isObjectLike(value){return!!value&&typeof value=="object"}function isSpace(charCode){return charCode<=160&&(charCode>=9&&charCode<=13)||charCode==32||charCode==160||charCode==5760||charCode==6158||charCode>=8192&&(charCode<=8202||charCode==8232||charCode==8233||charCode==8239||charCode==8287||charCode==12288||charCode==65279)}function replaceHolders(array,placeholder){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){if(array[index]===placeholder){array[index]=PLACEHOLDER;result[++resIndex]=index}}return result}function sortedUniq(array,iteratee){var seen,index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(!index||seen!==computed){seen=computed;result[++resIndex]=value}}return result}function trimmedLeftIndex(string){var index=-1,length=string.length;while(++index<length&&isSpace(string.charCodeAt(index))){}return index}function trimmedRightIndex(string){var index=string.length;while(index--&&isSpace(string.charCodeAt(index))){}return index}function unescapeHtmlChar(chr){return htmlUnescapes[chr]}function runInContext(context){context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayProto=Array.prototype,objectProto=Object.prototype,stringProto=String.prototype;var fnToString=Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var idCounter=0;var objToString=objectProto.toString;var oldDash=root._;var reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ArrayBuffer=context.ArrayBuffer,clearTimeout=context.clearTimeout,parseFloat=context.parseFloat,pow=Math.pow,propertyIsEnumerable=objectProto.propertyIsEnumerable,Set=getNative(context,"Set"),setTimeout=context.setTimeout,splice=arrayProto.splice,Uint8Array=context.Uint8Array,WeakMap=getNative(context,"WeakMap");var nativeCeil=Math.ceil,nativeCreate=getNative(Object,"create"),nativeFloor=Math.floor,nativeIsArray=getNative(Array,"isArray"),nativeIsFinite=context.isFinite,nativeKeys=getNative(Object,"keys"),nativeMax=Math.max,nativeMin=Math.min,nativeNow=getNative(Date,"now"),nativeParseInt=context.parseInt,nativeRandom=Math.random;var NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,POSITIVE_INFINITY=Number.POSITIVE_INFINITY;var MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1;var MAX_SAFE_INTEGER=9007199254740991;var metaMap=WeakMap&&new WeakMap;var realNames={};function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper){return value}if(hasOwnProperty.call(value,"__chain__")&&hasOwnProperty.call(value,"__wrapped__")){return wrapperClone(value)}}return new LodashWrapper(value)}function baseLodash(){}function LodashWrapper(value,chainAll,actions){this.__wrapped__=value;this.__actions__=actions||[];this.__chain__=!!chainAll}var support=lodash.support={};lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}};function LazyWrapper(value){this.__wrapped__=value;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=POSITIVE_INFINITY;this.__views__=[]}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);result.__actions__=arrayCopy(this.__actions__);result.__dir__=this.__dir__;result.__filtered__=this.__filtered__;result.__iteratees__=arrayCopy(this.__iteratees__);result.__takeCount__=this.__takeCount__;result.__views__=arrayCopy(this.__views__);return result}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1;result.__filtered__=true}else{result=this.clone();result.__dir__*=-1}return result}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||arrLength<LARGE_ARRAY_SIZE||arrLength==length&&takeCount==length){return baseWrapperValue(isRight&&isArr?array.reverse():array,this.__actions__)}var result=[];outer:while(length--&&resIndex<takeCount){index+=dir;var iterIndex=-1,value=array[index];while(++iterIndex<iterLength){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type==LAZY_MAP_FLAG){value=computed}else if(!computed){if(type==LAZY_FILTER_FLAG){continue outer}else{break outer}}}result[resIndex++]=value}return result}function MapCache(){this.__data__={}}function mapDelete(key){return this.has(key)&&delete this.__data__[key]}function mapGet(key){return key=="__proto__"?undefined:this.__data__[key]}function mapHas(key){return key!="__proto__"&&hasOwnProperty.call(this.__data__,key)}function mapSet(key,value){if(key!="__proto__"){this.__data__[key]=value}return this}function SetCache(values){var length=values?values.length:0;this.data={hash:nativeCreate(null),set:new Set};while(length--){this.push(values[length])}}function cacheIndexOf(cache,value){var data=cache.data,result=typeof value=="string"||isObject(value)?data.set.has(value):data.hash[value];return result?0:-1}function cachePush(value){var data=this.data;if(typeof value=="string"||isObject(value)){data.set.add(value)}else{data.hash[value]=true}}function arrayConcat(array,other){var index=-1,length=array.length,othIndex=-1,othLength=other.length,result=Array(length+othLength);while(++index<length){result[index]=array[index]}while(++othIndex<othLength){result[index++]=other[othIndex]}return result}function arrayCopy(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}function arrayEach(array,iteratee){var index=-1,length=array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}function arrayEachRight(array,iteratee){var length=array.length;while(length--){if(iteratee(array[length],length,array)===false){break}}return array}function arrayEvery(array,predicate){var index=-1,length=array.length;while(++index<length){if(!predicate(array[index],index,array)){return false}}return true}function arrayExtremum(array,iteratee,comparator,exValue){var index=-1,length=array.length,computed=exValue,result=computed;while(++index<length){var value=array[index],current=+iteratee(value);if(comparator(current,computed)){computed=current;result=value}}return result}function arrayFilter(array,predicate){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[++resIndex]=value}}return result}function arrayMap(array,iteratee){var index=-1,length=array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}function arrayReduce(array,iteratee,accumulator,initFromArray){var index=-1,length=array.length;if(initFromArray&&length){accumulator=array[++index]}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array)}return accumulator}function arrayReduceRight(array,iteratee,accumulator,initFromArray){var length=array.length;if(initFromArray&&length){accumulator=array[--length]}while(length--){accumulator=iteratee(accumulator,array[length],length,array)}return accumulator}function arraySome(array,predicate){var index=-1,length=array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}function arraySum(array,iteratee){var length=array.length,result=0;while(length--){result+=+iteratee(array[length])||0}return result}function assignDefaults(objectValue,sourceValue){return objectValue===undefined?sourceValue:objectValue}function assignOwnDefaults(objectValue,sourceValue,key,object){return objectValue===undefined||!hasOwnProperty.call(object,key)?sourceValue:objectValue}function assignWith(object,source,customizer){var index=-1,props=keys(source),length=props.length;while(++index<length){var key=props[index],value=object[key],result=customizer(value,source[key],key,object,source);if((result===result?result!==value:value===value)||value===undefined&&!(key in object)){object[key]=result}}return object}function baseAssign(object,source){return source==null?object:baseCopy(source,keys(source),object)}function baseAt(collection,props){var index=-1,isNil=collection==null,isArr=!isNil&&isArrayLike(collection),length=isArr?collection.length:0,propsLength=props.length,result=Array(propsLength);while(++index<propsLength){var key=props[index];if(isArr){result[index]=isIndex(key,length)?collection[key]:undefined}else{result[index]=isNil?undefined:collection[key]}}return result}function baseCopy(source,props,object){object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];object[key]=source[key]}return object}function baseCallback(func,thisArg,argCount){var type=typeof func;if(type=="function"){return thisArg===undefined?func:bindCallback(func,thisArg,argCount)}if(func==null){return identity}if(type=="object"){return baseMatches(func)}return thisArg===undefined?property(func):baseMatchesProperty(func,thisArg)}function baseClone(value,isDeep,customizer,key,object,stackA,stackB){var result;if(customizer){result=object?customizer(value,key,object):customizer(value)}if(result!==undefined){return result}if(!isObject(value)){return value}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return arrayCopy(value,result)}}else{var tag=objToString.call(value),isFunc=tag==funcTag;if(tag==objectTag||tag==argsTag||isFunc&&!object){result=initCloneObject(isFunc?{}:value);if(!isDeep){return baseAssign(result,value)}}else{return cloneableTags[tag]?initCloneByTag(value,tag,isDeep):object?value:{}}}stackA||(stackA=[]);stackB||(stackB=[]);var length=stackA.length;while(length--){if(stackA[length]==value){return stackB[length]}}stackA.push(value);stackB.push(result);(isArr?arrayEach:baseForOwn)(value,function(subValue,key){result[key]=baseClone(subValue,isDeep,customizer,key,value,stackA,stackB)});return result}var baseCreate=function(){function object(){}return function(prototype){if(isObject(prototype)){object.prototype=prototype;var result=new object;object.prototype=undefined}return result||{}}}();function baseDelay(func,wait,args){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values){var length=array?array.length:0,result=[];if(!length){return result}var index=-1,indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,cache=isCommon&&values.length>=LARGE_ARRAY_SIZE?createCache(values):null,valuesLength=values.length;
if(cache){indexOf=cacheIndexOf;isCommon=false;values=cache}outer:while(++index<length){var value=array[index];if(isCommon&&value===value){var valuesIndex=valuesLength;while(valuesIndex--){if(values[valuesIndex]===value){continue outer}}result.push(value)}else if(indexOf(values,value,0)<0){result.push(value)}}return result}var baseEach=createBaseEach(baseForOwn);var baseEachRight=createBaseEach(baseForOwnRight,true);function baseEvery(collection,predicate){var result=true;baseEach(collection,function(value,index,collection){result=!!predicate(value,index,collection);return result});return result}function baseExtremum(collection,iteratee,comparator,exValue){var computed=exValue,result=computed;baseEach(collection,function(value,index,collection){var current=+iteratee(value,index,collection);if(comparator(current,computed)||current===exValue&&current===result){computed=current;result=value}});return result}function baseFill(array,value,start,end){var length=array.length;start=start==null?0:+start||0;if(start<0){start=-start>length?0:length+start}end=end===undefined||end>length?length:+end||0;if(end<0){end+=length}length=start>end?0:end>>>0;start>>>=0;while(start<length){array[start++]=value}return array}function baseFilter(collection,predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection)){result.push(value)}});return result}function baseFind(collection,predicate,eachFunc,retKey){var result;eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection)){result=retKey?key:value;return false}});return result}function baseFlatten(array,isDeep,isStrict,result){result||(result=[]);var index=-1,length=array.length;while(++index<length){var value=array[index];if(isObjectLike(value)&&isArrayLike(value)&&(isStrict||isArray(value)||isArguments(value))){if(isDeep){baseFlatten(value,isDeep,isStrict,result)}else{arrayPush(result,value)}}else if(!isStrict){result[result.length]=value}}return result}var baseFor=createBaseFor();var baseForRight=createBaseFor(true);function baseForIn(object,iteratee){return baseFor(object,iteratee,keysIn)}function baseForOwn(object,iteratee){return baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return baseForRight(object,iteratee,keys)}function baseFunctions(object,props){var index=-1,length=props.length,resIndex=-1,result=[];while(++index<length){var key=props[index];if(isFunction(object[key])){result[++resIndex]=key}}return result}function baseGet(object,path,pathKey){if(object==null){return}if(pathKey!==undefined&&pathKey in toObject(object)){path=[pathKey]}var index=0,length=path.length;while(object!=null&&index<length){object=object[path[index++]]}return index&&index==length?object:undefined}function baseIsEqual(value,other,customizer,isLoose,stackA,stackB){if(value===other){return true}if(value==null||other==null||!isObject(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,baseIsEqual,customizer,isLoose,stackA,stackB)}function baseIsEqualDeep(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;if(!objIsArr){objTag=objToString.call(object);if(objTag==argsTag){objTag=objectTag}else if(objTag!=objectTag){objIsArr=isTypedArray(object)}}if(!othIsArr){othTag=objToString.call(other);if(othTag==argsTag){othTag=objectTag}else if(othTag!=objectTag){othIsArr=isTypedArray(other)}}var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&!(objIsArr||objIsObj)){return equalByTag(object,other,objTag)}if(!isLoose){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,customizer,isLoose,stackA,stackB)}}if(!isSameTag){return false}stackA||(stackA=[]);stackB||(stackB=[]);var length=stackA.length;while(length--){if(stackA[length]==object){return stackB[length]==other}}stackA.push(object);stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,isLoose,stackA,stackB);stackA.pop();stackB.pop();return result}function baseIsMatch(object,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length}object=toObject(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false}}else{var result=customizer?customizer(objValue,srcValue,key):undefined;if(!(result===undefined?baseIsEqual(srcValue,objValue,customizer,true):result)){return false}}}return true}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)});return result}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){var key=matchData[0][0],value=matchData[0][1];return function(object){if(object==null){return false}return object[key]===value&&(value!==undefined||key in toObject(object))}}return function(object){return baseIsMatch(object,matchData)}}function baseMatchesProperty(path,srcValue){var isArr=isArray(path),isCommon=isKey(path)&&isStrictComparable(srcValue),pathKey=path+"";path=toPath(path);return function(object){if(object==null){return false}var key=pathKey;object=toObject(object);if((isArr||!isCommon)&&!(key in object)){object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));if(object==null){return false}key=last(path);object=toObject(object)}return object[key]===srcValue?srcValue!==undefined||key in object:baseIsEqual(srcValue,object[key],undefined,true)}}function baseMerge(object,source,customizer,stackA,stackB){if(!isObject(object)){return object}var isSrcArr=isArrayLike(source)&&(isArray(source)||isTypedArray(source)),props=isSrcArr?undefined:keys(source);arrayEach(props||source,function(srcValue,key){if(props){key=srcValue;srcValue=source[key]}if(isObjectLike(srcValue)){stackA||(stackA=[]);stackB||(stackB=[]);baseMergeDeep(object,source,key,baseMerge,customizer,stackA,stackB)}else{var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;if(isCommon){result=srcValue}if((result!==undefined||isSrcArr&&!(key in object))&&(isCommon||(result===result?result!==value:value===value))){object[key]=result}}});return object}function baseMergeDeep(object,source,key,mergeFunc,customizer,stackA,stackB){var length=stackA.length,srcValue=source[key];while(length--){if(stackA[length]==srcValue){object[key]=stackB[length];return}}var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;if(isCommon){result=srcValue;if(isArrayLike(srcValue)&&(isArray(srcValue)||isTypedArray(srcValue))){result=isArray(value)?value:isArrayLike(value)?arrayCopy(value):[]}else if(isPlainObject(srcValue)||isArguments(srcValue)){result=isArguments(value)?toPlainObject(value):isPlainObject(value)?value:{}}else{isCommon=false}}stackA.push(srcValue);stackB.push(result);if(isCommon){object[key]=mergeFunc(result,srcValue,customizer,stackA,stackB)}else if(result===result?result!==value:value===value){object[key]=result}}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}function basePropertyDeep(path){var pathKey=path+"";path=toPath(path);return function(object){return baseGet(object,path,pathKey)}}function basePullAt(array,indexes){var length=array?indexes.length:0;while(length--){var index=indexes[length];if(index!=previous&&isIndex(index)){var previous=index;splice.call(array,index,1)}}return array}function baseRandom(min,max){return min+nativeFloor(nativeRandom()*(max-min+1))}function baseReduce(collection,iteratee,accumulator,initFromCollection,eachFunc){eachFunc(collection,function(value,index,collection){accumulator=initFromCollection?(initFromCollection=false,value):iteratee(accumulator,value,index,collection)});return accumulator}var baseSetData=!metaMap?identity:function(func,data){metaMap.set(func,data);return func};function baseSlice(array,start,end){var index=-1,length=array.length;start=start==null?0:+start||0;if(start<0){start=-start>length?0:length+start}end=end===undefined||end>length?length:+end||0;if(end<0){end+=length}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start]}return result}function baseSome(collection,predicate){var result;baseEach(collection,function(value,index,collection){result=predicate(value,index,collection);return!result});return!!result}function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--){array[length]=array[length].value}return array}function baseSortByOrder(collection,iteratees,orders){var callback=getCallback(),index=-1;iteratees=arrayMap(iteratees,function(iteratee){return callback(iteratee)});var result=baseMap(collection,function(value){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value)});return{criteria:criteria,index:++index,value:value}});return baseSortBy(result,function(object,other){return compareMultiple(object,other,orders)})}function baseSum(collection,iteratee){var result=0;baseEach(collection,function(value,index,collection){result+=+iteratee(value,index,collection)||0});return result}function baseUniq(array,iteratee){var index=-1,indexOf=getIndexOf(),length=array.length,isCommon=indexOf==baseIndexOf,isLarge=isCommon&&length>=LARGE_ARRAY_SIZE,seen=isLarge?createCache():null,result=[];if(seen){indexOf=cacheIndexOf;isCommon=false}else{isLarge=false;seen=iteratee?[]:result}outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(isCommon&&value===value){var seenIndex=seen.length;while(seenIndex--){if(seen[seenIndex]===computed){continue outer}}if(iteratee){seen.push(computed)}result.push(value)}else if(indexOf(seen,computed,0)<0){if(iteratee||isLarge){seen.push(computed)}result.push(value)}}return result}function baseValues(object,props){var index=-1,length=props.length,result=Array(length);while(++index<length){result[index]=object[props[index]]}return result}function baseWhile(array,predicate,isDrop,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index<length)&&predicate(array[index],index,array)){}return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;if(result instanceof LazyWrapper){result=result.value()}var index=-1,length=actions.length;while(++index<length){var action=actions[index];result=action.func.apply(action.thisArg,arrayPush([result],action.args))}return result}function binaryIndex(array,value,retHighest){var low=0,high=array?array.length:low;if(typeof value=="number"&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){while(low<high){var mid=low+high>>>1,computed=array[mid];if((retHighest?computed<=value:computed<value)&&computed!==null){low=mid+1}else{high=mid}}return high}return binaryIndexBy(array,value,identity,retHighest)}function binaryIndexBy(array,value,iteratee,retHighest){value=iteratee(value);var low=0,high=array?array.length:0,valIsNaN=value!==value,valIsNull=value===null,valIsUndef=value===undefined;while(low<high){var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),isDef=computed!==undefined,isReflexive=computed===computed;if(valIsNaN){var setLow=isReflexive||retHighest}else if(valIsNull){setLow=isReflexive&&isDef&&(retHighest||computed!=null)}else if(valIsUndef){setLow=isReflexive&&(retHighest||isDef)}else if(computed==null){setLow=false}else{setLow=retHighest?computed<=value:computed<value}if(setLow){low=mid+1}else{high=mid}}return nativeMin(high,MAX_ARRAY_INDEX)}function bindCallback(func,thisArg,argCount){if(typeof func!="function"){return identity}if(thisArg===undefined){return func}switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}function bufferClone(buffer){var result=new ArrayBuffer(buffer.byteLength),view=new Uint8Array(result);view.set(new Uint8Array(buffer));return result}function composeArgs(args,partials,holders){var holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),leftIndex=-1,leftLength=partials.length,result=Array(leftLength+argsLength);while(++leftIndex<leftLength){result[leftIndex]=partials[leftIndex]}while(++argsIndex<holdersLength){result[holders[argsIndex]]=args[argsIndex]}while(argsLength--){result[leftIndex++]=args[argsIndex++]}return result}function composeArgsRight(args,partials,holders){var holdersIndex=-1,holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),rightIndex=-1,rightLength=partials.length,result=Array(argsLength+rightLength);while(++argsIndex<argsLength){result[argsIndex]=args[argsIndex]}var offset=argsIndex;while(++rightIndex<rightLength){result[offset+rightIndex]=partials[rightIndex]}while(++holdersIndex<holdersLength){result[offset+holders[holdersIndex]]=args[argsIndex++]}return result}function createAggregator(setter,initializer){return function(collection,iteratee,thisArg){var result=initializer?initializer():{};iteratee=getCallback(iteratee,thisArg,3);if(isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];setter(result,value,iteratee(value,index,collection),collection)}}else{baseEach(collection,function(value,key,collection){setter(result,value,iteratee(value,key,collection),collection)})}return result}}function createAssigner(assigner){return restParam(function(object,sources){var index=-1,length=object==null?0:sources.length,customizer=length>2?sources[length-2]:undefined,guard=length>2?sources[2]:undefined,thisArg=length>1?sources[length-1]:undefined;if(typeof customizer=="function"){customizer=bindCallback(customizer,thisArg,5);length-=2}else{customizer=typeof thisArg=="function"?thisArg:undefined;length-=customizer?1:0}if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}while(++index<length){var source=sources[index];if(source){assigner(object,source,customizer)}}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){var length=collection?getLength(collection):0;if(!isLength(length)){return eachFunc(collection,iteratee)}var index=fromRight?length:-1,iterable=toObject(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break}}return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var iterable=toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;while(fromRight?index--:++index<length){var key=props[index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}function createBindWrapper(func,thisArg){var Ctor=createCtorWrapper(func);function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(thisArg,arguments)}return wrapper}function createCache(values){return nativeCreate&&Set?new SetCache(values):null}function createCompounder(callback){return function(string){var index=-1,array=words(deburr(string)),length=array.length,result="";while(++index<length){result=callback(result,array[index],index)}return result}}function createCtorWrapper(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}function createCurry(flag){function curryFunc(func,arity,guard){if(guard&&isIterateeCall(func,arity,guard)){arity=undefined}var result=createWrapper(func,flag,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder=curryFunc.placeholder;return result}return curryFunc}function createDefaults(assigner,customizer){return restParam(function(args){var object=args[0];if(object==null){return object}args.push(customizer);return assigner.apply(undefined,args)})}function createExtremum(comparator,exValue){return function(collection,iteratee,thisArg){if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=undefined}iteratee=getCallback(iteratee,thisArg,3);if(iteratee.length==1){collection=isArray(collection)?collection:toIterable(collection);var result=arrayExtremum(collection,iteratee,comparator,exValue);if(!(collection.length&&result===exValue)){return result}}return baseExtremum(collection,iteratee,comparator,exValue)}}function createFind(eachFunc,fromRight){return function(collection,predicate,thisArg){predicate=getCallback(predicate,thisArg,3);if(isArray(collection)){var index=baseFindIndex(collection,predicate,fromRight);return index>-1?collection[index]:undefined}return baseFind(collection,predicate,eachFunc)}}function createFindIndex(fromRight){return function(array,predicate,thisArg){if(!(array&&array.length)){return-1}predicate=getCallback(predicate,thisArg,3);return baseFindIndex(array,predicate,fromRight)}}function createFindKey(objectFunc){return function(object,predicate,thisArg){predicate=getCallback(predicate,thisArg,3);return baseFind(object,predicate,objectFunc,true)}}function createFlow(fromRight){return function(){var wrapper,length=arguments.length,index=fromRight?length:-1,leftIndex=0,funcs=Array(length);while(fromRight?index--:++index<length){var func=funcs[leftIndex++]=arguments[index];if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(!wrapper&&LodashWrapper.prototype.thru&&getFuncName(func)=="wrapper"){wrapper=new LodashWrapper([],true)}}index=wrapper?-1:length;while(++index<length){func=funcs[index];var funcName=getFuncName(func),data=funcName=="wrapper"?getData(func):undefined;if(data&&isLaziable(data[0])&&data[1]==(ARY_FLAG|CURRY_FLAG|PARTIAL_FLAG|REARG_FLAG)&&!data[4].length&&data[9]==1){wrapper=wrapper[getFuncName(data[0])].apply(wrapper,data[3])}else{wrapper=func.length==1&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func)}}return function(){var args=arguments,value=args[0];if(wrapper&&args.length==1&&isArray(value)&&value.length>=LARGE_ARRAY_SIZE){return wrapper.plant(value).value()}var index=0,result=length?funcs[index].apply(this,args):value;while(++index<length){result=funcs[index].call(this,result)}return result}}}function createForEach(arrayFunc,eachFunc){return function(collection,iteratee,thisArg){return typeof iteratee=="function"&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee):eachFunc(collection,bindCallback(iteratee,thisArg,3))}}function createForIn(objectFunc){return function(object,iteratee,thisArg){if(typeof iteratee!="function"||thisArg!==undefined){iteratee=bindCallback(iteratee,thisArg,3)}return objectFunc(object,iteratee,keysIn)}}function createForOwn(objectFunc){return function(object,iteratee,thisArg){if(typeof iteratee!="function"||thisArg!==undefined){iteratee=bindCallback(iteratee,thisArg,3)}return objectFunc(object,iteratee)}}function createObjectMapper(isMapKeys){return function(object,iteratee,thisArg){var result={};iteratee=getCallback(iteratee,thisArg,3);baseForOwn(object,function(value,key,object){var mapped=iteratee(value,key,object);key=isMapKeys?mapped:key;value=isMapKeys?value:mapped;result[key]=value});return result}}function createPadDir(fromRight){return function(string,length,chars){string=baseToString(string);return(fromRight?string:"")+createPadding(string,length,chars)+(fromRight?"":string)}}function createPartial(flag){var partialFunc=restParam(function(func,partials){var holders=replaceHolders(partials,partialFunc.placeholder);return createWrapper(func,flag,undefined,partials,holders)});return partialFunc}function createReduce(arrayFunc,eachFunc){return function(collection,iteratee,accumulator,thisArg){var initFromArray=arguments.length<3;return typeof iteratee=="function"&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee,accumulator,initFromArray):baseReduce(collection,getCallback(iteratee,thisArg,4),accumulator,initFromArray,eachFunc)}}function createHybridWrapper(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&ARY_FLAG,isBind=bitmask&BIND_FLAG,isBindKey=bitmask&BIND_KEY_FLAG,isCurry=bitmask&CURRY_FLAG,isCurryBound=bitmask&CURRY_BOUND_FLAG,isCurryRight=bitmask&CURRY_RIGHT_FLAG,Ctor=isBindKey?undefined:createCtorWrapper(func);function wrapper(){var length=arguments.length,index=length,args=Array(length);while(index--){args[index]=arguments[index]}if(partials){args=composeArgs(args,partials,holders)}if(partialsRight){args=composeArgsRight(args,partialsRight,holdersRight)}if(isCurry||isCurryRight){var placeholder=wrapper.placeholder,argsHolders=replaceHolders(args,placeholder);length-=argsHolders.length;if(length<arity){var newArgPos=argPos?arrayCopy(argPos):undefined,newArity=nativeMax(arity-length,0),newsHolders=isCurry?argsHolders:undefined,newHoldersRight=isCurry?undefined:argsHolders,newPartials=isCurry?args:undefined,newPartialsRight=isCurry?undefined:args;bitmask|=isCurry?PARTIAL_FLAG:PARTIAL_RIGHT_FLAG;bitmask&=~(isCurry?PARTIAL_RIGHT_FLAG:PARTIAL_FLAG);if(!isCurryBound){bitmask&=~(BIND_FLAG|BIND_KEY_FLAG)}var newData=[func,bitmask,thisArg,newPartials,newsHolders,newPartialsRight,newHoldersRight,newArgPos,ary,newArity],result=createHybridWrapper.apply(undefined,newData);if(isLaziable(func)){setData(result,newData)}result.placeholder=placeholder;return result}}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;if(argPos){args=reorder(args,argPos)}if(isAry&&ary<args.length){args.length=ary}if(this&&this!==root&&this instanceof wrapper){fn=Ctor||createCtorWrapper(func)}return fn.apply(thisBinding,args)}return wrapper}function createPadding(string,length,chars){var strLength=string.length;length=+length;if(strLength>=length||!nativeIsFinite(length)){return""}var padLength=length-strLength;chars=chars==null?" ":chars+"";return repeat(chars,nativeCeil(padLength/chars.length)).slice(0,padLength)}function createPartialWrapper(func,bitmask,thisArg,partials){var isBind=bitmask&BIND_FLAG,Ctor=createCtorWrapper(func);function wrapper(){var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength);while(++leftIndex<leftLength){args[leftIndex]=partials[leftIndex]}while(argsLength--){args[leftIndex++]=arguments[++argsIndex]}var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,args)}return wrapper}function createRound(methodName){var func=Math[methodName];return function(number,precision){precision=precision===undefined?0:+precision||0;if(precision){precision=pow(10,precision);return func(number*precision)/precision}return func(number)}}function createSortedIndex(retHighest){return function(array,value,iteratee,thisArg){var callback=getCallback(iteratee);return iteratee==null&&callback===baseCallback?binaryIndex(array,value,retHighest):binaryIndexBy(array,value,callback(iteratee,thisArg,1),retHighest)}}function createWrapper(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&BIND_KEY_FLAG;if(!isBindKey&&typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var length=partials?partials.length:0;if(!length){bitmask&=~(PARTIAL_FLAG|PARTIAL_RIGHT_FLAG);partials=holders=undefined}length-=holders?holders.length:0;if(bitmask&PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined}var data=isBindKey?undefined:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data){mergeData(newData,data);bitmask=newData[1];arity=newData[9]}newData[9]=arity==null?isBindKey?0:func.length:nativeMax(arity-length,0)||0;if(bitmask==BIND_FLAG){var result=createBindWrapper(newData[0],newData[2])}else if((bitmask==PARTIAL_FLAG||bitmask==(BIND_FLAG|PARTIAL_FLAG))&&!newData[4].length){result=createPartialWrapper.apply(undefined,newData)}else{result=createHybridWrapper.apply(undefined,newData)}var setter=data?baseSetData:setData;return setter(result,newData)}function equalArrays(array,other,equalFunc,customizer,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isLoose&&othLength>arrLength)){return false}while(++index<arrLength){var arrValue=array[index],othValue=other[index],result=customizer?customizer(isLoose?othValue:arrValue,isLoose?arrValue:othValue,index):undefined;if(result!==undefined){if(result){continue}return false}if(isLoose){if(!arraySome(other,function(othValue){return arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB)})){return false}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB))){return false}}return true}function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object==+other;case errorTag:return object.name==other.name&&object.message==other.message;case numberTag:return object!=+object?other!=+other:object==+other;case regexpTag:case stringTag:return object==other+""}return false}function equalObjects(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isLoose){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isLoose?key in other:hasOwnProperty.call(other,key))){return false}}var skipCtor=isLoose;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key],result=customizer?customizer(isLoose?othValue:objValue,isLoose?objValue:othValue,key):undefined;if(!(result===undefined?equalFunc(objValue,othValue,customizer,isLoose,stackA,stackB):result)){return false}skipCtor||(skipCtor=key=="constructor")}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){return false}}return true}function getCallback(func,thisArg,argCount){var result=lodash.callback||callback;result=result===callback?baseCallback:result;return argCount?result(func,thisArg,argCount):result}var getData=!metaMap?noop:function(func){return metaMap.get(func)};function getFuncName(func){var result=func.name,array=realNames[result],length=array?array.length:0;while(length--){var data=array[length],otherFunc=data.func;if(otherFunc==null||otherFunc==func){return data.name}}return result}function getIndexOf(collection,target,fromIndex){var result=lodash.indexOf||indexOf;result=result===indexOf?baseIndexOf:result;return collection?result(collection,target,fromIndex):result}var getLength=baseProperty("length");function getMatchData(object){var result=pairs(object),length=result.length;while(length--){result[length][2]=isStrictComparable(result[length][1])}return result}function getNative(object,key){var value=object==null?undefined:object[key];return isNative(value)?value:undefined}function getView(start,end,transforms){var index=-1,length=transforms.length;while(++index<length){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size);break}}return{start:start,end:end}}function initCloneArray(array){var length=array.length,result=new array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty.call(array,"index")){result.index=array.index;result.input=array.input}return result}function initCloneObject(object){var Ctor=object.constructor;if(!(typeof Ctor=="function"&&Ctor instanceof Ctor)){Ctor=Object}return new Ctor}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return bufferClone(object);case boolTag:case dateTag:return new Ctor(+object);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:var buffer=object.buffer;return new Ctor(isDeep?bufferClone(buffer):buffer,object.byteOffset,object.length);case numberTag:case stringTag:return new Ctor(object);case regexpTag:var result=new Ctor(object.source,reFlags.exec(object));result.lastIndex=object.lastIndex}return result}function invokePath(object,path,args){if(object!=null&&!isKey(path,object)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));path=last(path)}var func=object==null?object:object[path];return func==null?undefined:func.apply(object,args)}function isArrayLike(value){return value!=null&&isLength(getLength(value))}function isIndex(value,length){value=typeof value=="number"||reIsUint.test(value)?+value:-1;length=length==null?MAX_SAFE_INTEGER:length;return value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){var other=object[index];return value===value?value===other:other!==other}return false}function isKey(value,object){var type=typeof value;if(type=="string"&&reIsPlainProp.test(value)||type=="number"){return true}if(isArray(value)){return false}var result=!reIsDeepProp.test(value);return result||object!=null&&value in toObject(object)}function isLaziable(func){var funcName=getFuncName(func);if(!(funcName in LazyWrapper.prototype)){return false}var other=lodash[funcName];if(func===other){return true}var data=getData(other);return!!data&&func===data[0]}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isStrictComparable(value){return value===value&&!isObject(value)}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<ARY_FLAG;var isCombo=srcBitmask==ARY_FLAG&&bitmask==CURRY_FLAG||srcBitmask==ARY_FLAG&&bitmask==REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(ARY_FLAG|REARG_FLAG)&&bitmask==CURRY_FLAG;if(!(isCommon||isCombo)){return data}if(srcBitmask&BIND_FLAG){data[2]=source[2];newBitmask|=bitmask&BIND_FLAG?0:CURRY_BOUND_FLAG}var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):arrayCopy(value);data[4]=partials?replaceHolders(data[3],PLACEHOLDER):arrayCopy(source[4])}value=source[5];if(value){partials=data[5];data[5]=partials?composeArgsRight(partials,value,source[6]):arrayCopy(value);data[6]=partials?replaceHolders(data[5],PLACEHOLDER):arrayCopy(source[6]);
}value=source[7];if(value){data[7]=arrayCopy(value)}if(srcBitmask&ARY_FLAG){data[8]=data[8]==null?source[8]:nativeMin(data[8],source[8])}if(data[9]==null){data[9]=source[9]}data[0]=source[0];data[1]=newBitmask;return data}function mergeDefaults(objectValue,sourceValue){return objectValue===undefined?sourceValue:merge(objectValue,sourceValue,mergeDefaults)}function pickByArray(object,props){object=toObject(object);var index=-1,length=props.length,result={};while(++index<length){var key=props[index];if(key in object){result[key]=object[key]}}return result}function pickByCallback(object,predicate){var result={};baseForIn(object,function(value,key,object){if(predicate(value,key,object)){result[key]=value}});return result}function reorder(array,indexes){var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=arrayCopy(array);while(length--){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}var setData=function(){var count=0,lastCalled=0;return function(key,value){var stamp=now(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return key}}else{count=0}return baseSetData(key,value)}}();function shimKeys(object){var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length;var allowIndexes=!!length&&isLength(length)&&(isArray(object)||isArguments(object));var index=-1,result=[];while(++index<propsLength){var key=props[index];if(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key)){result.push(key)}}return result}function toIterable(value){if(value==null){return[]}if(!isArrayLike(value)){return values(value)}return isObject(value)?value:Object(value)}function toObject(value){return isObject(value)?value:Object(value)}function toPath(value){if(isArray(value)){return value}var result=[];baseToString(value).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)});return result}function wrapperClone(wrapper){return wrapper instanceof LazyWrapper?wrapper.clone():new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__,arrayCopy(wrapper.__actions__))}function chunk(array,size,guard){if(guard?isIterateeCall(array,size,guard):size==null){size=1}else{size=nativeMax(nativeFloor(size)||1,1)}var index=0,length=array?array.length:0,resIndex=-1,result=Array(nativeCeil(length/size));while(index<length){result[++resIndex]=baseSlice(array,index,index+=size)}return result}function compact(array){var index=-1,length=array?array.length:0,resIndex=-1,result=[];while(++index<length){var value=array[index];if(value){result[++resIndex]=value}}return result}var difference=restParam(function(array,values){return isObjectLike(array)&&isArrayLike(array)?baseDifference(array,baseFlatten(values,false,true)):[]});function drop(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}return baseSlice(array,n<0?0:n)}function dropRight(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}n=length-(+n||0);return baseSlice(array,0,n<0?0:n)}function dropRightWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),true,true):[]}function dropWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),true):[]}function fill(array,value,start,end){var length=array?array.length:0;if(!length){return[]}if(start&&typeof start!="number"&&isIterateeCall(array,value,start)){start=0;end=length}return baseFill(array,value,start,end)}var findIndex=createFindIndex();var findLastIndex=createFindIndex(true);function first(array){return array?array[0]:undefined}function flatten(array,isDeep,guard){var length=array?array.length:0;if(guard&&isIterateeCall(array,isDeep,guard)){isDeep=false}return length?baseFlatten(array,isDeep):[]}function flattenDeep(array){var length=array?array.length:0;return length?baseFlatten(array,true):[]}function indexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return-1}if(typeof fromIndex=="number"){fromIndex=fromIndex<0?nativeMax(length+fromIndex,0):fromIndex}else if(fromIndex){var index=binaryIndex(array,value);if(index<length&&(value===value?value===array[index]:array[index]!==array[index])){return index}return-1}return baseIndexOf(array,value,fromIndex||0)}function initial(array){return dropRight(array,1)}var intersection=restParam(function(arrays){var othLength=arrays.length,othIndex=othLength,caches=Array(length),indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,result=[];while(othIndex--){var value=arrays[othIndex]=isArrayLike(value=arrays[othIndex])?value:[];caches[othIndex]=isCommon&&value.length>=120?createCache(othIndex&&value):null}var array=arrays[0],index=-1,length=array?array.length:0,seen=caches[0];outer:while(++index<length){value=array[index];if((seen?cacheIndexOf(seen,value):indexOf(result,value,0))<0){var othIndex=othLength;while(--othIndex){var cache=caches[othIndex];if((cache?cacheIndexOf(cache,value):indexOf(arrays[othIndex],value,0))<0){continue outer}}if(seen){seen.push(value)}result.push(value)}}return result});function last(array){var length=array?array.length:0;return length?array[length-1]:undefined}function lastIndexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return-1}var index=length;if(typeof fromIndex=="number"){index=(fromIndex<0?nativeMax(length+fromIndex,0):nativeMin(fromIndex||0,length-1))+1}else if(fromIndex){index=binaryIndex(array,value,true)-1;var other=array[index];if(value===value?value===other:other!==other){return index}return-1}if(value!==value){return indexOfNaN(array,index,true)}while(index--){if(array[index]===value){return index}}return-1}function pull(){var args=arguments,array=args[0];if(!(array&&array.length)){return array}var index=0,indexOf=getIndexOf(),length=args.length;while(++index<length){var fromIndex=0,value=args[index];while((fromIndex=indexOf(array,value,fromIndex))>-1){splice.call(array,fromIndex,1)}}return array}var pullAt=restParam(function(array,indexes){indexes=baseFlatten(indexes);var result=baseAt(array,indexes);basePullAt(array,indexes.sort(baseCompareAscending));return result});function remove(array,predicate,thisArg){var result=[];if(!(array&&array.length)){return result}var index=-1,indexes=[],length=array.length;predicate=getCallback(predicate,thisArg,3);while(++index<length){var value=array[index];if(predicate(value,index,array)){result.push(value);indexes.push(index)}}basePullAt(array,indexes);return result}function rest(array){return drop(array,1)}function slice(array,start,end){var length=array?array.length:0;if(!length){return[]}if(end&&typeof end!="number"&&isIterateeCall(array,start,end)){start=0;end=length}return baseSlice(array,start,end)}var sortedIndex=createSortedIndex();var sortedLastIndex=createSortedIndex(true);function take(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}return baseSlice(array,0,n<0?0:n)}function takeRight(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}n=length-(+n||0);return baseSlice(array,n<0?0:n)}function takeRightWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),false,true):[]}function takeWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3)):[]}var union=restParam(function(arrays){return baseUniq(baseFlatten(arrays,false,true))});function uniq(array,isSorted,iteratee,thisArg){var length=array?array.length:0;if(!length){return[]}if(isSorted!=null&&typeof isSorted!="boolean"){thisArg=iteratee;iteratee=isIterateeCall(array,isSorted,thisArg)?undefined:isSorted;isSorted=false}var callback=getCallback();if(!(iteratee==null&&callback===baseCallback)){iteratee=callback(iteratee,thisArg,3)}return isSorted&&getIndexOf()==baseIndexOf?sortedUniq(array,iteratee):baseUniq(array,iteratee)}function unzip(array){if(!(array&&array.length)){return[]}var index=-1,length=0;array=arrayFilter(array,function(group){if(isArrayLike(group)){length=nativeMax(group.length,length);return true}});var result=Array(length);while(++index<length){result[index]=arrayMap(array,baseProperty(index))}return result}function unzipWith(array,iteratee,thisArg){var length=array?array.length:0;if(!length){return[]}var result=unzip(array);if(iteratee==null){return result}iteratee=bindCallback(iteratee,thisArg,4);return arrayMap(result,function(group){return arrayReduce(group,iteratee,undefined,true)})}var without=restParam(function(array,values){return isArrayLike(array)?baseDifference(array,values):[]});function xor(){var index=-1,length=arguments.length;while(++index<length){var array=arguments[index];if(isArrayLike(array)){var result=result?arrayPush(baseDifference(result,array),baseDifference(array,result)):array}}return result?baseUniq(result):[]}var zip=restParam(unzip);function zipObject(props,values){var index=-1,length=props?props.length:0,result={};if(length&&!values&&!isArray(props[0])){values=[]}while(++index<length){var key=props[index];if(values){result[key]=values[index]}else if(key){result[key[0]]=key[1]}}return result}var zipWith=restParam(function(arrays){var length=arrays.length,iteratee=length>2?arrays[length-2]:undefined,thisArg=length>1?arrays[length-1]:undefined;if(length>2&&typeof iteratee=="function"){length-=2}else{iteratee=length>1&&typeof thisArg=="function"?(--length,thisArg):undefined;thisArg=undefined}arrays.length=length;return unzipWith(arrays,iteratee,thisArg)});function chain(value){var result=lodash(value);result.__chain__=true;return result}function tap(value,interceptor,thisArg){interceptor.call(thisArg,value);return value}function thru(value,interceptor,thisArg){return interceptor.call(thisArg,value)}function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}var wrapperConcat=restParam(function(values){values=baseFlatten(values);return this.thru(function(array){return arrayConcat(isArray(array)?array:[toObject(array)],values)})});function wrapperPlant(value){var result,parent=this;while(parent instanceof baseLodash){var clone=wrapperClone(parent);if(result){previous.__wrapped__=clone}else{result=clone}var previous=clone;parent=parent.__wrapped__}previous.__wrapped__=value;return result}function wrapperReverse(){var value=this.__wrapped__;var interceptor=function(value){return wrapped&&wrapped.__dir__<0?value:value.reverse()};if(value instanceof LazyWrapper){var wrapped=value;if(this.__actions__.length){wrapped=new LazyWrapper(this)}wrapped=wrapped.reverse();wrapped.__actions__.push({func:thru,args:[interceptor],thisArg:undefined});return new LodashWrapper(wrapped,this.__chain__)}return this.thru(interceptor)}function wrapperToString(){return this.value()+""}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}var at=restParam(function(collection,props){return baseAt(collection,baseFlatten(props))});var countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:result[key]=1});function every(collection,predicate,thisArg){var func=isArray(collection)?arrayEvery:baseEvery;if(thisArg&&isIterateeCall(collection,predicate,thisArg)){predicate=undefined}if(typeof predicate!="function"||thisArg!==undefined){predicate=getCallback(predicate,thisArg,3)}return func(collection,predicate)}function filter(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;predicate=getCallback(predicate,thisArg,3);return func(collection,predicate)}var find=createFind(baseEach);var findLast=createFind(baseEachRight,true);function findWhere(collection,source){return find(collection,baseMatches(source))}var forEach=createForEach(arrayEach,baseEach);var forEachRight=createForEach(arrayEachRight,baseEachRight);var groupBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){result[key].push(value)}else{result[key]=[value]}});function includes(collection,target,fromIndex,guard){var length=collection?getLength(collection):0;if(!isLength(length)){collection=values(collection);length=collection.length}if(typeof fromIndex!="number"||guard&&isIterateeCall(target,fromIndex,guard)){fromIndex=0}else{fromIndex=fromIndex<0?nativeMax(length+fromIndex,0):fromIndex||0}return typeof collection=="string"||!isArray(collection)&&isString(collection)?fromIndex<=length&&collection.indexOf(target,fromIndex)>-1:!!length&&getIndexOf(collection,target,fromIndex)>-1}var indexBy=createAggregator(function(result,value,key){result[key]=value});var invoke=restParam(function(collection,path,args){var index=-1,isFunc=typeof path=="function",isProp=isKey(path),result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value){var func=isFunc?path:isProp&&value!=null?value[path]:undefined;result[++index]=func?func.apply(value,args):invokePath(value,path,args)});return result});function map(collection,iteratee,thisArg){var func=isArray(collection)?arrayMap:baseMap;iteratee=getCallback(iteratee,thisArg,3);return func(collection,iteratee)}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]});function pluck(collection,path){return map(collection,property(path))}var reduce=createReduce(arrayReduce,baseEach);var reduceRight=createReduce(arrayReduceRight,baseEachRight);function reject(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;predicate=getCallback(predicate,thisArg,3);return func(collection,function(value,index,collection){return!predicate(value,index,collection)})}function sample(collection,n,guard){if(guard?isIterateeCall(collection,n,guard):n==null){collection=toIterable(collection);var length=collection.length;return length>0?collection[baseRandom(0,length-1)]:undefined}var index=-1,result=toArray(collection),length=result.length,lastIndex=length-1;n=nativeMin(n<0?0:+n||0,length);while(++index<n){var rand=baseRandom(index,lastIndex),value=result[rand];result[rand]=result[index];result[index]=value}result.length=n;return result}function shuffle(collection){return sample(collection,POSITIVE_INFINITY)}function size(collection){var length=collection?getLength(collection):0;return isLength(length)?length:keys(collection).length}function some(collection,predicate,thisArg){var func=isArray(collection)?arraySome:baseSome;if(thisArg&&isIterateeCall(collection,predicate,thisArg)){predicate=undefined}if(typeof predicate!="function"||thisArg!==undefined){predicate=getCallback(predicate,thisArg,3)}return func(collection,predicate)}function sortBy(collection,iteratee,thisArg){if(collection==null){return[]}if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=undefined}var index=-1;iteratee=getCallback(iteratee,thisArg,3);var result=baseMap(collection,function(value,key,collection){return{criteria:iteratee(value,key,collection),index:++index,value:value}});return baseSortBy(result,compareAscending)}var sortByAll=restParam(function(collection,iteratees){if(collection==null){return[]}var guard=iteratees[2];if(guard&&isIterateeCall(iteratees[0],iteratees[1],guard)){iteratees.length=1}return baseSortByOrder(collection,baseFlatten(iteratees),[])});function sortByOrder(collection,iteratees,orders,guard){if(collection==null){return[]}if(guard&&isIterateeCall(iteratees,orders,guard)){orders=undefined}if(!isArray(iteratees)){iteratees=iteratees==null?[]:[iteratees]}if(!isArray(orders)){orders=orders==null?[]:[orders]}return baseSortByOrder(collection,iteratees,orders)}function where(collection,source){return filter(collection,baseMatches(source))}var now=nativeNow||function(){return(new Date).getTime()};function after(n,func){if(typeof func!="function"){if(typeof n=="function"){var temp=n;n=func;func=temp}else{throw new TypeError(FUNC_ERROR_TEXT)}}n=nativeIsFinite(n=+n)?n:0;return function(){if(--n<1){return func.apply(this,arguments)}}}function ary(func,n,guard){if(guard&&isIterateeCall(func,n,guard)){n=undefined}n=func&&n==null?func.length:nativeMax(+n||0,0);return createWrapper(func,ARY_FLAG,undefined,undefined,undefined,undefined,n)}function before(n,func){var result;if(typeof func!="function"){if(typeof n=="function"){var temp=n;n=func;func=temp}else{throw new TypeError(FUNC_ERROR_TEXT)}}return function(){if(--n>0){result=func.apply(this,arguments)}if(n<=1){func=undefined}return result}}var bind=restParam(function(func,thisArg,partials){var bitmask=BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,bind.placeholder);bitmask|=PARTIAL_FLAG}return createWrapper(func,bitmask,thisArg,partials,holders)});var bindAll=restParam(function(object,methodNames){methodNames=methodNames.length?baseFlatten(methodNames):functions(object);var index=-1,length=methodNames.length;while(++index<length){var key=methodNames[index];object[key]=createWrapper(object[key],BIND_FLAG,object)}return object});var bindKey=restParam(function(object,key,partials){var bitmask=BIND_FLAG|BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,bindKey.placeholder);bitmask|=PARTIAL_FLAG}return createWrapper(key,bitmask,object,partials,holders)});var curry=createCurry(CURRY_FLAG);var curryRight=createCurry(CURRY_RIGHT_FLAG);function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}wait=wait<0?0:+wait||0;if(options===true){var leading=true;trailing=false}else if(isObject(options)){leading=!!options.leading;maxWait="maxWait"in options&&nativeMax(+options.maxWait||0,wait);trailing="trailing"in options?!!options.trailing:trailing}function cancel(){if(timeoutId){clearTimeout(timeoutId)}if(maxTimeoutId){clearTimeout(maxTimeoutId)}lastCalled=0;maxTimeoutId=timeoutId=trailingCall=undefined}function complete(isCalled,id){if(id){clearTimeout(id)}maxTimeoutId=timeoutId=trailingCall=undefined;if(isCalled){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=undefined}}}function delayed(){var remaining=wait-(now()-stamp);if(remaining<=0||remaining>wait){complete(trailingCall,maxTimeoutId)}else{timeoutId=setTimeout(delayed,remaining)}}function maxDelayed(){complete(trailing,timeoutId)}function debounced(){args=arguments;stamp=now();thisArg=this;trailingCall=trailing&&(timeoutId||!leading);if(maxWait===false){var leadingCall=leading&&!timeoutId}else{if(!maxTimeoutId&&!leading){lastCalled=stamp}var remaining=maxWait-(stamp-lastCalled),isCalled=remaining<=0||remaining>maxWait;if(isCalled){if(maxTimeoutId){maxTimeoutId=clearTimeout(maxTimeoutId)}lastCalled=stamp;result=func.apply(thisArg,args)}else if(!maxTimeoutId){maxTimeoutId=setTimeout(maxDelayed,remaining)}}if(isCalled&&timeoutId){timeoutId=clearTimeout(timeoutId)}else if(!timeoutId&&wait!==maxWait){timeoutId=setTimeout(delayed,wait)}if(leadingCall){isCalled=true;result=func.apply(thisArg,args)}if(isCalled&&!timeoutId&&!maxTimeoutId){args=thisArg=undefined}return result}debounced.cancel=cancel;return debounced}var defer=restParam(function(func,args){return baseDelay(func,1,args)});var delay=restParam(function(func,wait,args){return baseDelay(func,wait,args)});var flow=createFlow();var flowRight=createFlow(true);function memoize(func,resolver){if(typeof func!="function"||resolver&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result);return result};memoized.cache=new memoize.Cache;return memoized}var modArgs=restParam(function(func,transforms){transforms=baseFlatten(transforms);if(typeof func!="function"||!arrayEvery(transforms,baseIsFunction)){throw new TypeError(FUNC_ERROR_TEXT)}var length=transforms.length;return restParam(function(args){var index=nativeMin(args.length,length);while(index--){args[index]=transforms[index](args[index])}return func.apply(this,args)})});function negate(predicate){if(typeof predicate!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return function(){return!predicate.apply(this,arguments)}}function once(func){return before(2,func)}var partial=createPartial(PARTIAL_FLAG);var partialRight=createPartial(PARTIAL_RIGHT_FLAG);var rearg=restParam(function(func,indexes){return createWrapper(func,REARG_FLAG,undefined,undefined,undefined,baseFlatten(indexes))});function restParam(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=nativeMax(start===undefined?func.length-1:+start||0,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);while(++index<length){rest[index]=args[start+index]}switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);index=-1;while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=rest;return func.apply(this,otherArgs)}}function spread(func){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return function(array){return func.apply(this,array)}}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(options===false){leading=false}else if(isObject(options)){leading="leading"in options?!!options.leading:leading;trailing="trailing"in options?!!options.trailing:trailing}return debounce(func,wait,{leading:leading,maxWait:+wait,trailing:trailing})}function wrap(value,wrapper){wrapper=wrapper==null?identity:wrapper;return createWrapper(wrapper,PARTIAL_FLAG,undefined,[value],[])}function clone(value,isDeep,customizer,thisArg){if(isDeep&&typeof isDeep!="boolean"&&isIterateeCall(value,isDeep,customizer)){isDeep=false}else if(typeof isDeep=="function"){thisArg=customizer;customizer=isDeep;isDeep=false}return typeof customizer=="function"?baseClone(value,isDeep,bindCallback(customizer,thisArg,1)):baseClone(value,isDeep)}function cloneDeep(value,customizer,thisArg){return typeof customizer=="function"?baseClone(value,true,bindCallback(customizer,thisArg,1)):baseClone(value,true)}function gt(value,other){return value>other}function gte(value,other){return value>=other}function isArguments(value){return isObjectLike(value)&&isArrayLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")}var isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag};function isBoolean(value){return value===true||value===false||isObjectLike(value)&&objToString.call(value)==boolTag}function isDate(value){return isObjectLike(value)&&objToString.call(value)==dateTag}function isElement(value){return!!value&&value.nodeType===1&&isObjectLike(value)&&!isPlainObject(value)}function isEmpty(value){if(value==null){return true}if(isArrayLike(value)&&(isArray(value)||isString(value)||isArguments(value)||isObjectLike(value)&&isFunction(value.splice))){return!value.length}return!keys(value).length}function isEqual(value,other,customizer,thisArg){customizer=typeof customizer=="function"?bindCallback(customizer,thisArg,3):undefined;var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,customizer):!!result}function isError(value){return isObjectLike(value)&&typeof value.message=="string"&&objToString.call(value)==errorTag}function isFinite(value){return typeof value=="number"&&nativeIsFinite(value)}function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}function isMatch(object,source,customizer,thisArg){customizer=typeof customizer=="function"?bindCallback(customizer,thisArg,3):undefined;return baseIsMatch(object,getMatchData(source),customizer)}function isNaN(value){return isNumber(value)&&value!=+value}function isNative(value){if(value==null){return false}if(isFunction(value)){return reIsNative.test(fnToString.call(value))}return isObjectLike(value)&&reIsHostCtor.test(value)}function isNull(value){return value===null}function isNumber(value){return typeof value=="number"||isObjectLike(value)&&objToString.call(value)==numberTag}function isPlainObject(value){var Ctor;if(!(isObjectLike(value)&&objToString.call(value)==objectTag&&!isArguments(value))||!hasOwnProperty.call(value,"constructor")&&(Ctor=value.constructor,typeof Ctor=="function"&&!(Ctor instanceof Ctor))){return false}var result;baseForIn(value,function(subValue,key){result=key});return result===undefined||hasOwnProperty.call(value,result)}function isRegExp(value){return isObject(value)&&objToString.call(value)==regexpTag}function isString(value){return typeof value=="string"||isObjectLike(value)&&objToString.call(value)==stringTag}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)]}function isUndefined(value){return value===undefined}function lt(value,other){return value<other}function lte(value,other){return value<=other}function toArray(value){var length=value?getLength(value):0;if(!isLength(length)){return values(value)}if(!length){return[]}return arrayCopy(value)}function toPlainObject(value){return baseCopy(value,keysIn(value))}var merge=createAssigner(baseMerge);var assign=createAssigner(function(object,source,customizer){return customizer?assignWith(object,source,customizer):baseAssign(object,source)});function create(prototype,properties,guard){var result=baseCreate(prototype);if(guard&&isIterateeCall(prototype,properties,guard)){properties=undefined}return properties?baseAssign(result,properties):result}var defaults=createDefaults(assign,assignDefaults);var defaultsDeep=createDefaults(merge,mergeDefaults);var findKey=createFindKey(baseForOwn);var findLastKey=createFindKey(baseForOwnRight);var forIn=createForIn(baseFor);var forInRight=createForIn(baseForRight);var forOwn=createForOwn(baseForOwn);var forOwnRight=createForOwn(baseForOwnRight);function functions(object){return baseFunctions(object,keysIn(object))}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,toPath(path),path+"");return result===undefined?defaultValue:result}function has(object,path){if(object==null){return false}var result=hasOwnProperty.call(object,path);if(!result&&!isKey(path)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));if(object==null){return false}path=last(path);result=hasOwnProperty.call(object,path)}return result||isLength(object.length)&&isIndex(path,object.length)&&(isArray(object)||isArguments(object))}function invert(object,multiValue,guard){if(guard&&isIterateeCall(object,multiValue,guard)){multiValue=undefined}var index=-1,props=keys(object),length=props.length,result={};while(++index<length){var key=props[index],value=object[key];if(multiValue){if(hasOwnProperty.call(result,value)){result[value].push(key)}else{result[value]=[key]}}else{result[value]=key}}return result}var keys=!nativeKeys?shimKeys:function(object){var Ctor=object==null?undefined:object.constructor;if(typeof Ctor=="function"&&Ctor.prototype===object||typeof object!="function"&&isArrayLike(object)){return shimKeys(object)}return isObject(object)?nativeKeys(object):[]};function keysIn(object){if(object==null){return[]}if(!isObject(object)){object=Object(object)}var length=object.length;length=length&&isLength(length)&&(isArray(object)||isArguments(object))&&length||0;var Ctor=object.constructor,index=-1,isProto=typeof Ctor=="function"&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;while(++index<length){result[index]=index+""}for(var key in object){if(!(skipIndexes&&isIndex(key,length))&&!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}var mapKeys=createObjectMapper(true);var mapValues=createObjectMapper();var omit=restParam(function(object,props){if(object==null){return{}}if(typeof props[0]!="function"){var props=arrayMap(baseFlatten(props),String);return pickByArray(object,baseDifference(keysIn(object),props))}var predicate=bindCallback(props[0],props[1],3);return pickByCallback(object,function(value,key,object){return!predicate(value,key,object)})});function pairs(object){object=toObject(object);var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){var key=props[index];result[index]=[key,object[key]]}return result}var pick=restParam(function(object,props){if(object==null){return{}}return typeof props[0]=="function"?pickByCallback(object,bindCallback(props[0],props[1],3)):pickByArray(object,baseFlatten(props))});function result(object,path,defaultValue){var result=object==null?undefined:object[path];if(result===undefined){if(object!=null&&!isKey(path,object)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));result=object==null?undefined:object[last(path)]}result=result===undefined?defaultValue:result}return isFunction(result)?result.call(object):result}function set(object,path,value){if(object==null){return object}var pathKey=path+"";path=object[pathKey]!=null||isKey(path,object)?[pathKey]:toPath(path);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=path[index];if(isObject(nested)){if(index==lastIndex){nested[key]=value}else if(nested[key]==null){nested[key]=isIndex(path[index+1])?[]:{}}}nested=nested[key]}return object}function transform(object,iteratee,accumulator,thisArg){var isArr=isArray(object)||isTypedArray(object);iteratee=getCallback(iteratee,thisArg,4);if(accumulator==null){if(isArr||isObject(object)){var Ctor=object.constructor;if(isArr){accumulator=isArray(object)?new Ctor:[]}else{accumulator=baseCreate(isFunction(Ctor)?Ctor.prototype:undefined)}}else{accumulator={}}}(isArr?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)});return accumulator}function values(object){return baseValues(object,keys(object))}function valuesIn(object){return baseValues(object,keysIn(object))}function inRange(value,start,end){start=+start||0;if(end===undefined){end=start;start=0}else{end=+end||0}return value>=nativeMin(start,end)&&value<nativeMax(start,end)}function random(min,max,floating){if(floating&&isIterateeCall(min,max,floating)){max=floating=undefined}var noMin=min==null,noMax=max==null;if(floating==null){if(noMax&&typeof min=="boolean"){floating=min;min=1}else if(typeof max=="boolean"){floating=max;noMax=true}}if(noMin&&noMax){max=1;noMax=false}min=+min||0;if(noMax){max=min;min=0}else{max=+max||0}if(floating||min%1||max%1){var rand=nativeRandom();return nativeMin(min+rand*(max-min+parseFloat("1e-"+((rand+"").length-1))),max)}return baseRandom(min,max)}var camelCase=createCompounder(function(result,word,index){word=word.toLowerCase();return result+(index?word.charAt(0).toUpperCase()+word.slice(1):word)});function capitalize(string){string=baseToString(string);return string&&string.charAt(0).toUpperCase()+string.slice(1)}function deburr(string){string=baseToString(string);return string&&string.replace(reLatin1,deburrLetter).replace(reComboMark,"")}function endsWith(string,target,position){string=baseToString(string);target=target+"";var length=string.length;position=position===undefined?length:nativeMin(position<0?0:+position||0,length);position-=target.length;return position>=0&&string.indexOf(target,position)==position}function escape(string){string=baseToString(string);return string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string;
}function escapeRegExp(string){string=baseToString(string);return string&&reHasRegExpChars.test(string)?string.replace(reRegExpChars,escapeRegExpChar):string||"(?:)"}var kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()});function pad(string,length,chars){string=baseToString(string);length=+length;var strLength=string.length;if(strLength>=length||!nativeIsFinite(length)){return string}var mid=(length-strLength)/2,leftLength=nativeFloor(mid),rightLength=nativeCeil(mid);chars=createPadding("",rightLength,chars);return chars.slice(0,leftLength)+string+chars}var padLeft=createPadDir();var padRight=createPadDir(true);function parseInt(string,radix,guard){if(guard?isIterateeCall(string,radix,guard):radix==null){radix=0}else if(radix){radix=+radix}string=trim(string);return nativeParseInt(string,radix||(reHasHexPrefix.test(string)?16:10))}function repeat(string,n){var result="";string=baseToString(string);n=+n;if(n<1||!string||!nativeIsFinite(n)){return result}do{if(n%2){result+=string}n=nativeFloor(n/2);string+=string}while(n);return result}var snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()});var startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+(word.charAt(0).toUpperCase()+word.slice(1))});function startsWith(string,target,position){string=baseToString(string);position=position==null?0:nativeMin(position<0?0:+position||0,string.length);return string.lastIndexOf(target,position)==position}function template(string,options,otherOptions){var settings=lodash.templateSettings;if(otherOptions&&isIterateeCall(string,options,otherOptions)){options=otherOptions=undefined}string=baseToString(string);options=assignWith(baseAssign({},otherOptions||options),settings,assignOwnDefaults);var imports=assignWith(baseAssign({},options.imports),settings.imports,assignOwnDefaults),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys);var isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");var sourceURL="//# sourceURL="+("sourceURL"in options?options.sourceURL:"lodash.templateSources["+ ++templateCounter+"]")+"\n";string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){isEscaping=true;source+="' +\n__e("+escapeValue+") +\n'"}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '"}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"}index=offset+match.length;return match});source+="';\n";var variable=options.variable;if(!variable){source="with (obj) {\n"+source+"\n}\n"}source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;");source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)});result.source=source;if(isError(result)){throw result}return result}function trim(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(trimmedLeftIndex(string),trimmedRightIndex(string)+1)}chars=chars+"";return string.slice(charsLeftIndex(string,chars),charsRightIndex(string,chars)+1)}function trimLeft(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(trimmedLeftIndex(string))}return string.slice(charsLeftIndex(string,chars+""))}function trimRight(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(0,trimmedRightIndex(string)+1)}return string.slice(0,charsRightIndex(string,chars+"")+1)}function trunc(string,options,guard){if(guard&&isIterateeCall(string,options,guard)){options=undefined}var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(options!=null){if(isObject(options)){var separator="separator"in options?options.separator:separator;length="length"in options?+options.length||0:length;omission="omission"in options?baseToString(options.omission):omission}else{length=+options||0}}string=baseToString(string);if(length>=string.length){return string}var end=length-omission.length;if(end<1){return omission}var result=string.slice(0,end);if(separator==null){return result+omission}if(isRegExp(separator)){if(string.slice(end).search(separator)){var match,newEnd,substring=string.slice(0,end);if(!separator.global){separator=RegExp(separator.source,(reFlags.exec(separator)||"")+"g")}separator.lastIndex=0;while(match=separator.exec(substring)){newEnd=match.index}result=result.slice(0,newEnd==null?end:newEnd)}}else if(string.indexOf(separator,end)!=end){var index=result.lastIndexOf(separator);if(index>-1){result=result.slice(0,index)}}return result+omission}function unescape(string){string=baseToString(string);return string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}function words(string,pattern,guard){if(guard&&isIterateeCall(string,pattern,guard)){pattern=undefined}string=baseToString(string);return string.match(pattern||reWords)||[]}var attempt=restParam(function(func,args){try{return func.apply(undefined,args)}catch(e){return isError(e)?e:new Error(e)}});function callback(func,thisArg,guard){if(guard&&isIterateeCall(func,thisArg,guard)){thisArg=undefined}return isObjectLike(func)?matches(func):baseCallback(func,thisArg)}function constant(value){return function(){return value}}function identity(value){return value}function matches(source){return baseMatches(baseClone(source,true))}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,true))}var method=restParam(function(path,args){return function(object){return invokePath(object,path,args)}});var methodOf=restParam(function(object,args){return function(path){return invokePath(object,path,args)}});function mixin(object,source,options){if(options==null){var isObj=isObject(source),props=isObj?keys(source):undefined,methodNames=props&&props.length?baseFunctions(source,props):undefined;if(!(methodNames?methodNames.length:isObj)){methodNames=false;options=source;source=object;object=this}}if(!methodNames){methodNames=baseFunctions(source,keys(source))}var chain=true,index=-1,isFunc=isFunction(object),length=methodNames.length;if(options===false){chain=false}else if(isObject(options)&&"chain"in options){chain=options.chain}while(++index<length){var methodName=methodNames[index],func=source[methodName];object[methodName]=func;if(isFunc){object.prototype[methodName]=function(func){return function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=arrayCopy(this.__actions__);actions.push({func:func,args:arguments,thisArg:object});result.__chain__=chainAll;return result}return func.apply(object,arrayPush([this.value()],arguments))}}(func)}}return object}function noConflict(){root._=oldDash;return this}function noop(){}function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path)}function propertyOf(object){return function(path){return baseGet(object,toPath(path),path+"")}}function range(start,end,step){if(step&&isIterateeCall(start,end,step)){end=step=undefined}start=+start||0;step=step==null?1:+step||0;if(end==null){end=start;start=0}else{end=+end||0}var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);while(++index<length){result[index]=start;start+=step}return result}function times(n,iteratee,thisArg){n=nativeFloor(n);if(n<1||!nativeIsFinite(n)){return[]}var index=-1,result=Array(nativeMin(n,MAX_ARRAY_LENGTH));iteratee=bindCallback(iteratee,thisArg,1);while(++index<n){if(index<MAX_ARRAY_LENGTH){result[index]=iteratee(index)}else{iteratee(index)}}return result}function uniqueId(prefix){var id=++idCounter;return baseToString(prefix)+id}function add(augend,addend){return(+augend||0)+(+addend||0)}var ceil=createRound("ceil");var floor=createRound("floor");var max=createExtremum(gt,NEGATIVE_INFINITY);var min=createExtremum(lt,POSITIVE_INFINITY);var round=createRound("round");function sum(collection,iteratee,thisArg){if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=undefined}iteratee=getCallback(iteratee,thisArg,3);return iteratee.length==1?arraySum(isArray(collection)?collection:toIterable(collection),iteratee):baseSum(collection,iteratee)}lodash.prototype=baseLodash.prototype;LodashWrapper.prototype=baseCreate(baseLodash.prototype);LodashWrapper.prototype.constructor=LodashWrapper;LazyWrapper.prototype=baseCreate(baseLodash.prototype);LazyWrapper.prototype.constructor=LazyWrapper;MapCache.prototype["delete"]=mapDelete;MapCache.prototype.get=mapGet;MapCache.prototype.has=mapHas;MapCache.prototype.set=mapSet;SetCache.prototype.push=cachePush;memoize.Cache=MapCache;lodash.after=after;lodash.ary=ary;lodash.assign=assign;lodash.at=at;lodash.before=before;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.callback=callback;lodash.chain=chain;lodash.chunk=chunk;lodash.compact=compact;lodash.constant=constant;lodash.countBy=countBy;lodash.create=create;lodash.curry=curry;lodash.curryRight=curryRight;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defaultsDeep=defaultsDeep;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.drop=drop;lodash.dropRight=dropRight;lodash.dropRightWhile=dropRightWhile;lodash.dropWhile=dropWhile;lodash.fill=fill;lodash.filter=filter;lodash.flatten=flatten;lodash.flattenDeep=flattenDeep;lodash.flow=flow;lodash.flowRight=flowRight;lodash.forEach=forEach;lodash.forEachRight=forEachRight;lodash.forIn=forIn;lodash.forInRight=forInRight;lodash.forOwn=forOwn;lodash.forOwnRight=forOwnRight;lodash.functions=functions;lodash.groupBy=groupBy;lodash.indexBy=indexBy;lodash.initial=initial;lodash.intersection=intersection;lodash.invert=invert;lodash.invoke=invoke;lodash.keys=keys;lodash.keysIn=keysIn;lodash.map=map;lodash.mapKeys=mapKeys;lodash.mapValues=mapValues;lodash.matches=matches;lodash.matchesProperty=matchesProperty;lodash.memoize=memoize;lodash.merge=merge;lodash.method=method;lodash.methodOf=methodOf;lodash.mixin=mixin;lodash.modArgs=modArgs;lodash.negate=negate;lodash.omit=omit;lodash.once=once;lodash.pairs=pairs;lodash.partial=partial;lodash.partialRight=partialRight;lodash.partition=partition;lodash.pick=pick;lodash.pluck=pluck;lodash.property=property;lodash.propertyOf=propertyOf;lodash.pull=pull;lodash.pullAt=pullAt;lodash.range=range;lodash.rearg=rearg;lodash.reject=reject;lodash.remove=remove;lodash.rest=rest;lodash.restParam=restParam;lodash.set=set;lodash.shuffle=shuffle;lodash.slice=slice;lodash.sortBy=sortBy;lodash.sortByAll=sortByAll;lodash.sortByOrder=sortByOrder;lodash.spread=spread;lodash.take=take;lodash.takeRight=takeRight;lodash.takeRightWhile=takeRightWhile;lodash.takeWhile=takeWhile;lodash.tap=tap;lodash.throttle=throttle;lodash.thru=thru;lodash.times=times;lodash.toArray=toArray;lodash.toPlainObject=toPlainObject;lodash.transform=transform;lodash.union=union;lodash.uniq=uniq;lodash.unzip=unzip;lodash.unzipWith=unzipWith;lodash.values=values;lodash.valuesIn=valuesIn;lodash.where=where;lodash.without=without;lodash.wrap=wrap;lodash.xor=xor;lodash.zip=zip;lodash.zipObject=zipObject;lodash.zipWith=zipWith;lodash.backflow=flowRight;lodash.collect=map;lodash.compose=flowRight;lodash.each=forEach;lodash.eachRight=forEachRight;lodash.extend=assign;lodash.iteratee=callback;lodash.methods=functions;lodash.object=zipObject;lodash.select=filter;lodash.tail=rest;lodash.unique=uniq;mixin(lodash,lodash);lodash.add=add;lodash.attempt=attempt;lodash.camelCase=camelCase;lodash.capitalize=capitalize;lodash.ceil=ceil;lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.deburr=deburr;lodash.endsWith=endsWith;lodash.escape=escape;lodash.escapeRegExp=escapeRegExp;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.findLast=findLast;lodash.findLastIndex=findLastIndex;lodash.findLastKey=findLastKey;lodash.findWhere=findWhere;lodash.first=first;lodash.floor=floor;lodash.get=get;lodash.gt=gt;lodash.gte=gte;lodash.has=has;lodash.identity=identity;lodash.includes=includes;lodash.indexOf=indexOf;lodash.inRange=inRange;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isBoolean=isBoolean;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isError=isError;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isMatch=isMatch;lodash.isNaN=isNaN;lodash.isNative=isNative;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isString=isString;lodash.isTypedArray=isTypedArray;lodash.isUndefined=isUndefined;lodash.kebabCase=kebabCase;lodash.last=last;lodash.lastIndexOf=lastIndexOf;lodash.lt=lt;lodash.lte=lte;lodash.max=max;lodash.min=min;lodash.noConflict=noConflict;lodash.noop=noop;lodash.now=now;lodash.pad=pad;lodash.padLeft=padLeft;lodash.padRight=padRight;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.repeat=repeat;lodash.result=result;lodash.round=round;lodash.runInContext=runInContext;lodash.size=size;lodash.snakeCase=snakeCase;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.sortedLastIndex=sortedLastIndex;lodash.startCase=startCase;lodash.startsWith=startsWith;lodash.sum=sum;lodash.template=template;lodash.trim=trim;lodash.trimLeft=trimLeft;lodash.trimRight=trimRight;lodash.trunc=trunc;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.words=words;lodash.all=every;lodash.any=some;lodash.contains=includes;lodash.eq=isEqual;lodash.detect=find;lodash.foldl=reduce;lodash.foldr=reduceRight;lodash.head=first;lodash.include=includes;lodash.inject=reduce;mixin(lodash,function(){var source={};baseForOwn(lodash,function(func,methodName){if(!lodash.prototype[methodName]){source[methodName]=func}});return source}(),false);lodash.sample=sample;lodash.prototype.sample=function(n){if(!this.__chain__&&n==null){return sample(this.value())}return this.thru(function(value){return sample(value,n)})};lodash.VERSION=VERSION;arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash});arrayEach(["drop","take"],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){var filtered=this.__filtered__;if(filtered&&!index){return new LazyWrapper(this)}n=n==null?1:nativeMax(nativeFloor(n)||0,0);var result=this.clone();if(filtered){result.__takeCount__=nativeMin(result.__takeCount__,n)}else{result.__views__.push({size:n,type:methodName+(result.__dir__<0?"Right":"")})}return result};LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()}});arrayEach(["filter","map","takeWhile"],function(methodName,index){var type=index+1,isFilter=type!=LAZY_MAP_FLAG;LazyWrapper.prototype[methodName]=function(iteratee,thisArg){var result=this.clone();result.__iteratees__.push({iteratee:getCallback(iteratee,thisArg,1),type:type});result.__filtered__=result.__filtered__||isFilter;return result}});arrayEach(["first","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}});arrayEach(["initial","rest"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1)}});arrayEach(["pluck","where"],function(methodName,index){var operationName=index?"filter":"map",createCallback=index?baseMatches:property;LazyWrapper.prototype[methodName]=function(value){return this[operationName](createCallback(value))}});LazyWrapper.prototype.compact=function(){return this.filter(identity)};LazyWrapper.prototype.reject=function(predicate,thisArg){predicate=getCallback(predicate,thisArg,1);return this.filter(function(value){return!predicate(value)})};LazyWrapper.prototype.slice=function(start,end){start=start==null?0:+start||0;var result=this;if(result.__filtered__&&(start>0||end<0)){return new LazyWrapper(result)}if(start<0){result=result.takeRight(-start)}else if(start){result=result.drop(start)}if(end!==undefined){end=+end||0;result=end<0?result.dropRight(-end):result.take(end-start)}return result};LazyWrapper.prototype.takeRightWhile=function(predicate,thisArg){return this.reverse().takeWhile(predicate,thisArg).reverse()};LazyWrapper.prototype.toArray=function(){return this.take(POSITIVE_INFINITY)};baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|map|reject)|While$/.test(methodName),retUnwrapped=/^(?:first|last)$/.test(methodName),lodashFunc=lodash[retUnwrapped?"take"+(methodName=="last"?"Right":""):methodName];if(!lodashFunc){return}lodash.prototype[methodName]=function(){var args=retUnwrapped?[1]:arguments,chainAll=this.__chain__,value=this.__wrapped__,isHybrid=!!this.__actions__.length,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value);if(useLazy&&checkIteratee&&typeof iteratee=="function"&&iteratee.length!=1){isLazy=useLazy=false}var interceptor=function(value){return retUnwrapped&&chainAll?lodashFunc(value,1)[0]:lodashFunc.apply(undefined,arrayPush([value],args))};var action={func:thru,args:[interceptor],thisArg:undefined},onlyLazy=isLazy&&!isHybrid;if(retUnwrapped&&!chainAll){if(onlyLazy){value=value.clone();value.__actions__.push(action);return func.call(value)}return lodashFunc.call(undefined,this.value())[0]}if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);result.__actions__.push(action);return new LodashWrapper(result,chainAll)}return this.thru(interceptor)}});arrayEach(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(methodName){var func=(/^(?:replace|split)$/.test(methodName)?stringProto:arrayProto)[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:join|pop|replace|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){return func.apply(this.value(),args)}return this[chainName](function(value){return func.apply(value,args)})}});baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name,names=realNames[key]||(realNames[key]=[]);names.push({name:methodName,func:lodashFunc})}});realNames[createHybridWrapper(undefined,BIND_KEY_FLAG).name]=[{name:"wrapper",func:undefined}];LazyWrapper.prototype.clone=lazyClone;LazyWrapper.prototype.reverse=lazyReverse;LazyWrapper.prototype.value=lazyValue;lodash.prototype.chain=wrapperChain;lodash.prototype.commit=wrapperCommit;lodash.prototype.concat=wrapperConcat;lodash.prototype.plant=wrapperPlant;lodash.prototype.reverse=wrapperReverse;lodash.prototype.toString=wrapperToString;lodash.prototype.run=lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue;lodash.prototype.collect=lodash.prototype.map;lodash.prototype.head=lodash.prototype.first;lodash.prototype.select=lodash.prototype.filter;lodash.prototype.tail=lodash.prototype.rest;return lodash}var _=runInContext();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){root._=_;define(function(){return _})}else if(freeExports&&freeModule){if(moduleExports){(freeModule.exports=_)._=_}else{freeExports._=_}}else{root._=_}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],21:[function(require,module,exports){function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}module.exports=arrayPush},{}],22:[function(require,module,exports){var keys=require("../object/keys");function assignWith(object,source,customizer){var index=-1,props=keys(source),length=props.length;while(++index<length){var key=props[index],value=object[key],result=customizer(value,source[key],key,object,source);if((result===result?result!==value:value===value)||value===undefined&&!(key in object)){object[key]=result}}return object}module.exports=assignWith},{"../object/keys":49}],23:[function(require,module,exports){var baseCopy=require("./baseCopy"),keys=require("../object/keys");function baseAssign(object,source){return source==null?object:baseCopy(source,keys(source),object)}module.exports=baseAssign},{"../object/keys":49,"./baseCopy":24}],24:[function(require,module,exports){function baseCopy(source,props,object){object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];object[key]=source[key]}return object}module.exports=baseCopy},{}],25:[function(require,module,exports){var arrayPush=require("./arrayPush"),isArguments=require("../lang/isArguments"),isArray=require("../lang/isArray"),isArrayLike=require("./isArrayLike"),isObjectLike=require("./isObjectLike");function baseFlatten(array,isDeep,isStrict,result){result||(result=[]);var index=-1,length=array.length;while(++index<length){var value=array[index];if(isObjectLike(value)&&isArrayLike(value)&&(isStrict||isArray(value)||isArguments(value))){if(isDeep){baseFlatten(value,isDeep,isStrict,result)}else{arrayPush(result,value)}}else if(!isStrict){result[result.length]=value}}return result}module.exports=baseFlatten},{"../lang/isArguments":43,"../lang/isArray":44,"./arrayPush":21,"./isArrayLike":34,"./isObjectLike":38}],26:[function(require,module,exports){var createBaseFor=require("./createBaseFor");var baseFor=createBaseFor();module.exports=baseFor},{"./createBaseFor":31}],27:[function(require,module,exports){var baseFor=require("./baseFor"),keysIn=require("../object/keysIn");function baseForIn(object,iteratee){return baseFor(object,iteratee,keysIn)}module.exports=baseForIn},{"../object/keysIn":50,"./baseFor":26}],28:[function(require,module,exports){function baseProperty(key){return function(object){return object==null?undefined:object[key]}}module.exports=baseProperty},{}],29:[function(require,module,exports){var identity=require("../utility/identity");function bindCallback(func,thisArg,argCount){if(typeof func!="function"){return identity}if(thisArg===undefined){return func}switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}module.exports=bindCallback},{"../utility/identity":52}],30:[function(require,module,exports){var bindCallback=require("./bindCallback"),isIterateeCall=require("./isIterateeCall"),restParam=require("../function/restParam");function createAssigner(assigner){return restParam(function(object,sources){var index=-1,length=object==null?0:sources.length,customizer=length>2?sources[length-2]:undefined,guard=length>2?sources[2]:undefined,thisArg=length>1?sources[length-1]:undefined;if(typeof customizer=="function"){customizer=bindCallback(customizer,thisArg,5);length-=2}else{customizer=typeof thisArg=="function"?thisArg:undefined;length-=customizer?1:0}if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}while(++index<length){var source=sources[index];if(source){assigner(object,source,customizer)}}return object})}module.exports=createAssigner},{"../function/restParam":19,"./bindCallback":29,"./isIterateeCall":36}],31:[function(require,module,exports){var toObject=require("./toObject");function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var iterable=toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;while(fromRight?index--:++index<length){var key=props[index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}module.exports=createBaseFor},{"./toObject":42}],32:[function(require,module,exports){var baseProperty=require("./baseProperty");var getLength=baseProperty("length");module.exports=getLength},{"./baseProperty":28}],33:[function(require,module,exports){var isNative=require("../lang/isNative");function getNative(object,key){var value=object==null?undefined:object[key];return isNative(value)?value:undefined}module.exports=getNative},{"../lang/isNative":46}],34:[function(require,module,exports){var getLength=require("./getLength"),isLength=require("./isLength");function isArrayLike(value){return value!=null&&isLength(getLength(value))}module.exports=isArrayLike},{"./getLength":32,"./isLength":37}],35:[function(require,module,exports){var reIsUint=/^\d+$/;var MAX_SAFE_INTEGER=9007199254740991;function isIndex(value,length){value=typeof value=="number"||reIsUint.test(value)?+value:-1;length=length==null?MAX_SAFE_INTEGER:length;return value>-1&&value%1==0&&value<length}module.exports=isIndex},{}],36:[function(require,module,exports){var isArrayLike=require("./isArrayLike"),isIndex=require("./isIndex"),isObject=require("../lang/isObject");function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){var other=object[index];return value===value?value===other:other!==other}return false}module.exports=isIterateeCall},{"../lang/isObject":47,"./isArrayLike":34,"./isIndex":35}],37:[function(require,module,exports){var MAX_SAFE_INTEGER=9007199254740991;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}module.exports=isLength},{}],38:[function(require,module,exports){function isObjectLike(value){return!!value&&typeof value=="object"}module.exports=isObjectLike},{}],39:[function(require,module,exports){var toObject=require("./toObject");function pickByArray(object,props){object=toObject(object);var index=-1,length=props.length,result={};while(++index<length){var key=props[index];if(key in object){result[key]=object[key]}}return result}module.exports=pickByArray},{"./toObject":42}],40:[function(require,module,exports){var baseForIn=require("./baseForIn");function pickByCallback(object,predicate){var result={};baseForIn(object,function(value,key,object){if(predicate(value,key,object)){result[key]=value}});return result}module.exports=pickByCallback},{"./baseForIn":27}],41:[function(require,module,exports){var isArguments=require("../lang/isArguments"),isArray=require("../lang/isArray"),isIndex=require("./isIndex"),isLength=require("./isLength"),keysIn=require("../object/keysIn");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function shimKeys(object){var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length;var allowIndexes=!!length&&isLength(length)&&(isArray(object)||isArguments(object));var index=-1,result=[];while(++index<propsLength){var key=props[index];if(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key)){result.push(key)}}return result}module.exports=shimKeys},{"../lang/isArguments":43,"../lang/isArray":44,"../object/keysIn":50,"./isIndex":35,"./isLength":37}],42:[function(require,module,exports){var isObject=require("../lang/isObject");function toObject(value){return isObject(value)?value:Object(value)}module.exports=toObject},{"../lang/isObject":47}],43:[function(require,module,exports){var isArrayLike=require("../internal/isArrayLike"),isObjectLike=require("../internal/isObjectLike");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var propertyIsEnumerable=objectProto.propertyIsEnumerable;function isArguments(value){return isObjectLike(value)&&isArrayLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")}module.exports=isArguments},{"../internal/isArrayLike":34,"../internal/isObjectLike":38}],44:[function(require,module,exports){var getNative=require("../internal/getNative"),isLength=require("../internal/isLength"),isObjectLike=require("../internal/isObjectLike");var arrayTag="[object Array]";var objectProto=Object.prototype;var objToString=objectProto.toString;var nativeIsArray=getNative(Array,"isArray");var isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag};module.exports=isArray},{"../internal/getNative":33,"../internal/isLength":37,"../internal/isObjectLike":38}],45:[function(require,module,exports){var isObject=require("./isObject");var funcTag="[object Function]";var objectProto=Object.prototype;var objToString=objectProto.toString;function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}module.exports=isFunction},{"./isObject":47}],46:[function(require,module,exports){var isFunction=require("./isFunction"),isObjectLike=require("../internal/isObjectLike");var reIsHostCtor=/^\[object .+?Constructor\]$/;var objectProto=Object.prototype;var fnToString=Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function isNative(value){if(value==null){return false}if(isFunction(value)){return reIsNative.test(fnToString.call(value))}return isObjectLike(value)&&reIsHostCtor.test(value)}module.exports=isNative},{"../internal/isObjectLike":38,"./isFunction":45}],47:[function(require,module,exports){function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}module.exports=isObject},{}],48:[function(require,module,exports){var assignWith=require("../internal/assignWith"),baseAssign=require("../internal/baseAssign"),createAssigner=require("../internal/createAssigner");var assign=createAssigner(function(object,source,customizer){return customizer?assignWith(object,source,customizer):baseAssign(object,source)});module.exports=assign},{"../internal/assignWith":22,"../internal/baseAssign":23,"../internal/createAssigner":30}],49:[function(require,module,exports){var getNative=require("../internal/getNative"),isArrayLike=require("../internal/isArrayLike"),isObject=require("../lang/isObject"),shimKeys=require("../internal/shimKeys");var nativeKeys=getNative(Object,"keys");var keys=!nativeKeys?shimKeys:function(object){var Ctor=object==null?undefined:object.constructor;if(typeof Ctor=="function"&&Ctor.prototype===object||typeof object!="function"&&isArrayLike(object)){return shimKeys(object)}return isObject(object)?nativeKeys(object):[]};module.exports=keys},{"../internal/getNative":33,"../internal/isArrayLike":34,"../internal/shimKeys":41,"../lang/isObject":47}],50:[function(require,module,exports){var isArguments=require("../lang/isArguments"),isArray=require("../lang/isArray"),isIndex=require("../internal/isIndex"),isLength=require("../internal/isLength"),isObject=require("../lang/isObject");
var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function keysIn(object){if(object==null){return[]}if(!isObject(object)){object=Object(object)}var length=object.length;length=length&&isLength(length)&&(isArray(object)||isArguments(object))&&length||0;var Ctor=object.constructor,index=-1,isProto=typeof Ctor=="function"&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;while(++index<length){result[index]=index+""}for(var key in object){if(!(skipIndexes&&isIndex(key,length))&&!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}module.exports=keysIn},{"../internal/isIndex":35,"../internal/isLength":37,"../lang/isArguments":43,"../lang/isArray":44,"../lang/isObject":47}],51:[function(require,module,exports){var baseFlatten=require("../internal/baseFlatten"),bindCallback=require("../internal/bindCallback"),pickByArray=require("../internal/pickByArray"),pickByCallback=require("../internal/pickByCallback"),restParam=require("../function/restParam");var pick=restParam(function(object,props){if(object==null){return{}}return typeof props[0]=="function"?pickByCallback(object,bindCallback(props[0],props[1],3)):pickByArray(object,baseFlatten(props))});module.exports=pick},{"../function/restParam":19,"../internal/baseFlatten":25,"../internal/bindCallback":29,"../internal/pickByArray":39,"../internal/pickByCallback":40}],52:[function(require,module,exports){function identity(value){return value}module.exports=identity},{}],53:[function(require,module,exports){"use strict";module.exports=Number.isNaN||function(x){return x!==x}},{}],54:[function(require,module,exports){(function(process){(function(){var getNanoSeconds,hrtime,loadTime;if(typeof performance!=="undefined"&&performance!==null&&performance.now){module.exports=function(){return performance.now()}}else if(typeof process!=="undefined"&&process!==null&&process.hrtime){module.exports=function(){return(getNanoSeconds()-loadTime)/1e6};hrtime=process.hrtime;getNanoSeconds=function(){var hr;hr=hrtime();return hr[0]*1e9+hr[1]};loadTime=getNanoSeconds()}else if(Date.now){module.exports=function(){return Date.now()-loadTime};loadTime=Date.now()}else{module.exports=function(){return(new Date).getTime()-loadTime};loadTime=(new Date).getTime()}}).call(this)}).call(this,require("_process"))},{_process:56}],55:[function(require,module,exports){"use strict";var isPlainObject=require("is-plain-object");isPlainObject="default"in isPlainObject?isPlainObject["default"]:isPlainObject;var has=function has(o,p){return Object.prototype.hasOwnProperty.call(o,p)};var toArray=function toArray(v){return Array.prototype.slice.call(v,0)};function merge(a,b,safe){var val=undefined,isobj=undefined;if(isPlainObject(a)){val={};for(var k in a){if(!has(a,k))continue;val[k]=a[k]}isobj=true}else{val=a;isobj=false}var undef=typeof val==="undefined";if(typeof b!=="undefined"){if(isPlainObject(b)){if(!isobj){if(safe&&!undef)return val;val={}}for(var k in b){if(!has(b,k))continue;val[k]=merge(val[k],b[k],safe)}}else if(!safe||undef){val=b}}return val}function mergeAll(safe,obj){var args=toArray(arguments).slice(2);for(var i=0;i<args.length;i++){obj=merge(obj,args[i],safe)}return obj}merge.extend=mergeAll.bind(null,false);merge.defaults=mergeAll.bind(null,true);module.exports=merge},{"is-plain-object":16}],56:[function(require,module,exports){var process=module.exports={};var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=setTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;clearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){setTimeout(drainQueue,0)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],57:[function(require,module,exports){var now=require("performance-now"),global=typeof window==="undefined"?{}:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=global["request"+suffix],caf=global["cancel"+suffix]||global["cancelRequest"+suffix];for(var i=0;i<vendors.length&&!raf;i++){raf=global[vendors[i]+"Request"+suffix];caf=global[vendors[i]+"Cancel"+suffix]||global[vendors[i]+"CancelRequest"+suffix]}if(!raf||!caf){var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(callback){if(queue.length===0){var _now=now(),next=Math.max(0,frameDuration-(_now-last));last=next+_now;setTimeout(function(){var cp=queue.slice(0);queue.length=0;for(var i=0;i<cp.length;i++){if(!cp[i].cancelled){try{cp[i].callback(last)}catch(e){setTimeout(function(){throw e},0)}}}},Math.round(next))}queue.push({handle:++id,callback:callback,cancelled:false});return id};caf=function(handle){for(var i=0;i<queue.length;i++){if(queue[i].handle===handle){queue[i].cancelled=true}}}}module.exports=function(fn){return raf.call(global,fn)};module.exports.cancel=function(){caf.apply(global,arguments)}},{"performance-now":54}],58:[function(require,module,exports){"use strict";var isFinite=require("is-finite");module.exports=function(str,n){if(typeof str!=="string"){throw new TypeError("Expected `input` to be a string")}if(n<0||!isFinite(n)){throw new TypeError("Expected `count` to be a positive finite number")}var ret="";do{if(n&1){ret+=str}str+=str}while(n>>=1);return ret}},{"is-finite":15}],59:[function(require,module,exports){module.exports=function(obj){if(!obj||typeof obj!=="object")return obj;var copy;if(isArray(obj)){var len=obj.length;copy=Array(len);for(var i=0;i<len;i++){copy[i]=obj[i]}}else{var keys=objectKeys(obj);copy={};for(var i=0,l=keys.length;i<l;i++){var key=keys[i];copy[key]=obj[key]}}return copy};var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){if({}.hasOwnProperty.call(obj,key))keys.push(key)}return keys};var isArray=Array.isArray||function(xs){return{}.toString.call(xs)==="[object Array]"}},{}],60:[function(require,module,exports){{var util=require("./util");function ArraySet(){this._array=[];this._set={}}ArraySet.fromArray=function ArraySet_fromArray(aArray,aAllowDuplicates){var set=new ArraySet;for(var i=0,len=aArray.length;i<len;i++){set.add(aArray[i],aAllowDuplicates)}return set};ArraySet.prototype.size=function ArraySet_size(){return Object.getOwnPropertyNames(this._set).length};ArraySet.prototype.add=function ArraySet_add(aStr,aAllowDuplicates){var sStr=util.toSetString(aStr);var isDuplicate=this._set.hasOwnProperty(sStr);var idx=this._array.length;if(!isDuplicate||aAllowDuplicates){this._array.push(aStr)}if(!isDuplicate){this._set[sStr]=idx}};ArraySet.prototype.has=function ArraySet_has(aStr){var sStr=util.toSetString(aStr);return this._set.hasOwnProperty(sStr)};ArraySet.prototype.indexOf=function ArraySet_indexOf(aStr){var sStr=util.toSetString(aStr);if(this._set.hasOwnProperty(sStr)){return this._set[sStr]}throw new Error('"'+aStr+'" is not in the set.')};ArraySet.prototype.at=function ArraySet_at(aIdx){if(aIdx>=0&&aIdx<this._array.length){return this._array[aIdx]}throw new Error("No element indexed by "+aIdx)};ArraySet.prototype.toArray=function ArraySet_toArray(){return this._array.slice()};exports.ArraySet=ArraySet}},{"./util":69}],61:[function(require,module,exports){{var base64=require("./base64");var VLQ_BASE_SHIFT=5;var VLQ_BASE=1<<VLQ_BASE_SHIFT;var VLQ_BASE_MASK=VLQ_BASE-1;var VLQ_CONTINUATION_BIT=VLQ_BASE;function toVLQSigned(aValue){return aValue<0?(-aValue<<1)+1:(aValue<<1)+0}function fromVLQSigned(aValue){var isNegative=(aValue&1)===1;var shifted=aValue>>1;return isNegative?-shifted:shifted}exports.encode=function base64VLQ_encode(aValue){var encoded="";var digit;var vlq=toVLQSigned(aValue);do{digit=vlq&VLQ_BASE_MASK;vlq>>>=VLQ_BASE_SHIFT;if(vlq>0){digit|=VLQ_CONTINUATION_BIT}encoded+=base64.encode(digit)}while(vlq>0);return encoded};exports.decode=function base64VLQ_decode(aStr,aIndex,aOutParam){var strLen=aStr.length;var result=0;var shift=0;var continuation,digit;do{if(aIndex>=strLen){throw new Error("Expected more digits in base 64 VLQ value.")}digit=base64.decode(aStr.charCodeAt(aIndex++));if(digit===-1){throw new Error("Invalid base64 digit: "+aStr.charAt(aIndex-1))}continuation=!!(digit&VLQ_CONTINUATION_BIT);digit&=VLQ_BASE_MASK;result=result+(digit<<shift);shift+=VLQ_BASE_SHIFT}while(continuation);aOutParam.value=fromVLQSigned(result);aOutParam.rest=aIndex}}},{"./base64":62}],62:[function(require,module,exports){{var intToCharMap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");exports.encode=function(number){if(0<=number&&number<intToCharMap.length){return intToCharMap[number]}throw new TypeError("Must be between 0 and 63: "+number)};exports.decode=function(charCode){var bigA=65;var bigZ=90;var littleA=97;var littleZ=122;var zero=48;var nine=57;var plus=43;var slash=47;var littleOffset=26;var numberOffset=52;if(bigA<=charCode&&charCode<=bigZ){return charCode-bigA}if(littleA<=charCode&&charCode<=littleZ){return charCode-littleA+littleOffset}if(zero<=charCode&&charCode<=nine){return charCode-zero+numberOffset}if(charCode==plus){return 62}if(charCode==slash){return 63}return-1}}},{}],63:[function(require,module,exports){{exports.GREATEST_LOWER_BOUND=1;exports.LEAST_UPPER_BOUND=2;function recursiveSearch(aLow,aHigh,aNeedle,aHaystack,aCompare,aBias){var mid=Math.floor((aHigh-aLow)/2)+aLow;var cmp=aCompare(aNeedle,aHaystack[mid],true);if(cmp===0){return mid}else if(cmp>0){if(aHigh-mid>1){return recursiveSearch(mid,aHigh,aNeedle,aHaystack,aCompare,aBias)}if(aBias==exports.LEAST_UPPER_BOUND){return aHigh<aHaystack.length?aHigh:-1}else{return mid}}else{if(mid-aLow>1){return recursiveSearch(aLow,mid,aNeedle,aHaystack,aCompare,aBias)}if(aBias==exports.LEAST_UPPER_BOUND){return mid}else{return aLow<0?-1:aLow}}}exports.search=function search(aNeedle,aHaystack,aCompare,aBias){if(aHaystack.length===0){return-1}var index=recursiveSearch(-1,aHaystack.length,aNeedle,aHaystack,aCompare,aBias||exports.GREATEST_LOWER_BOUND);if(index<0){return-1}while(index-1>=0){if(aCompare(aHaystack[index],aHaystack[index-1],true)!==0){break}--index}return index}}},{}],64:[function(require,module,exports){{var util=require("./util");function generatedPositionAfter(mappingA,mappingB){var lineA=mappingA.generatedLine;var lineB=mappingB.generatedLine;var columnA=mappingA.generatedColumn;var columnB=mappingB.generatedColumn;return lineB>lineA||lineB==lineA&&columnB>=columnA||util.compareByGeneratedPositionsInflated(mappingA,mappingB)<=0}function MappingList(){this._array=[];this._sorted=true;this._last={generatedLine:-1,generatedColumn:0}}MappingList.prototype.unsortedForEach=function MappingList_forEach(aCallback,aThisArg){this._array.forEach(aCallback,aThisArg)};MappingList.prototype.add=function MappingList_add(aMapping){if(generatedPositionAfter(this._last,aMapping)){this._last=aMapping;this._array.push(aMapping)}else{this._sorted=false;this._array.push(aMapping)}};MappingList.prototype.toArray=function MappingList_toArray(){if(!this._sorted){this._array.sort(util.compareByGeneratedPositionsInflated);this._sorted=true}return this._array};exports.MappingList=MappingList}},{"./util":69}],65:[function(require,module,exports){{function swap(ary,x,y){var temp=ary[x];ary[x]=ary[y];ary[y]=temp}function randomIntInRange(low,high){return Math.round(low+Math.random()*(high-low))}function doQuickSort(ary,comparator,p,r){if(p<r){var pivotIndex=randomIntInRange(p,r);var i=p-1;swap(ary,pivotIndex,r);var pivot=ary[r];for(var j=p;j<r;j++){if(comparator(ary[j],pivot)<=0){i+=1;swap(ary,i,j)}}swap(ary,i+1,j);var q=i+1;doQuickSort(ary,comparator,p,q-1);doQuickSort(ary,comparator,q+1,r)}}exports.quickSort=function(ary,comparator){doQuickSort(ary,comparator,0,ary.length-1)}}},{}],66:[function(require,module,exports){{var util=require("./util");var binarySearch=require("./binary-search");var ArraySet=require("./array-set").ArraySet;var base64VLQ=require("./base64-vlq");var quickSort=require("./quick-sort").quickSort;function SourceMapConsumer(aSourceMap){var sourceMap=aSourceMap;if(typeof aSourceMap==="string"){sourceMap=JSON.parse(aSourceMap.replace(/^\)\]\}'/,""))}return sourceMap.sections!=null?new IndexedSourceMapConsumer(sourceMap):new BasicSourceMapConsumer(sourceMap)}SourceMapConsumer.fromSourceMap=function(aSourceMap){return BasicSourceMapConsumer.fromSourceMap(aSourceMap)};SourceMapConsumer.prototype._version=3;SourceMapConsumer.prototype.__generatedMappings=null;Object.defineProperty(SourceMapConsumer.prototype,"_generatedMappings",{get:function(){if(!this.__generatedMappings){this._parseMappings(this._mappings,this.sourceRoot)}return this.__generatedMappings}});SourceMapConsumer.prototype.__originalMappings=null;Object.defineProperty(SourceMapConsumer.prototype,"_originalMappings",{get:function(){if(!this.__originalMappings){this._parseMappings(this._mappings,this.sourceRoot)}return this.__originalMappings}});SourceMapConsumer.prototype._charIsMappingSeparator=function SourceMapConsumer_charIsMappingSeparator(aStr,index){var c=aStr.charAt(index);return c===";"||c===","};SourceMapConsumer.prototype._parseMappings=function SourceMapConsumer_parseMappings(aStr,aSourceRoot){throw new Error("Subclasses must implement _parseMappings")};SourceMapConsumer.GENERATED_ORDER=1;SourceMapConsumer.ORIGINAL_ORDER=2;SourceMapConsumer.GREATEST_LOWER_BOUND=1;SourceMapConsumer.LEAST_UPPER_BOUND=2;SourceMapConsumer.prototype.eachMapping=function SourceMapConsumer_eachMapping(aCallback,aContext,aOrder){var context=aContext||null;var order=aOrder||SourceMapConsumer.GENERATED_ORDER;var mappings;switch(order){case SourceMapConsumer.GENERATED_ORDER:mappings=this._generatedMappings;break;case SourceMapConsumer.ORIGINAL_ORDER:mappings=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var sourceRoot=this.sourceRoot;mappings.map(function(mapping){var source=mapping.source===null?null:this._sources.at(mapping.source);if(source!=null&&sourceRoot!=null){source=util.join(sourceRoot,source)}return{source:source,generatedLine:mapping.generatedLine,generatedColumn:mapping.generatedColumn,originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:mapping.name===null?null:this._names.at(mapping.name)}},this).forEach(aCallback,context)};SourceMapConsumer.prototype.allGeneratedPositionsFor=function SourceMapConsumer_allGeneratedPositionsFor(aArgs){var line=util.getArg(aArgs,"line");var needle={source:util.getArg(aArgs,"source"),originalLine:line,originalColumn:util.getArg(aArgs,"column",0)};if(this.sourceRoot!=null){needle.source=util.relative(this.sourceRoot,needle.source)}if(!this._sources.has(needle.source)){return[]}needle.source=this._sources.indexOf(needle.source);var mappings=[];var index=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions,binarySearch.LEAST_UPPER_BOUND);if(index>=0){var mapping=this._originalMappings[index];if(aArgs.column===undefined){var originalLine=mapping.originalLine;while(mapping&&mapping.originalLine===originalLine){mappings.push({line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)});mapping=this._originalMappings[++index]}}else{var originalColumn=mapping.originalColumn;while(mapping&&mapping.originalLine===line&&mapping.originalColumn==originalColumn){mappings.push({line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)});mapping=this._originalMappings[++index]}}}return mappings};exports.SourceMapConsumer=SourceMapConsumer;function BasicSourceMapConsumer(aSourceMap){var sourceMap=aSourceMap;if(typeof aSourceMap==="string"){sourceMap=JSON.parse(aSourceMap.replace(/^\)\]\}'/,""))}var version=util.getArg(sourceMap,"version");var sources=util.getArg(sourceMap,"sources");var names=util.getArg(sourceMap,"names",[]);var sourceRoot=util.getArg(sourceMap,"sourceRoot",null);var sourcesContent=util.getArg(sourceMap,"sourcesContent",null);var mappings=util.getArg(sourceMap,"mappings");var file=util.getArg(sourceMap,"file",null);if(version!=this._version){throw new Error("Unsupported version: "+version)}sources=sources.map(util.normalize).map(function(source){return sourceRoot&&util.isAbsolute(sourceRoot)&&util.isAbsolute(source)?util.relative(sourceRoot,source):source});this._names=ArraySet.fromArray(names,true);this._sources=ArraySet.fromArray(sources,true);this.sourceRoot=sourceRoot;this.sourcesContent=sourcesContent;this._mappings=mappings;this.file=file}BasicSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype);BasicSourceMapConsumer.prototype.consumer=SourceMapConsumer;BasicSourceMapConsumer.fromSourceMap=function SourceMapConsumer_fromSourceMap(aSourceMap){var smc=Object.create(BasicSourceMapConsumer.prototype);var names=smc._names=ArraySet.fromArray(aSourceMap._names.toArray(),true);var sources=smc._sources=ArraySet.fromArray(aSourceMap._sources.toArray(),true);smc.sourceRoot=aSourceMap._sourceRoot;smc.sourcesContent=aSourceMap._generateSourcesContent(smc._sources.toArray(),smc.sourceRoot);smc.file=aSourceMap._file;var generatedMappings=aSourceMap._mappings.toArray().slice();var destGeneratedMappings=smc.__generatedMappings=[];var destOriginalMappings=smc.__originalMappings=[];for(var i=0,length=generatedMappings.length;i<length;i++){var srcMapping=generatedMappings[i];var destMapping=new Mapping;destMapping.generatedLine=srcMapping.generatedLine;destMapping.generatedColumn=srcMapping.generatedColumn;if(srcMapping.source){destMapping.source=sources.indexOf(srcMapping.source);destMapping.originalLine=srcMapping.originalLine;destMapping.originalColumn=srcMapping.originalColumn;if(srcMapping.name){destMapping.name=names.indexOf(srcMapping.name)}destOriginalMappings.push(destMapping)}destGeneratedMappings.push(destMapping)}quickSort(smc.__originalMappings,util.compareByOriginalPositions);return smc};BasicSourceMapConsumer.prototype._version=3;Object.defineProperty(BasicSourceMapConsumer.prototype,"sources",{get:function(){return this._sources.toArray().map(function(s){return this.sourceRoot!=null?util.join(this.sourceRoot,s):s},this)}});function Mapping(){this.generatedLine=0;this.generatedColumn=0;this.source=null;this.originalLine=null;this.originalColumn=null;this.name=null}BasicSourceMapConsumer.prototype._parseMappings=function SourceMapConsumer_parseMappings(aStr,aSourceRoot){var generatedLine=1;var previousGeneratedColumn=0;var previousOriginalLine=0;var previousOriginalColumn=0;var previousSource=0;var previousName=0;var length=aStr.length;var index=0;var cachedSegments={};var temp={};var originalMappings=[];var generatedMappings=[];var mapping,str,segment,end,value;while(index<length){if(aStr.charAt(index)===";"){generatedLine++;index++;previousGeneratedColumn=0}else if(aStr.charAt(index)===","){index++}else{mapping=new Mapping;mapping.generatedLine=generatedLine;for(end=index;end<length;end++){if(this._charIsMappingSeparator(aStr,end)){break}}str=aStr.slice(index,end);segment=cachedSegments[str];if(segment){index+=str.length}else{segment=[];while(index<end){base64VLQ.decode(aStr,index,temp);value=temp.value;index=temp.rest;segment.push(value)}if(segment.length===2){throw new Error("Found a source, but no line and column")}if(segment.length===3){throw new Error("Found a source and line, but no column")}cachedSegments[str]=segment}mapping.generatedColumn=previousGeneratedColumn+segment[0];previousGeneratedColumn=mapping.generatedColumn;if(segment.length>1){mapping.source=previousSource+segment[1];previousSource+=segment[1];mapping.originalLine=previousOriginalLine+segment[2];previousOriginalLine=mapping.originalLine;mapping.originalLine+=1;mapping.originalColumn=previousOriginalColumn+segment[3];previousOriginalColumn=mapping.originalColumn;if(segment.length>4){mapping.name=previousName+segment[4];previousName+=segment[4]}}generatedMappings.push(mapping);if(typeof mapping.originalLine==="number"){originalMappings.push(mapping)}}}quickSort(generatedMappings,util.compareByGeneratedPositionsDeflated);this.__generatedMappings=generatedMappings;quickSort(originalMappings,util.compareByOriginalPositions);this.__originalMappings=originalMappings};BasicSourceMapConsumer.prototype._findMapping=function SourceMapConsumer_findMapping(aNeedle,aMappings,aLineName,aColumnName,aComparator,aBias){if(aNeedle[aLineName]<=0){throw new TypeError("Line must be greater than or equal to 1, got "+aNeedle[aLineName])}if(aNeedle[aColumnName]<0){throw new TypeError("Column must be greater than or equal to 0, got "+aNeedle[aColumnName])}return binarySearch.search(aNeedle,aMappings,aComparator,aBias)};BasicSourceMapConsumer.prototype.computeColumnSpans=function SourceMapConsumer_computeColumnSpans(){for(var index=0;index<this._generatedMappings.length;++index){var mapping=this._generatedMappings[index];if(index+1<this._generatedMappings.length){var nextMapping=this._generatedMappings[index+1];if(mapping.generatedLine===nextMapping.generatedLine){mapping.lastGeneratedColumn=nextMapping.generatedColumn-1;continue}}mapping.lastGeneratedColumn=Infinity}};BasicSourceMapConsumer.prototype.originalPositionFor=function SourceMapConsumer_originalPositionFor(aArgs){var needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")};var index=this._findMapping(needle,this._generatedMappings,"generatedLine","generatedColumn",util.compareByGeneratedPositionsDeflated,util.getArg(aArgs,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(index>=0){var mapping=this._generatedMappings[index];if(mapping.generatedLine===needle.generatedLine){var source=util.getArg(mapping,"source",null);if(source!==null){source=this._sources.at(source);if(this.sourceRoot!=null){source=util.join(this.sourceRoot,source)}}var name=util.getArg(mapping,"name",null);if(name!==null){name=this._names.at(name)}return{source:source,line:util.getArg(mapping,"originalLine",null),column:util.getArg(mapping,"originalColumn",null),name:name}}}return{source:null,line:null,column:null,name:null}};BasicSourceMapConsumer.prototype.hasContentsOfAllSources=function BasicSourceMapConsumer_hasContentsOfAllSources(){if(!this.sourcesContent){return false}return this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(sc){return sc==null})};BasicSourceMapConsumer.prototype.sourceContentFor=function SourceMapConsumer_sourceContentFor(aSource,nullOnMissing){if(!this.sourcesContent){return null}if(this.sourceRoot!=null){aSource=util.relative(this.sourceRoot,aSource)}if(this._sources.has(aSource)){return this.sourcesContent[this._sources.indexOf(aSource)]}var url;if(this.sourceRoot!=null&&(url=util.urlParse(this.sourceRoot))){var fileUriAbsPath=aSource.replace(/^file:\/\//,"");if(url.scheme=="file"&&this._sources.has(fileUriAbsPath)){return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]}if((!url.path||url.path=="/")&&this._sources.has("/"+aSource)){return this.sourcesContent[this._sources.indexOf("/"+aSource)]}}if(nullOnMissing){return null}else{throw new Error('"'+aSource+'" is not in the SourceMap.')}};BasicSourceMapConsumer.prototype.generatedPositionFor=function SourceMapConsumer_generatedPositionFor(aArgs){var source=util.getArg(aArgs,"source");if(this.sourceRoot!=null){source=util.relative(this.sourceRoot,source)}if(!this._sources.has(source)){return{line:null,column:null,lastColumn:null}}source=this._sources.indexOf(source);var needle={source:source,originalLine:util.getArg(aArgs,"line"),originalColumn:util.getArg(aArgs,"column")};var index=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions,util.getArg(aArgs,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(index>=0){var mapping=this._originalMappings[index];if(mapping.source===needle.source){return{line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)}}}return{line:null,column:null,lastColumn:null}};exports.BasicSourceMapConsumer=BasicSourceMapConsumer;function IndexedSourceMapConsumer(aSourceMap){var sourceMap=aSourceMap;if(typeof aSourceMap==="string"){sourceMap=JSON.parse(aSourceMap.replace(/^\)\]\}'/,""))}var version=util.getArg(sourceMap,"version");var sections=util.getArg(sourceMap,"sections");if(version!=this._version){throw new Error("Unsupported version: "+version)}this._sources=new ArraySet;this._names=new ArraySet;var lastOffset={line:-1,column:0};this._sections=sections.map(function(s){if(s.url){throw new Error("Support for url field in sections not implemented.")}var offset=util.getArg(s,"offset");var offsetLine=util.getArg(offset,"line");var offsetColumn=util.getArg(offset,"column");if(offsetLine<lastOffset.line||offsetLine===lastOffset.line&&offsetColumn<lastOffset.column){throw new Error("Section offsets must be ordered and non-overlapping.")}lastOffset=offset;return{generatedOffset:{generatedLine:offsetLine+1,generatedColumn:offsetColumn+1},consumer:new SourceMapConsumer(util.getArg(s,"map"))}})}IndexedSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype);IndexedSourceMapConsumer.prototype.constructor=SourceMapConsumer;IndexedSourceMapConsumer.prototype._version=3;Object.defineProperty(IndexedSourceMapConsumer.prototype,"sources",{get:function(){var sources=[];for(var i=0;i<this._sections.length;i++){for(var j=0;j<this._sections[i].consumer.sources.length;j++){sources.push(this._sections[i].consumer.sources[j])}}return sources}});IndexedSourceMapConsumer.prototype.originalPositionFor=function IndexedSourceMapConsumer_originalPositionFor(aArgs){var needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")};var sectionIndex=binarySearch.search(needle,this._sections,function(needle,section){var cmp=needle.generatedLine-section.generatedOffset.generatedLine;if(cmp){return cmp}return needle.generatedColumn-section.generatedOffset.generatedColumn});var section=this._sections[sectionIndex];if(!section){return{source:null,line:null,column:null,name:null}}return section.consumer.originalPositionFor({line:needle.generatedLine-(section.generatedOffset.generatedLine-1),column:needle.generatedColumn-(section.generatedOffset.generatedLine===needle.generatedLine?section.generatedOffset.generatedColumn-1:0),bias:aArgs.bias})};IndexedSourceMapConsumer.prototype.hasContentsOfAllSources=function IndexedSourceMapConsumer_hasContentsOfAllSources(){return this._sections.every(function(s){return s.consumer.hasContentsOfAllSources()})};IndexedSourceMapConsumer.prototype.sourceContentFor=function IndexedSourceMapConsumer_sourceContentFor(aSource,nullOnMissing){for(var i=0;i<this._sections.length;i++){var section=this._sections[i];var content=section.consumer.sourceContentFor(aSource,true);if(content){return content}}if(nullOnMissing){return null}else{throw new Error('"'+aSource+'" is not in the SourceMap.')}};IndexedSourceMapConsumer.prototype.generatedPositionFor=function IndexedSourceMapConsumer_generatedPositionFor(aArgs){for(var i=0;i<this._sections.length;i++){var section=this._sections[i];if(section.consumer.sources.indexOf(util.getArg(aArgs,"source"))===-1){continue}var generatedPosition=section.consumer.generatedPositionFor(aArgs);if(generatedPosition){var ret={line:generatedPosition.line+(section.generatedOffset.generatedLine-1),column:generatedPosition.column+(section.generatedOffset.generatedLine===generatedPosition.line?section.generatedOffset.generatedColumn-1:0)};return ret}}return{line:null,column:null}};IndexedSourceMapConsumer.prototype._parseMappings=function IndexedSourceMapConsumer_parseMappings(aStr,aSourceRoot){this.__generatedMappings=[];this.__originalMappings=[];for(var i=0;i<this._sections.length;i++){var section=this._sections[i];var sectionMappings=section.consumer._generatedMappings;for(var j=0;j<sectionMappings.length;j++){var mapping=sectionMappings[j];var source=section.consumer._sources.at(mapping.source);if(section.consumer.sourceRoot!==null){source=util.join(section.consumer.sourceRoot,source)}this._sources.add(source);source=this._sources.indexOf(source);var name=section.consumer._names.at(mapping.name);this._names.add(name);name=this._names.indexOf(name);var adjustedMapping={source:source,generatedLine:mapping.generatedLine+(section.generatedOffset.generatedLine-1),generatedColumn:mapping.generatedColumn+(section.generatedOffset.generatedLine===mapping.generatedLine?section.generatedOffset.generatedColumn-1:0),originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:name};this.__generatedMappings.push(adjustedMapping);if(typeof adjustedMapping.originalLine==="number"){this.__originalMappings.push(adjustedMapping)}}}quickSort(this.__generatedMappings,util.compareByGeneratedPositionsDeflated);quickSort(this.__originalMappings,util.compareByOriginalPositions)};exports.IndexedSourceMapConsumer=IndexedSourceMapConsumer}},{"./array-set":60,"./base64-vlq":61,"./binary-search":63,"./quick-sort":65,"./util":69}],67:[function(require,module,exports){{var base64VLQ=require("./base64-vlq");var util=require("./util");var ArraySet=require("./array-set").ArraySet;var MappingList=require("./mapping-list").MappingList;function SourceMapGenerator(aArgs){if(!aArgs){aArgs={}}this._file=util.getArg(aArgs,"file",null);this._sourceRoot=util.getArg(aArgs,"sourceRoot",null);this._skipValidation=util.getArg(aArgs,"skipValidation",false);this._sources=new ArraySet;this._names=new ArraySet;this._mappings=new MappingList;this._sourcesContents=null}SourceMapGenerator.prototype._version=3;SourceMapGenerator.fromSourceMap=function SourceMapGenerator_fromSourceMap(aSourceMapConsumer){var sourceRoot=aSourceMapConsumer.sourceRoot;var generator=new SourceMapGenerator({file:aSourceMapConsumer.file,sourceRoot:sourceRoot});aSourceMapConsumer.eachMapping(function(mapping){var newMapping={generated:{line:mapping.generatedLine,column:mapping.generatedColumn}};if(mapping.source!=null){newMapping.source=mapping.source;if(sourceRoot!=null){newMapping.source=util.relative(sourceRoot,newMapping.source)}newMapping.original={line:mapping.originalLine,column:mapping.originalColumn};if(mapping.name!=null){newMapping.name=mapping.name}}generator.addMapping(newMapping)});aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){generator.setSourceContent(sourceFile,content)}});return generator};SourceMapGenerator.prototype.addMapping=function SourceMapGenerator_addMapping(aArgs){var generated=util.getArg(aArgs,"generated");var original=util.getArg(aArgs,"original",null);var source=util.getArg(aArgs,"source",null);var name=util.getArg(aArgs,"name",null);if(!this._skipValidation){this._validateMapping(generated,original,source,name)}if(source!=null&&!this._sources.has(source)){this._sources.add(source)}if(name!=null&&!this._names.has(name)){this._names.add(name)}this._mappings.add({
generatedLine:generated.line,generatedColumn:generated.column,originalLine:original!=null&&original.line,originalColumn:original!=null&&original.column,source:source,name:name})};SourceMapGenerator.prototype.setSourceContent=function SourceMapGenerator_setSourceContent(aSourceFile,aSourceContent){var source=aSourceFile;if(this._sourceRoot!=null){source=util.relative(this._sourceRoot,source)}if(aSourceContent!=null){if(!this._sourcesContents){this._sourcesContents={}}this._sourcesContents[util.toSetString(source)]=aSourceContent}else if(this._sourcesContents){delete this._sourcesContents[util.toSetString(source)];if(Object.keys(this._sourcesContents).length===0){this._sourcesContents=null}}};SourceMapGenerator.prototype.applySourceMap=function SourceMapGenerator_applySourceMap(aSourceMapConsumer,aSourceFile,aSourceMapPath){var sourceFile=aSourceFile;if(aSourceFile==null){if(aSourceMapConsumer.file==null){throw new Error("SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, "+'or the source map\'s "file" property. Both were omitted.')}sourceFile=aSourceMapConsumer.file}var sourceRoot=this._sourceRoot;if(sourceRoot!=null){sourceFile=util.relative(sourceRoot,sourceFile)}var newSources=new ArraySet;var newNames=new ArraySet;this._mappings.unsortedForEach(function(mapping){if(mapping.source===sourceFile&&mapping.originalLine!=null){var original=aSourceMapConsumer.originalPositionFor({line:mapping.originalLine,column:mapping.originalColumn});if(original.source!=null){mapping.source=original.source;if(aSourceMapPath!=null){mapping.source=util.join(aSourceMapPath,mapping.source)}if(sourceRoot!=null){mapping.source=util.relative(sourceRoot,mapping.source)}mapping.originalLine=original.line;mapping.originalColumn=original.column;if(original.name!=null){mapping.name=original.name}}}var source=mapping.source;if(source!=null&&!newSources.has(source)){newSources.add(source)}var name=mapping.name;if(name!=null&&!newNames.has(name)){newNames.add(name)}},this);this._sources=newSources;this._names=newNames;aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){if(aSourceMapPath!=null){sourceFile=util.join(aSourceMapPath,sourceFile)}if(sourceRoot!=null){sourceFile=util.relative(sourceRoot,sourceFile)}this.setSourceContent(sourceFile,content)}},this)};SourceMapGenerator.prototype._validateMapping=function SourceMapGenerator_validateMapping(aGenerated,aOriginal,aSource,aName){if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aGenerated.line>0&&aGenerated.column>=0&&!aOriginal&&!aSource&&!aName){return}else if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aOriginal&&"line"in aOriginal&&"column"in aOriginal&&aGenerated.line>0&&aGenerated.column>=0&&aOriginal.line>0&&aOriginal.column>=0&&aSource){return}else{throw new Error("Invalid mapping: "+JSON.stringify({generated:aGenerated,source:aSource,original:aOriginal,name:aName}))}};SourceMapGenerator.prototype._serializeMappings=function SourceMapGenerator_serializeMappings(){var previousGeneratedColumn=0;var previousGeneratedLine=1;var previousOriginalColumn=0;var previousOriginalLine=0;var previousName=0;var previousSource=0;var result="";var mapping;var nameIdx;var sourceIdx;var mappings=this._mappings.toArray();for(var i=0,len=mappings.length;i<len;i++){mapping=mappings[i];if(mapping.generatedLine!==previousGeneratedLine){previousGeneratedColumn=0;while(mapping.generatedLine!==previousGeneratedLine){result+=";";previousGeneratedLine++}}else{if(i>0){if(!util.compareByGeneratedPositionsInflated(mapping,mappings[i-1])){continue}result+=","}}result+=base64VLQ.encode(mapping.generatedColumn-previousGeneratedColumn);previousGeneratedColumn=mapping.generatedColumn;if(mapping.source!=null){sourceIdx=this._sources.indexOf(mapping.source);result+=base64VLQ.encode(sourceIdx-previousSource);previousSource=sourceIdx;result+=base64VLQ.encode(mapping.originalLine-1-previousOriginalLine);previousOriginalLine=mapping.originalLine-1;result+=base64VLQ.encode(mapping.originalColumn-previousOriginalColumn);previousOriginalColumn=mapping.originalColumn;if(mapping.name!=null){nameIdx=this._names.indexOf(mapping.name);result+=base64VLQ.encode(nameIdx-previousName);previousName=nameIdx}}}return result};SourceMapGenerator.prototype._generateSourcesContent=function SourceMapGenerator_generateSourcesContent(aSources,aSourceRoot){return aSources.map(function(source){if(!this._sourcesContents){return null}if(aSourceRoot!=null){source=util.relative(aSourceRoot,source)}var key=util.toSetString(source);return Object.prototype.hasOwnProperty.call(this._sourcesContents,key)?this._sourcesContents[key]:null},this)};SourceMapGenerator.prototype.toJSON=function SourceMapGenerator_toJSON(){var map={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};if(this._file!=null){map.file=this._file}if(this._sourceRoot!=null){map.sourceRoot=this._sourceRoot}if(this._sourcesContents){map.sourcesContent=this._generateSourcesContent(map.sources,map.sourceRoot)}return map};SourceMapGenerator.prototype.toString=function SourceMapGenerator_toString(){return JSON.stringify(this.toJSON())};exports.SourceMapGenerator=SourceMapGenerator}},{"./array-set":60,"./base64-vlq":61,"./mapping-list":64,"./util":69}],68:[function(require,module,exports){{var SourceMapGenerator=require("./source-map-generator").SourceMapGenerator;var util=require("./util");var REGEX_NEWLINE=/(\r?\n)/;var NEWLINE_CODE=10;var isSourceNode="$$$isSourceNode$$$";function SourceNode(aLine,aColumn,aSource,aChunks,aName){this.children=[];this.sourceContents={};this.line=aLine==null?null:aLine;this.column=aColumn==null?null:aColumn;this.source=aSource==null?null:aSource;this.name=aName==null?null:aName;this[isSourceNode]=true;if(aChunks!=null)this.add(aChunks)}SourceNode.fromStringWithSourceMap=function SourceNode_fromStringWithSourceMap(aGeneratedCode,aSourceMapConsumer,aRelativePath){var node=new SourceNode;var remainingLines=aGeneratedCode.split(REGEX_NEWLINE);var shiftNextLine=function(){var lineContents=remainingLines.shift();var newLine=remainingLines.shift()||"";return lineContents+newLine};var lastGeneratedLine=1,lastGeneratedColumn=0;var lastMapping=null;aSourceMapConsumer.eachMapping(function(mapping){if(lastMapping!==null){if(lastGeneratedLine<mapping.generatedLine){addMappingWithCode(lastMapping,shiftNextLine());lastGeneratedLine++;lastGeneratedColumn=0}else{var nextLine=remainingLines[0];var code=nextLine.substr(0,mapping.generatedColumn-lastGeneratedColumn);remainingLines[0]=nextLine.substr(mapping.generatedColumn-lastGeneratedColumn);lastGeneratedColumn=mapping.generatedColumn;addMappingWithCode(lastMapping,code);lastMapping=mapping;return}}while(lastGeneratedLine<mapping.generatedLine){node.add(shiftNextLine());lastGeneratedLine++}if(lastGeneratedColumn<mapping.generatedColumn){var nextLine=remainingLines[0];node.add(nextLine.substr(0,mapping.generatedColumn));remainingLines[0]=nextLine.substr(mapping.generatedColumn);lastGeneratedColumn=mapping.generatedColumn}lastMapping=mapping},this);if(remainingLines.length>0){if(lastMapping){addMappingWithCode(lastMapping,shiftNextLine())}node.add(remainingLines.join(""))}aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){if(aRelativePath!=null){sourceFile=util.join(aRelativePath,sourceFile)}node.setSourceContent(sourceFile,content)}});return node;function addMappingWithCode(mapping,code){if(mapping===null||mapping.source===undefined){node.add(code)}else{var source=aRelativePath?util.join(aRelativePath,mapping.source):mapping.source;node.add(new SourceNode(mapping.originalLine,mapping.originalColumn,source,code,mapping.name))}}};SourceNode.prototype.add=function SourceNode_add(aChunk){if(Array.isArray(aChunk)){aChunk.forEach(function(chunk){this.add(chunk)},this)}else if(aChunk[isSourceNode]||typeof aChunk==="string"){if(aChunk){this.children.push(aChunk)}}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk)}return this};SourceNode.prototype.prepend=function SourceNode_prepend(aChunk){if(Array.isArray(aChunk)){for(var i=aChunk.length-1;i>=0;i--){this.prepend(aChunk[i])}}else if(aChunk[isSourceNode]||typeof aChunk==="string"){this.children.unshift(aChunk)}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk)}return this};SourceNode.prototype.walk=function SourceNode_walk(aFn){var chunk;for(var i=0,len=this.children.length;i<len;i++){chunk=this.children[i];if(chunk[isSourceNode]){chunk.walk(aFn)}else{if(chunk!==""){aFn(chunk,{source:this.source,line:this.line,column:this.column,name:this.name})}}}};SourceNode.prototype.join=function SourceNode_join(aSep){var newChildren;var i;var len=this.children.length;if(len>0){newChildren=[];for(i=0;i<len-1;i++){newChildren.push(this.children[i]);newChildren.push(aSep)}newChildren.push(this.children[i]);this.children=newChildren}return this};SourceNode.prototype.replaceRight=function SourceNode_replaceRight(aPattern,aReplacement){var lastChild=this.children[this.children.length-1];if(lastChild[isSourceNode]){lastChild.replaceRight(aPattern,aReplacement)}else if(typeof lastChild==="string"){this.children[this.children.length-1]=lastChild.replace(aPattern,aReplacement)}else{this.children.push("".replace(aPattern,aReplacement))}return this};SourceNode.prototype.setSourceContent=function SourceNode_setSourceContent(aSourceFile,aSourceContent){this.sourceContents[util.toSetString(aSourceFile)]=aSourceContent};SourceNode.prototype.walkSourceContents=function SourceNode_walkSourceContents(aFn){for(var i=0,len=this.children.length;i<len;i++){if(this.children[i][isSourceNode]){this.children[i].walkSourceContents(aFn)}}var sources=Object.keys(this.sourceContents);for(var i=0,len=sources.length;i<len;i++){aFn(util.fromSetString(sources[i]),this.sourceContents[sources[i]])}};SourceNode.prototype.toString=function SourceNode_toString(){var str="";this.walk(function(chunk){str+=chunk});return str};SourceNode.prototype.toStringWithSourceMap=function SourceNode_toStringWithSourceMap(aArgs){var generated={code:"",line:1,column:0};var map=new SourceMapGenerator(aArgs);var sourceMappingActive=false;var lastOriginalSource=null;var lastOriginalLine=null;var lastOriginalColumn=null;var lastOriginalName=null;this.walk(function(chunk,original){generated.code+=chunk;if(original.source!==null&&original.line!==null&&original.column!==null){if(lastOriginalSource!==original.source||lastOriginalLine!==original.line||lastOriginalColumn!==original.column||lastOriginalName!==original.name){map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})}lastOriginalSource=original.source;lastOriginalLine=original.line;lastOriginalColumn=original.column;lastOriginalName=original.name;sourceMappingActive=true}else if(sourceMappingActive){map.addMapping({generated:{line:generated.line,column:generated.column}});lastOriginalSource=null;sourceMappingActive=false}for(var idx=0,length=chunk.length;idx<length;idx++){if(chunk.charCodeAt(idx)===NEWLINE_CODE){generated.line++;generated.column=0;if(idx+1===length){lastOriginalSource=null;sourceMappingActive=false}else if(sourceMappingActive){map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})}}else{generated.column++}}});this.walkSourceContents(function(sourceFile,sourceContent){map.setSourceContent(sourceFile,sourceContent)});return{code:generated.code,map:map}};exports.SourceNode=SourceNode}},{"./source-map-generator":67,"./util":69}],69:[function(require,module,exports){{function getArg(aArgs,aName,aDefaultValue){if(aName in aArgs){return aArgs[aName]}else if(arguments.length===3){return aDefaultValue}else{throw new Error('"'+aName+'" is a required argument.')}}exports.getArg=getArg;var urlRegexp=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/;var dataUrlRegexp=/^data:.+\,.+$/;function urlParse(aUrl){var match=aUrl.match(urlRegexp);if(!match){return null}return{scheme:match[1],auth:match[2],host:match[3],port:match[4],path:match[5]}}exports.urlParse=urlParse;function urlGenerate(aParsedUrl){var url="";if(aParsedUrl.scheme){url+=aParsedUrl.scheme+":"}url+="//";if(aParsedUrl.auth){url+=aParsedUrl.auth+"@"}if(aParsedUrl.host){url+=aParsedUrl.host}if(aParsedUrl.port){url+=":"+aParsedUrl.port}if(aParsedUrl.path){url+=aParsedUrl.path}return url}exports.urlGenerate=urlGenerate;function normalize(aPath){var path=aPath;var url=urlParse(aPath);if(url){if(!url.path){return aPath}path=url.path}var isAbsolute=exports.isAbsolute(path);var parts=path.split(/\/+/);for(var part,up=0,i=parts.length-1;i>=0;i--){part=parts[i];if(part==="."){parts.splice(i,1)}else if(part===".."){up++}else if(up>0){if(part===""){parts.splice(i+1,up);up=0}else{parts.splice(i,2);up--}}}path=parts.join("/");if(path===""){path=isAbsolute?"/":"."}if(url){url.path=path;return urlGenerate(url)}return path}exports.normalize=normalize;function join(aRoot,aPath){if(aRoot===""){aRoot="."}if(aPath===""){aPath="."}var aPathUrl=urlParse(aPath);var aRootUrl=urlParse(aRoot);if(aRootUrl){aRoot=aRootUrl.path||"/"}if(aPathUrl&&!aPathUrl.scheme){if(aRootUrl){aPathUrl.scheme=aRootUrl.scheme}return urlGenerate(aPathUrl)}if(aPathUrl||aPath.match(dataUrlRegexp)){return aPath}if(aRootUrl&&!aRootUrl.host&&!aRootUrl.path){aRootUrl.host=aPath;return urlGenerate(aRootUrl)}var joined=aPath.charAt(0)==="/"?aPath:normalize(aRoot.replace(/\/+$/,"")+"/"+aPath);if(aRootUrl){aRootUrl.path=joined;return urlGenerate(aRootUrl)}return joined}exports.join=join;exports.isAbsolute=function(aPath){return aPath.charAt(0)==="/"||!!aPath.match(urlRegexp)};function relative(aRoot,aPath){if(aRoot===""){aRoot="."}aRoot=aRoot.replace(/\/$/,"");var level=0;while(aPath.indexOf(aRoot+"/")!==0){var index=aRoot.lastIndexOf("/");if(index<0){return aPath}aRoot=aRoot.slice(0,index);if(aRoot.match(/^([^\/]+:\/)?\/*$/)){return aPath}++level}return Array(level+1).join("../")+aPath.substr(aRoot.length+1)}exports.relative=relative;function toSetString(aStr){return"$"+aStr}exports.toSetString=toSetString;function fromSetString(aStr){return aStr.substr(1)}exports.fromSetString=fromSetString;function compareByOriginalPositions(mappingA,mappingB,onlyCompareOriginal){var cmp=mappingA.source-mappingB.source;if(cmp!==0){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp!==0){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp!==0||onlyCompareOriginal){return cmp}cmp=mappingA.generatedColumn-mappingB.generatedColumn;if(cmp!==0){return cmp}cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp!==0){return cmp}return mappingA.name-mappingB.name}exports.compareByOriginalPositions=compareByOriginalPositions;function compareByGeneratedPositionsDeflated(mappingA,mappingB,onlyCompareGenerated){var cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp!==0){return cmp}cmp=mappingA.generatedColumn-mappingB.generatedColumn;if(cmp!==0||onlyCompareGenerated){return cmp}cmp=mappingA.source-mappingB.source;if(cmp!==0){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp!==0){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp!==0){return cmp}return mappingA.name-mappingB.name}exports.compareByGeneratedPositionsDeflated=compareByGeneratedPositionsDeflated;function strcmp(aStr1,aStr2){if(aStr1===aStr2){return 0}if(aStr1>aStr2){return 1}return-1}function compareByGeneratedPositionsInflated(mappingA,mappingB){var cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp!==0){return cmp}cmp=mappingA.generatedColumn-mappingB.generatedColumn;if(cmp!==0){return cmp}cmp=strcmp(mappingA.source,mappingB.source);if(cmp!==0){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp!==0){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp!==0){return cmp}return strcmp(mappingA.name,mappingB.name)}exports.compareByGeneratedPositionsInflated=compareByGeneratedPositionsInflated}},{}],70:[function(require,module,exports){exports.SourceMapGenerator=require("./lib/source-map-generator").SourceMapGenerator;exports.SourceMapConsumer=require("./lib/source-map-consumer").SourceMapConsumer;exports.SourceNode=require("./lib/source-node").SourceNode},{"./lib/source-map-consumer":66,"./lib/source-map-generator":67,"./lib/source-node":68}],71:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.trackArray=trackArray;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _trackr=require("trackr");var _trackr2=_interopRequireDefault(_trackr);var _arraySpy=require("array-spy");var _arraySpy2=_interopRequireDefault(_arraySpy);function trackArray(arr,replacer){if(!Array.isArray(arr))throw new Error("Expecting array.");if(arr.__reactive)return arr;var deps={length:new _trackr2["default"].Dependency};var values={};var narr=(0,_arraySpy2["default"])([]);function replace(ctx,name,value){if(typeof value==="undefined")return;return _trackr2["default"].nonreactive(function(){return typeof replacer==="function"?replacer.call(ctx,name,value):value})}function getter(name){deps[name].depend();return values[name]}function setter(name,value){var old=values[name];values[name]=replace(this,name,value);var dep=deps[name];if(dep==null)dep=deps[name]=new _trackr2["default"].Dependency;if(old!==values[name])dep.changed();return values[name]}function define(i){var dep;if(typeof i==="number"&&i>=narr.length){if((dep=deps[i])!=null){delete deps[i]}delete narr[i];delete values[i];dep.changed();return}setter.call(this,i,narr[i]);Object.defineProperty(narr,i.toString(),{configurable:true,enumerable:true,get:getter.bind(narr,i),set:setter.bind(narr,i)})}narr.observe(function(chg){var balance,start,end,len,i,prevlen;if(chg==null)return;balance=chg.added-chg.removed;if(!balance)return;len=narr.length;prevlen=len-balance;start=Math.min(prevlen,len);end=Math.max(prevlen,len);for(i=start;i<end;i++)define(i);deps.length.changed()});Object.defineProperty(narr,"__reactive",{configurable:false,enumerable:false,value:true,writeable:false});Object.defineProperty(narr,"$length",{configurable:false,enumerable:false,get:function get(){deps.length.depend();return this.length}});Object.defineProperty(narr,"depend",{configurable:false,enumerable:false,get:function get(){deps.length.depend()}});narr.push.apply(narr,arr);return narr}},{"array-spy":4,trackr:77}],72:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.track=track;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _isPlainObject=require("is-plain-object");var _isPlainObject2=_interopRequireDefault(_isPlainObject);var _object=require("./object");var _array=require("./array");var _map=require("./map");var _list=require("./list");var _var=require("./var");exports.List=_list.List;exports.Map=_map.Map;exports.Variable=_var.Variable;exports.trackProperty=_object.trackProperty;exports.trackObject=_object.trackObject;exports.trackArray=_array.trackArray;function track(obj,replacer){function replace(k,v){var nval;if(typeof replacer==="function")nval=replacer.apply(this,arguments);if(typeof nval==="undefined"&&typeof v!=="undefined")nval=track(v);return nval}if(Array.isArray(obj))return(0,_array.trackArray)(obj,replace);if((0,_isPlainObject2["default"])(obj))return(0,_object.trackObject)(obj,replace);return obj}},{"./array":71,"./list":73,"./map":74,"./object":75,"./var":76,"is-plain-object":16}],73:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _trackr=require("trackr");var _trackr2=_interopRequireDefault(_trackr);var _arraySpy=require("array-spy");var _arraySpy2=_interopRequireDefault(_arraySpy);var slice=Array.prototype.slice.call.bind(Array.prototype.slice);var arrayLike=function arrayLike(o){return typeof o.length==="number"&&o.length>=0};var List=function(){function List(){_classCallCheck(this,List);this._itemDep=new _trackr2["default"].Dependency;this._lengthDep=new _trackr2["default"].Dependency;this._deps={};this._items=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=slice(arguments)[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var a=_step.value;pushDynamic(this,a)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}}_createClass(List,[{key:"get",value:function get(index){this._getDep(index).depend();return this._items[index]}},{key:"_getDep",value:function _getDep(k){if(this._deps[k]==null)this._deps[k]=new _trackr2["default"].Dependency;return this._deps[k]}},{key:"splice",value:function splice(){var args=slice(arguments);var op=_arraySpy2["default"].summariseSpliceOperation(this._items,args);var r=this._items.splice.apply(this._items,args);this._itemDep.changed();if(op.added!==op.removed)this._lengthDep.changed();for(var i=0;i<Math.max(op.added,op.removed);i++){this._getDep(op.index+i).changed()}return r}},{key:"push",value:function push(){var args=[this._items.length,0].concat(slice(arguments));this.splice.apply(this,args);return this._items.length}},{key:"pop",value:function pop(){return this.splice(this._items.length-1,1)[0]}},{key:"unshift",value:function unshift(){var args=[0,0].concat(slice(arguments));this.splice.apply(this,args);return this._items.length}},{key:"shift",value:function shift(){return this.splice(0,1)[0]}},{key:"reverse",value:function reverse(){this._items.reverse();this._itemDep.changed();for(var i=0;i<this._items.length;i++){this._getDep(i).changed()}return this}},{key:"sort",value:function sort(f){this._items.sort(f);this._itemDep.changed();for(var i=0;i<this._items.length;i++){this._getDep(i).changed()}return this}},{key:"set",value:function set(index,value){this.splice(index,1,value);return this}},{key:"concat",value:function concat(){var l=new List(this);var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=slice(arguments)[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var a=_step2.value;pushDynamic(l,a)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}return l}},{key:"join",value:function join(char){var str="";var len=this.length;for(var v=undefined,i=0;i<len;i++){v=this.get(i);if(v==null)v="";if(typeof v!=="string")v=v.toString();str+=v+(i!==len-1?char:"")}return str}},{key:"slice",value:function slice(start,end){var i=undefined,cloned=[],upTo=undefined,size=undefined,len=this._items.length;if(typeof start==="number"&&!isNaN(start)){if(start<0){this._lengthDep.depend();start=Math.max(0,len+start)}}else{start=0}if(typeof end==="number"&&!isNaN(end)){upTo=Math.min(end,len);if(end<0){this._lengthDep.depend();upTo=len+end}}else{this._lengthDep.depend();upTo=len}size=upTo-start;if(size>0){cloned=new Array(size);for(i=0;i<size;i++){cloned[i]=this.get(start+i)}}return cloned}},{key:"indexOf",value:function indexOf(member,start){var len=this._items.length;if(typeof start==="number"&&!isNaN(start)){start=Math.min(Math.max(start,0),len)}else{start=0}for(var i=start;i<len;i++){if(this.get(i)===member)return i}this._lengthDep.depend();return-1}},{key:"forEach",value:function forEach(fn,ctx){this._itemDep.depend();for(var i=0;i<this._items.length;i++){fn.call(ctx,this._items[i],i,this)}return this}},{key:"reduce",value:function reduce(fn,value){this.forEach(function(current,index,list){value=fn.call(null,value,current,index,list)});return value}},{key:"map",value:function map(fn,ctx){return this.reduce(function(els){els.push(fn.apply(ctx,slice(arguments,1)));return els},[])}},{key:"filter",value:function filter(fn,ctx){return this.reduce(function(els,item){if(fn.apply(ctx,slice(arguments,1)))els.push(item);return els},[])}},{key:"some",value:function some(fn,ctx){var len=this._items.length;for(var i=0;i<len;i++){if(fn.call(ctx,this.get(i),i,this))return true}this._lengthDep.depend();return false}},{key:"every",value:function every(fn,ctx){var len=this._items.length;for(var i=0;i<len;i++){if(!fn.call(ctx,this.get(i),i,this))return false}this._lengthDep.depend();return true}},{key:"toJSON",value:function toJSON(){return this.slice(0)}},{key:"toArray",value:function toArray(){return this.slice(0)}},{key:"__trackr",get:function get(){return true}},{key:"__trackr_type",get:function get(){return"list"}},{key:"length",get:function get(){this._lengthDep.depend();return this._items.length}}]);return List}();exports.List=List;List.isList=function(o){return o&&o.__trackr&&o.__trackr_type==="list"};function pushDynamic(l,v){if(arrayLike(v))l.push.apply(l,slice(v));else if(List.isList(v))v.forEach(function(i){return l.push(i)});else l.push(v)}},{"array-spy":4,trackr:77}],74:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _hasOwnProp=require("has-own-prop");var _hasOwnProp2=_interopRequireDefault(_hasOwnProp);var _trackr=require("trackr");var _trackr2=_interopRequireDefault(_trackr);var Map=function(){function Map(obj){_classCallCheck(this,Map);this._keysDep=new _trackr2["default"].Dependency;this._valuesDep=new _trackr2["default"].Dependency;this._deps={};this._values={};if(typeof obj==="object"&&obj!=null){for(var key in obj){this.set(key,obj[key])}}}_createClass(Map,[{key:"set",value:function set(key,value){if(typeof key==="object"){for(var k in key){if((0,_hasOwnProp2["default"])(key,k))this.set(k,key[k])}return this}var has=(0,_hasOwnProp2["default"])(this._values,key);if(!has||this._values[key]!==value){this._values[key]=value;this._getDep(key).changed();if(!has)this._keysDep.changed();this._valuesDep.changed()}return this}},{key:"clear",value:function clear(){var keys=Object.keys(this._values);if(keys.length){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=keys[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var k=_step.value;delete this._values[k];this._getDep(k).changed()}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}this._keysDep.changed();this._valuesDep.changed()}return this}},{key:"delete",value:function _delete(key){if((0,_hasOwnProp2["default"])(this._values,key)){delete this._values[key];this._getDep(key).changed();this._keysDep.changed();this._valuesDep.changed()}return this}},{key:"forEach",value:function forEach(fn,ctx){var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this.keys()[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var k=_step2.value;fn.call(ctx,this.get(k),k,this)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}return this}},{key:"_getDep",value:function _getDep(k){if(this._deps[k]==null)this._deps[k]=new _trackr2["default"].Dependency;return this._deps[k]}},{key:"get",value:function get(key){this._getDep(key).depend();return this._values[key]}},{key:"has",value:function has(key){this._getDep(key).depend();return(0,_hasOwnProp2["default"])(this._values,key)}},{key:"keys",value:function keys(){this._keysDep.depend();return Object.keys(this._values)}},{key:"toJSON",value:function toJSON(){var out={};var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=this.keys()[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var k=_step3.value;out[k]=this.get(k)}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3["return"]){_iterator3["return"]()}}finally{if(_didIteratorError3){throw _iteratorError3}}}return out}},{key:"__trackr",get:function get(){return true}},{key:"__trackr_type",get:function get(){return"map"}},{key:"size",get:function get(){return this.keys().length}}]);return Map}();exports.Map=Map;Map.isMap=function(o){return o&&o.__trackr&&o.__trackr_type==="map"}},{"has-own-prop":13,trackr:77}],75:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.trackProperty=trackProperty;exports.trackObject=trackObject;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _trackr=require("trackr");var _trackr2=_interopRequireDefault(_trackr);var _hasOwnProp=require("has-own-prop");var _hasOwnProp2=_interopRequireDefault(_hasOwnProp);var _shallowCopy=require("shallow-copy");var _shallowCopy2=_interopRequireDefault(_shallowCopy);function trackProperty(obj,prop,value,options){if(typeof obj!=="object"||obj==null){throw new Error("Expecting object to define the reactive property on.")}if(typeof prop!=="string")throw new Error("Expecting string for property name.");var dep=new _trackr2["default"].Dependency;Object.defineProperty(obj,prop,{configurable:options!=null&&Boolean(options.configurable),enumerable:options==null||options.enumerable!==false,set:function set(val){if(val!==value){value=val;dep.changed()}return value},get:function get(){dep.depend();return value}});return obj}function trackObject(props,replacer){if(props.__reactive)return props;var values={};var deps={};var mainDep=new _trackr2["default"].Dependency;function replace(ctx,name,value){if(typeof value==="undefined")return;return _trackr2["default"].nonreactive(function(){return typeof replacer==="function"?replacer.call(ctx,name,value):value;
})}function getter(name){deps[name].depend();return values[name]}function setter(name,value){var old=values[name];values[name]=replace(this,name,value);var dep=deps[name];if(dep==null)dep=deps[name]=new _trackr2["default"].Dependency;if(old!==values[name])dep.changed();mainDep.changed();return values[name]}var _proto=typeof props.constructor==="function"?Object.create(props.constructor.prototype):{};_proto.defineProperty=function(name,value,options){Object.defineProperty(this,name,{configurable:options==null||options.configurable!==false,enumerable:options==null||options.enumerable!==false,get:getter.bind(this,name),set:setter.bind(this,name)});this[name]=value;return this};_proto.deleteProperty=function(name){var dep=deps[name];if(delete this[name]){delete values[name];delete deps[name];if(dep)dep.changed()}return this};_proto.toJSON=function(){mainDep.depend();return(0,_shallowCopy2["default"])(values)};Object.defineProperty(_proto,"__reactive",{configurable:false,enumerable:false,value:true,writeable:false});var robj=Object.create(_proto);for(var key in props){if((0,_hasOwnProp2["default"])(props,key))robj.defineProperty(key,props[key])}return robj}},{"has-own-prop":13,"shallow-copy":59,trackr:77}],76:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _trackr=require("trackr");var _trackr2=_interopRequireDefault(_trackr);var Variable=function(){function Variable(value){_classCallCheck(this,Variable);this._value=void 0;this._dep=new _trackr2["default"].Dependency;this.set(value)}_createClass(Variable,[{key:"set",value:function set(value){if(value!==this._value){this._value=value;this._dep.changed()}}},{key:"get",value:function get(){this._dep.depend();return this._value}},{key:"toString",value:function toString(){return""+this.get()}},{key:"toJSON",value:function toJSON(){return this.get()}},{key:"__trackr",get:function get(){return true}},{key:"__trackr_type",get:function get(){return"variable"}}]);return Variable}();exports.Variable=Variable;Variable.isVariable=function(o){return o&&o.__trackr&&o.__trackr_type==="variable"}},{trackr:77}],77:[function(require,module,exports){(function(global){module.exports=function(){if(typeof global.Trackr!=="undefined"){return global.Trackr}var Trackr=global.Trackr={};Trackr.active=false;Trackr.currentComputation=null;Trackr._computations={};var setCurrentComputation=function(c){Trackr.currentComputation=c;Trackr.active=!!c};var _debugFunc=function(){return typeof console!=="undefined"&&console.error?function(){console.error.apply(console,arguments)}:function(){}};var _throwOrLog=function(from,e){if(throwFirstError){throw e}else{var printArgs=["Exception from Trackr "+from+" function:"];if(e.stack&&e.message&&e.name){var idx=e.stack.indexOf(e.message);if(idx<0||idx>e.name.length+2){var message=e.name+": "+e.message;printArgs.push(message)}}printArgs.push(e.stack);for(var i=0;i<printArgs.length;i++){_debugFunc()(printArgs[i])}}};var withNoYieldsAllowed=function(f){return f};var nextId=1;var pendingComputations=[];var willFlush=false;var inFlush=false;var inCompute=false;var throwFirstError=false;var afterFlushCallbacks=[];var requestAnimationFrame=require("raf");var requireFlush=function(){if(!willFlush){requestAnimationFrame(Trackr._runFlush);willFlush=true}};var constructingComputation=false;Trackr.Computation=function(f,parent,options){if(!constructingComputation)throw new Error("Trackr.Computation constructor is private; use Trackr.autorun");constructingComputation=false;var self=this;options=options||{};self.stopped=false;self.invalidated=false;self.firstRun=true;self._id=nextId++;self._onInvalidateCallbacks=[];self._onStopCallbacks=[];self._parent=parent;self._func=f;self._onError=options.onError;self._recomputing=false;self._context=options.context||null;Trackr._computations[self._id]=self;var errored=true;try{self._compute();errored=false}finally{self.firstRun=false;if(errored)self.stop()}};Trackr.Computation.prototype.onInvalidate=function(f,ctx){var self=this;if(typeof f!=="function")throw new Error("onInvalidate requires a function");if(self.invalidated){Trackr.nonreactive(function(){withNoYieldsAllowed(f).call(ctx||self._context,self)})}else{self._onInvalidateCallbacks.push({fn:f,ctx:ctx})}};Trackr.Computation.prototype.onStop=function(f,ctx){var self=this;if(typeof f!=="function")throw new Error("onStop requires a function");if(self.stopped){Trackr.nonreactive(function(){withNoYieldsAllowed(f).call(ctx||self._context,self)})}else{self._onStopCallbacks.push({fn:f,ctx:ctx})}};Trackr.Computation.prototype.invalidate=function(){var self=this;if(!self.invalidated){if(!self._recomputing&&!self.stopped){requireFlush();pendingComputations.push(this)}self.invalidated=true;for(var i=0,f;f=self._onInvalidateCallbacks[i];i++){Trackr.nonreactive(function(){withNoYieldsAllowed(f.fn).call(f.ctx||self._context,self)})}self._onInvalidateCallbacks=[]}};Trackr.Computation.prototype.stop=function(){var self=this;if(!self.stopped){self.stopped=true;self.invalidate();delete Trackr._computations[self._id];for(var i=0,f;f=self._onStopCallbacks[i];i++){Trackr.nonreactive(function(){withNoYieldsAllowed(f.fn).call(f.ctx||self._context,self)})}self._onStopCallbacks=[]}};Trackr.Computation.prototype._compute=function(){var self=this;self.invalidated=false;var previous=Trackr.currentComputation;setCurrentComputation(self);var previousInCompute=inCompute;inCompute=true;try{withNoYieldsAllowed(self._func).call(self._context,self)}finally{setCurrentComputation(previous);inCompute=previousInCompute}};Trackr.Computation.prototype._needsRecompute=function(){var self=this;return self.invalidated&&!self.stopped};Trackr.Computation.prototype._recompute=function(){var self=this;self._recomputing=true;try{if(self._needsRecompute()){try{self._compute()}catch(e){if(self._onError){self._onError(e)}else{_throwOrLog("recompute",e)}}}}finally{self._recomputing=false}};Trackr.Dependency=function(){this._dependentsById={}};Trackr.Dependency.prototype.depend=function(computation){if(!computation){if(!Trackr.active)return false;computation=Trackr.currentComputation}var self=this;var id=computation._id;if(!(id in self._dependentsById)){self._dependentsById[id]=computation;computation.onInvalidate(function(){delete self._dependentsById[id]});return true}return false};Trackr.Dependency.prototype.changed=function(){var self=this;for(var id in self._dependentsById)self._dependentsById[id].invalidate()};Trackr.Dependency.prototype.hasDependents=function(){var self=this;for(var id in self._dependentsById)return true;return false};Trackr.flush=function(options){Trackr._runFlush({finishSynchronously:true,throwFirstError:options&&options._throwFirstError})};Trackr._runFlush=function(options){if(inFlush)throw new Error("Can't call Trackr.flush while flushing");if(inCompute)throw new Error("Can't flush inside Trackr.autorun");options=options||{};inFlush=true;willFlush=true;throwFirstError=!!options.throwFirstError;var recomputedCount=0;var finishedTry=false;try{while(pendingComputations.length||afterFlushCallbacks.length){while(pendingComputations.length){var comp=pendingComputations.shift();comp._recompute();if(comp._needsRecompute()){pendingComputations.unshift(comp)}if(!options.finishSynchronously&&++recomputedCount>1e3){finishedTry=true;return}}if(afterFlushCallbacks.length){var cb=afterFlushCallbacks.shift();try{cb.fn.call(cb.ctx)}catch(e){_throwOrLog("afterFlush",e)}}}finishedTry=true}finally{if(!finishedTry){inFlush=false;Trackr._runFlush({finishSynchronously:options.finishSynchronously,throwFirstError:false})}willFlush=false;inFlush=false;if(pendingComputations.length||afterFlushCallbacks.length){if(options.finishSynchronously){throw new Error("still have more to do?")}setTimeout(requireFlush,10)}}};Trackr.autorun=function(f,options,ctx){if(typeof f!=="function")throw new Error("Trackr.autorun requires a function argument");options=options||{};if(ctx)options.context=ctx;constructingComputation=true;var c=new Trackr.Computation(f,Trackr.currentComputation,options);if(Trackr.active)Trackr.onInvalidate(function(){c.stop()});return c};Trackr.nonReactive=Trackr.nonreactive=function(f,ctx){var previous=Trackr.currentComputation;setCurrentComputation(null);try{return f.call(ctx)}finally{setCurrentComputation(previous)}};Trackr.nonReactable=Trackr.nonreactable=function(f,ctx){return function(){var args=arguments;var self=this;return Trackr.nonreactive(function(){return f.apply(ctx||self,args)})}};Trackr.onInvalidate=function(f,ctx){if(!Trackr.active)throw new Error("Trackr.onInvalidate requires a currentComputation");Trackr.currentComputation.onInvalidate(f,ctx)};Trackr.afterFlush=function(f,ctx){afterFlushCallbacks.push({fn:f,ctx:ctx});requireFlush()};return Trackr}()}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{raf:57}]},{},[3])(3)});
