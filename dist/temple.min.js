!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Temple=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a){return null!=a&&"number"==typeof a.length}function d(a){if(!(this instanceof d))return new d(a);var b=a||[];if(!c(b))throw new Error("Expected array");for(var e=0;e<b.length;e++)this._memberIn(b[e]);this.members=b,this.placeholder=null,this.attached=!1,this.parentElement=null,this.parentRange=null}function e(a,b){return 1!==a.nodeType?!1:a===b?!1:a.compareDocumentPosition?16&a.compareDocumentPosition(b):(b=b.parentNode,b&&1===b.nodeType?a===b?!0:a.contains(b):!1)}function f(){return o?document.createComment(""):document.createTextNode("")}function g(a,b,c,e){var f=a;f instanceof d?f.attach(b,c,e):e?k(f,b,c):j(f,b,c)}function h(a){var b=a;b instanceof d?b.detach():i(b)}function i(a){a.parentNode&&(1===a.nodeType&&a.parentNode._uihooks&&a.parentNode._uihooks.removeElement?a.parentNode._uihooks.removeElement(a):a.parentNode.removeChild(a))}function j(a,b,c){c=c||null,1===a.nodeType&&b._uihooks&&b._uihooks.insertElement?b._uihooks.insertElement(a,c):b.insertBefore(a,c)}function k(a,b,c){a.parentNode===b&&(c=c||null,1===a.nodeType&&b._uihooks&&b._uihooks.moveElement?b._uihooks.moveElement(a,c):b.insertBefore(a,c))}var l=a("underscore"),m=a("./events"),n=a("./util");b.exports=d,d.extend=n.subclass,d.forElement=function(a){if(1!==a.nodeType)throw new Error("Expected element, found: "+a);for(var b=null;a&&!b;)b=a.$domrange||null,a=a.parentNode;return b},l.extend(d.prototype,m,{attach:function(a,b,c,d){if("string"==typeof a&&(a=document.querySelector(a)),"string"==typeof b&&(b=parent.querySelector(b)),null==a)throw new Error("Expecting a valid DOM element to attach in.");if((c||d)&&(this.parentElement!==a||!this.attached))throw new Error("Can only move or replace an attached DOMRange, and only under the same parent element");var e=this.members;if(e.length){this.placeholder=null;for(var h=0;h<e.length;h++)g(e[h],a,b,c)}else{var i=f();this.placeholder=i,a.insertBefore(i,b)}return this.attached=!0,this.parentElement=a,c||d||this.trigger("attach",a),this},detach:function(a){if(!this.attached)return this;var b=this.parentElement,c=this.members;if(c.length)for(var d=0;d<c.length;d++)h(c[d]);else{var e=this.placeholder;this.parentElement.removeChild(e),this.placeholder=null}a||(this.attached=!1,this.parentElement=null,this.trigger("detach",b))},firstNode:function(){if(!this.attached)throw new Error("Must be attached");if(!this.members.length)return this.placeholder;var a=this.members[0];return a instanceof d?a.firstNode():a},lastNode:function(){if(!this.attached)throw new Error("Must be attached");if(!this.members.length)return this.placeholder;var a=this.members[this.members.length-1];return a instanceof d?a.lastNode():a},getMember:function(a){var b=this.members;if(!(a>=0&&a<b.length))throw new Error("Bad index in range.getMember: "+a);return this.members[a]},setMembers:function(a){var b=a;if(!c(b))throw new Error("Expected array");for(var d=this.members,e=this.attached&&(b.length||d.length),f=0;f<d.length;f++)this._memberOut(d[f],!1,e);for(var f=0;f<b.length;f++)this._memberIn(b[f]);if(e){var g=this.lastNode().nextSibling,h=this.parentElement;this.detach(!0),this.members=b,this.attach(h,g,!1,!0)}else this.members=b;return this},addMember:function(a,b,c){var e=this.members;if(("number"!=typeof b||isNaN(b)||0>b||b>e.length)&&(b=e.length),c||this._memberIn(a),this.attached)if(0===e.length)this.setMembers([a]);else{var f;if(b===e.length)f=this.lastNode().nextSibling;else{var h=e[b];f=h instanceof d?h.firstNode():h}e.splice(b,0,a),g(a,this.parentElement,f,c)}else e.splice(b,0,a);return this},removeMember:function(a,b){var c=this.members;if(("number"!=typeof a||isNaN(a))&&(a=this.indexOf(a)),0>a||a>=c.length)throw new Error("Bad index in range.removeMember: "+a);if(b)c.splice(a,1);else{var d=c[a];1===c.length?this.setMembers([]):(this._memberOut(d),c.splice(a,1),this.attached&&h(d))}return this},moveMember:function(a,b){var c=this.members[a];return this.removeMember(a,!0),this.addMember(c,b,!0),this},indexOf:function(a){return this.members.indexOf(a)},contains:function(a){return this.indexOf(a)>-1},_memberIn:function(a){a instanceof d?a.parentRange=this:1===a.nodeType&&(a.$domrange=this)},_memberOut:function(a,b,c){a instanceof d?c?a.destroyMembers(b,c):a.destroy(b):!b&&1===a.nodeType&&a.$domrange&&(a.$domrange=null)},destroyMembers:function(a,b){for(var c=this.members,d=0;d<c.length;d++)this._memberOut(c[d],a,b);return this},destroy:function(a){return this.detach(),this.trigger("destroy",a),this.destroyMembers(a),this.members=[],this},containsElement:function(a){if(!this.attached)throw new Error("Must be attached");if(!e(this.parentElement,a))return!1;for(;a.parentNode!==this.parentElement;)a=a.parentNode;for(var b=a.$domrange;b&&b!==this;)b=b.parentRange;return b===this},containsRange:function(a){if(!this.attached)throw new Error("Must be attached");if(!a.attached)return!1;if(a.parentElement!==this.parentElement)return this.containsElement(a.parentElement);if(a===this)return!1;for(;a&&a!==this;)a=a.parentRange;return a===this},findAll:function(a){var b,c=[];for(var e in this.members)b=this.members[e],b instanceof d?c.push.apply(c,b.findAll(a)):"function"==typeof b.querySelectorAll&&(1===b.nodeType&&n.matchesSelector(b,a)&&c.push(b),c.push.apply(c,b.querySelectorAll(a)));return c},find:function(a){var b,c;for(var e in this.members)if(b=this.members[e],b instanceof d?c=b.find(a):1===b.nodeType&&n.matchesSelector(b,a)?c=b:"function"==typeof b.querySelector&&(c=b.querySelector(a)),null!=c)return c;return null}});var o=function(){var a=!1,b=document.createTextNode("");try{b.someProp=!0}catch(c){a=!0}return a}()},{"./events":2,"./util":13,underscore:17}],2:[function(a,b){function c(a){if(null==a)return!0;if(Array.isArray(a)||"string"==typeof a)return 0===a.length;for(var b in a)if(e.has(a,b))return!1;return!0}function d(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}}var e=a("underscore"),f=b.exports={on:function(a,b,c){if(!h(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!h(this,"once",a,[b,c])||!b)return this;var e=this,f=d(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,c)},off:function(a,b,c){var d,e,f,g,i,j,k,l;if(!this._events||!h(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events=void 0,this;for(g=a?[a]:Object.keys(this._events),i=0,j=g.length;j>i;i++)if(a=g[i],f=this._events[a]){if(this._events[a]=d=[],b||c)for(k=0,l=f.length;l>k;k++)e=f[k],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=Array.prototype.slice.call(arguments,1);if(!h(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&i(c,b),d&&i(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c(a._events))&&delete this._listeningTo[g];return this}},g=/\s+/,h=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(g.test(c)){for(var f=c.split(g),h=0,i=f.length;i>h;h++)a[b].apply(a,[f[h]].concat(d));return!1}return!0},i=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},j={listenTo:"on",listenToOnce:"once"};e.each(j,function(a,b){f[b]=function(b,c,d){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=e.uniqueId("l"));return f[g]=b,d||"object"!=typeof c||(d=this),b[a](c,d,this),this}}),f.bind=f.on,f.unbind=f.off},{underscore:17}],3:[function(a,b){var c=a("underscore"),d=a("trackr"),e=a("./m+xml").parse,f=a("./types"),g=a("./track"),h=b.exports=c.defaults({VERSION:"0.5.0",NODE_TYPE:f,util:a("./util"),Events:a("./events"),Model:a("./model"),Trackr:d,Dependency:d.Dependency,autorun:d.autorun,parse:e,parsePath:function(a,b){return e(a,c.extend({},b,{startRule:"path"}))},parsePathQuery:function(a,b){return e(a,c.extend({},b,{startRule:"pathQuery"}))},parseAttributeValue:function(a,b){return e(a,c.extend({},b,{startRule:"attrValue"}))},parseArguments:function(a,b){return e(a,c.extend({},b,{startRule:"attrArguments"}))},parseHTML:function(a){return{type:f.ROOT,children:[{type:f.HTML,value:a}],version:h.VERSION}}},g);"undefined"!=typeof document&&(h=b.exports=c.extend(a("./mustache"),b.exports),c.extend(h,a("./plugins")),h.DOMRange=a("./domrange"),h.View=a("./view"),h.Section=a("./section"))},{"./domrange":1,"./events":2,"./m+xml":4,"./model":5,"./mustache":6,"./plugins":8,"./section":10,"./track":11,"./types":12,"./util":13,"./view":14,trackr:16,underscore:17}],4:[function(a,b){b.exports=function(){function b(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function c(a,b,c,d,e,f){this.message=a,this.expected=b,this.found=c,this.offset=d,this.line=e,this.column=f,this.name="SyntaxError"}function d(b){function e(){return b.substring(xd,wd)}function f(a){function c(a,c,d){var e,f;for(e=c;d>e;e++)f=b.charAt(e),"\n"===f?(a.seenCR||a.line++,a.column=1,a.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(a.line++,a.column=1,a.seenCR=!0):(a.column++,a.seenCR=!1)}return yd!==a&&(yd>a&&(yd=0,zd={line:1,column:1,seenCR:!1}),c(zd,yd,a),yd=a),zd}function g(a){Ad>wd||(wd>Ad&&(Ad=wd,Bd=[]),Bd.push(a))}function h(a,d,e){function g(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function h(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0180-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1080-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}var i=f(e),j=e<b.length?b.charAt(e):null;return null!==d&&g(d),new c(null!==a?a:h(d,j),d,j,e,i.line,i.column)}function i(){var a,b;return a=wd,b=j(),b!==W&&(xd=a,b=Z(b)),a=b}function j(){var a,b,c;for(a=wd,b=[],c=w(),c===W&&(c=C(),c===W&&(c=A(),c===W&&(c=B(),c===W&&(c=l(),c===W&&(c=n(),c===W&&(c=k()))))));c!==W;)b.push(c),c=w(),c===W&&(c=C(),c===W&&(c=A(),c===W&&(c=B(),c===W&&(c=l(),c===W&&(c=n(),c===W&&(c=k()))))));return b!==W&&(xd=a,b=$(b)),a=b}function k(){var a,c,d;if(a=wd,c=[],ab.test(b.charAt(wd))?(d=b.charAt(wd),wd++):(d=W,0===Cd&&g(bb)),d!==W)for(;d!==W;)c.push(d),ab.test(b.charAt(wd))?(d=b.charAt(wd),wd++):(d=W,0===Cd&&g(bb));else c=_;return c!==W&&(xd=a,c=cb(c)),a=c}function l(){var a,c,d,e;return a=wd,b.substr(wd,4)===db?(c=db,wd+=4):(c=W,0===Cd&&g(eb)),c!==W?(d=m(),d!==W?(b.substr(wd,3)===fb?(e=fb,wd+=3):(e=W,0===Cd&&g(gb)),e!==W?(xd=a,c=hb(d),a=c):(wd=a,a=_)):(wd=a,a=_)):(wd=a,a=_),a}function m(){var a,c,d;return a=wd,Cd++,b.substr(wd,3)===fb?(c=fb,wd+=3):(c=W,0===Cd&&g(gb)),Cd--,c!==W?(wd=a,a=ib):a=_,a===W&&(a=wd,b.length>wd?(c=b.charAt(wd),wd++):(c=W,0===Cd&&g(jb)),c!==W?(d=m(),d===W&&(d=kb),d!==W?(xd=a,c=lb(c,d),a=c):(wd=a,a=_)):(wd=a,a=_)),a}function n(){var a,b,c,d;return a=o(),a===W&&(a=wd,b=p(),b!==W?(c=j(),c!==W?(d=q(),d!==W?(xd=a,b=mb(b,c,d),a=b):(wd=a,a=_)):(wd=a,a=_)):(wd=a,a=_)),a}function o(){var a,c,d,e,f;if(a=wd,60===b.charCodeAt(wd)?(c=nb,wd++):(c=W,0===Cd&&g(ob)),c!==W)if(d=R(),d!==W){for(e=[],f=r();f!==W;)e.push(f),f=r();e!==W?(b.substr(wd,2)===pb?(f=pb,wd+=2):(f=W,0===Cd&&g(qb)),f!==W?(xd=a,c=rb(d,e),a=c):(wd=a,a=_)):(wd=a,a=_)}else wd=a,a=_;else wd=a,a=_;return a}function p(){var a,c,d,e,f;if(a=wd,60===b.charCodeAt(wd)?(c=nb,wd++):(c=W,0===Cd&&g(ob)),c!==W)if(d=R(),d!==W){for(e=[],f=r();f!==W;)e.push(f),f=r();e!==W?(62===b.charCodeAt(wd)?(f=sb,wd++):(f=W,0===Cd&&g(tb)),f!==W?(xd=a,c=ub(d,e),a=c):(wd=a,a=_)):(wd=a,a=_)}else wd=a,a=_;else wd=a,a=_;return a}function q(){var a,c,d,e;return a=wd,b.substr(wd,2)===vb?(c=vb,wd+=2):(c=W,0===Cd&&g(wb)),c!==W?(d=R(),d!==W?(62===b.charCodeAt(wd)?(e=sb,wd++):(e=W,0===Cd&&g(tb)),e!==W?(xd=a,c=xb(d),a=c):(wd=a,a=_)):(wd=a,a=_)):(wd=a,a=_),a}function r(){var a,c,d,e,f,h,i;return a=wd,c=R(),c!==W?(d=wd,61===b.charCodeAt(wd)?(e=yb,wd++):(e=W,0===Cd&&g(zb)),e!==W?(f=S(),f!==W?(h=O(),h!==W?(i=S(),i!==W?(e=[e,f,h,i],d=e):(wd=d,d=_)):(wd=d,d=_)):(wd=d,d=_)):(wd=d,d=_),d===W&&(d=kb),d!==W?(xd=a,c=Ab(c,d),a=c):(wd=a,a=_)):(wd=a,a=_),a}function s(){var a,b,c;for(a=wd,b=[],c=w(),c===W&&(c=C(),c===W&&(c=A(),c===W&&(c=B(),c===W&&(c=k()))));c!==W;)b.push(c),c=w(),c===W&&(c=C(),c===W&&(c=A(),c===W&&(c=B(),c===W&&(c=k()))));return b!==W&&(xd=a,b=$(b)),a=b}function t(){var a,c,d,e,f;return a=wd,c=u(),c!==W?(d=wd,44===b.charCodeAt(wd)?(e=Bb,wd++):(e=W,0===Cd&&g(Cb)),e!==W?(f=t(),f!==W?(e=[e,f],d=e):(wd=d,d=_)):(wd=d,d=_),d===W&&(d=kb),d!==W?(xd=a,c=Db(c,d),a=c):(wd=a,a=_)):(wd=a,a=_),a}function u(){var a,c,d,e,f,h;if(a=wd,c=wd,d=S(),d!==W?(e=z(),e!==W?(f=S(),f!==W?(h=v(),h!==W?(xd=c,d=Eb(e),c=d):(wd=c,c=_)):(wd=c,c=_)):(wd=c,c=_)):(wd=c,c=_),c===W&&(c=wd,d=S(),d!==W?(e=N(),e!==W?(f=S(),f!==W?(h=v(),h!==W?(xd=c,d=Eb(e),c=d):(wd=c,c=_)):(wd=c,c=_)):(wd=c,c=_)):(wd=c,c=_),c===W&&(c=wd,d=S(),d!==W?(e=K(),e!==W?(f=S(),f!==W?(h=v(),h!==W?(xd=c,d=Eb(e),c=d):(wd=c,c=_)):(wd=c,c=_)):(wd=c,c=_)):(wd=c,c=_),c===W&&(c=wd,d=S(),d!==W?(e=L(),e!==W?(f=S(),f!==W?(h=v(),h!==W?(xd=c,d=Eb(e),c=d):(wd=c,c=_)):(wd=c,c=_)):(wd=c,c=_)):(wd=c,c=_),c===W&&(c=wd,d=S(),d!==W?(e=P(),e!==W?(f=S(),f!==W?(h=v(),h!==W?(xd=c,d=Eb(e),c=d):(wd=c,c=_)):(wd=c,c=_)):(wd=c,c=_)):(wd=c,c=_),c===W&&(c=wd,d=S(),d!==W?(e=Q(),e!==W?(f=S(),f!==W?(h=v(),h!==W?(xd=c,d=Eb(e),c=d):(wd=c,c=_)):(wd=c,c=_)):(wd=c,c=_)):(wd=c,c=_),c===W)))))){for(c=wd,d=wd,e=[],Fb.test(b.charAt(wd))?(f=b.charAt(wd),wd++):(f=W,0===Cd&&g(Gb));f!==W;)e.push(f),Fb.test(b.charAt(wd))?(f=b.charAt(wd),wd++):(f=W,0===Cd&&g(Gb));e!==W&&(e=b.substring(d,wd)),d=e,d!==W&&(xd=c,d=Hb(d)),c=d}return c!==W&&(xd=a,c=Ib(c)),a=c}function v(){var a,c,d;return a=wd,Cd++,Jb.test(b.charAt(wd))?(c=b.charAt(wd),wd++):(c=W,0===Cd&&g(Kb)),c===W&&(c=wd,Cd++,b.length>wd?(d=b.charAt(wd),wd++):(d=W,0===Cd&&g(jb)),Cd--,d===W?c=ib:(wd=c,c=_)),Cd--,c!==W?(wd=a,a=ib):a=_,a}function w(){var a,b,c,d;return a=wd,b=x(),b!==W?(c=j(),c!==W?(d=y(),d!==W?(xd=a,b=Lb(b,c,d),a=b):(wd=a,a=_)):(wd=a,a=_)):(wd=a,a=_),a}function x(){var a,c,d,e,f;return a=wd,b.substr(wd,2)===Mb?(c=Mb,wd+=2):(c=W,0===Cd&&g(Nb)),c!==W?(Ob.test(b.charAt(wd))?(d=b.charAt(wd),wd++):(d=W,0===Cd&&g(Pb)),d!==W?(e=E(),e!==W?(b.substr(wd,2)===Qb?(f=Qb,wd+=2):(f=W,0===Cd&&g(Rb)),f!==W?(xd=a,c=Sb(d,e),a=c):(wd=a,a=_)):(wd=a,a=_)):(wd=a,a=_)):(wd=a,a=_),a}function y(){var a,c,d,e;if(a=wd,b.substr(wd,3)===Tb?(c=Tb,wd+=3):(c=W,0===Cd&&g(Ub)),c!==W){for(d=[],e=T(),e===W&&(Vb.test(b.charAt(wd))?(e=b.charAt(wd),wd++):(e=W,0===Cd&&g(Wb)));e!==W;)d.push(e),e=T(),e===W&&(Vb.test(b.charAt(wd))?(e=b.charAt(wd),wd++):(e=W,0===Cd&&g(Wb)));d!==W?(b.substr(wd,2)===Qb?(e=Qb,wd+=2):(e=W,0===Cd&&g(Rb)),e!==W?(xd=a,c=Xb(d),a=c):(wd=a,a=_)):(wd=a,a=_)}else wd=a,a=_;return a}function z(){var a,c,d,e,f;return a=wd,c=wd,b.substr(wd,3)===Yb?(d=Yb,wd+=3):(d=W,0===Cd&&g(Zb)),d!==W?(e=D(),e!==W?(b.substr(wd,3)===$b?(f=$b,wd+=3):(f=W,0===Cd&&g(_b)),f!==W?(d=[d,e,f],c=d):(wd=c,c=_)):(wd=c,c=_)):(wd=c,c=_),c===W&&(c=wd,b.substr(wd,2)===Mb?(d=Mb,wd+=2):(d=W,0===Cd&&g(Nb)),d!==W?(e=D(),e!==W?(b.substr(wd,2)===Qb?(f=Qb,wd+=2):(f=W,0===Cd&&g(Rb)),f!==W?(d=[d,e,f],c=d):(wd=c,c=_)):(wd=c,c=_)):(wd=c,c=_)),c!==W&&(xd=a,c=ac(c)),a=c}function A(){var a,c,d,e,f,h;return a=wd,b.substr(wd,2)===Mb?(c=Mb,wd+=2):(c=W,0===Cd&&g(Nb)),c!==W?(d=wd,Cd++,bc.test(b.charAt(wd))?(e=b.charAt(wd),wd++):(e=W,0===Cd&&g(cc)),Cd--,e===W?d=ib:(wd=d,d=_),d!==W?(38===b.charCodeAt(wd)?(e=dc,wd++):(e=W,0===Cd&&g(ec)),e===W&&(e=kb),e!==W?(f=D(),f!==W?(b.substr(wd,2)===Qb?(h=Qb,wd+=2):(h=W,0===Cd&&g(Rb)),h!==W?(xd=a,c=fc(e,f),a=c):(wd=a,a=_)):(wd=a,a=_)):(wd=a,a=_)):(wd=a,a=_)):(wd=a,a=_),a}function B(){var a,c,d,e;return a=wd,b.substr(wd,3)===Yb?(c=Yb,wd+=3):(c=W,0===Cd&&g(Zb)),c!==W?(d=D(),d!==W?(b.substr(wd,3)===$b?(e=$b,wd+=3):(e=W,0===Cd&&g(_b)),e!==W?(xd=a,c=gc(d),a=c):(wd=a,a=_)):(wd=a,a=_)):(wd=a,a=_),a}function C(){var a,c,d,e,f;if(a=wd,b.substr(wd,2)===Mb?(c=Mb,wd+=2):(c=W,0===Cd&&g(Nb)),c!==W)if(hc.test(b.charAt(wd))?(d=b.charAt(wd),wd++):(d=W,0===Cd&&g(ic)),d!==W){for(e=[],f=T(),f===W&&(Vb.test(b.charAt(wd))?(f=b.charAt(wd),wd++):(f=W,0===Cd&&g(Wb)));f!==W;)e.push(f),f=T(),f===W&&(Vb.test(b.charAt(wd))?(f=b.charAt(wd),wd++):(f=W,0===Cd&&g(Wb)));e!==W?(b.substr(wd,2)===Qb?(f=Qb,wd+=2):(f=W,0===Cd&&g(Rb)),f!==W?(xd=a,c=jc(d,e),a=c):(wd=a,a=_)):(wd=a,a=_)}else wd=a,a=_;else wd=a,a=_;return a}function D(){var a,c,d,e,f;return a=wd,c=F(),c!==W?(d=wd,124===b.charCodeAt(wd)?(e=kc,wd++):(e=W,0===Cd&&g(lc)),e!==W?(f=D(),f!==W?(e=[e,f],d=e):(wd=d,d=_)):(wd=d,d=_),d===W&&(d=kb),d!==W?(xd=a,c=Db(c,d),a=c):(wd=a,a=_)):(wd=a,a=_),a}function E(){var a,b;return a=wd,b=D(),b!==W&&(xd=a,b=mc(b)),a=b}function F(){var a,b,c,d,e;return a=wd,b=S(),b!==W?(c=G(),c===W&&(c=kb),c!==W?(d=H(),d!==W?(e=S(),e!==W?(xd=a,b=nc(c,d),a=b):(wd=a,a=_)):(wd=a,a=_)):(wd=a,a=_)):(wd=a,a=_),a===W&&(a=wd,b=S(),b!==W?(c=G(),c!==W?(d=S(),d!==W?(xd=a,b=oc(c),a=b):(wd=a,a=_)):(wd=a,a=_)):(wd=a,a=_)),a}function G(){var a,c,d;if(a=wd,c=[],b.substr(wd,3)===pc?(d=pc,wd+=3):(d=W,0===Cd&&g(qc)),d!==W)for(;d!==W;)c.push(d),b.substr(wd,3)===pc?(d=pc,wd+=3):(d=W,0===Cd&&g(qc));else c=_;return c!==W&&(xd=a,c=rc(c)),a=c,a===W&&(a=wd,b.substr(wd,2)===sc?(c=sc,wd+=2):(c=W,0===Cd&&g(tc)),c!==W&&(xd=a,c=uc()),a=c,a===W&&(a=wd,46===b.charCodeAt(wd)?(c=vc,wd++):(c=W,0===Cd&&g(wc)),c!==W&&(xd=a,c=uc()),a=c,a===W&&(a=wd,47===b.charCodeAt(wd)?(c=xc,wd++):(c=W,0===Cd&&g(yc)),c!==W&&(xd=a,c=zc()),a=c))),a}function H(){var a,c,d,e,f;return a=wd,c=I(),c!==W?(d=wd,46===b.charCodeAt(wd)?(e=vc,wd++):(e=W,0===Cd&&g(wc)),e!==W?(f=H(),f!==W?(e=[e,f],d=e):(wd=d,d=_)):(wd=d,d=_),d===W&&(d=kb),d!==W?(xd=a,c=Db(c,d),a=c):(wd=a,a=_)):(wd=a,a=_),a}function I(){var a,c,d,e,f,h;if(a=wd,c=wd,d=wd,Ac.test(b.charAt(wd))?(e=b.charAt(wd),wd++):(e=W,0===Cd&&g(Bc)),e!==W){for(f=[],Cc.test(b.charAt(wd))?(h=b.charAt(wd),wd++):(h=W,0===Cd&&g(Dc));h!==W;)f.push(h),Cc.test(b.charAt(wd))?(h=b.charAt(wd),wd++):(h=W,0===Cd&&g(Dc));f!==W?(e=[e,f],d=e):(wd=d,d=_)}else wd=d,d=_;if(d!==W&&(d=b.substring(c,wd)),c=d,c!==W){for(d=[],e=J();e!==W;)d.push(e),e=J();d!==W?(xd=a,c=Ec(c,d),a=c):(wd=a,a=_)}else wd=a,a=_;return a}function J(){var a,c,d,e,f,h;return a=wd,91===b.charCodeAt(wd)?(c=Fc,wd++):(c=W,0===Cd&&g(Gc)),c!==W?(d=S(),d!==W?(e=M(),e===W&&(e=N(),e===W&&(e=F())),e!==W?(f=S(),f!==W?(93===b.charCodeAt(wd)?(h=Hc,wd++):(h=W,0===Cd&&g(Ic)),h!==W?(xd=a,c=Jc(e),a=c):(wd=a,a=_)):(wd=a,a=_)):(wd=a,a=_)):(wd=a,a=_)):(wd=a,a=_),a}function K(){var a,c;return a=wd,b.substr(wd,4)===Kc?(c=Kc,wd+=4):(c=W,0===Cd&&g(Lc)),c!==W&&(xd=a,c=Mc()),a=c,a===W&&(a=wd,b.substr(wd,5)===Nc?(c=Nc,wd+=5):(c=W,0===Cd&&g(Oc)),c!==W&&(xd=a,c=Pc()),a=c),a}function L(){var a,c,d,e,f,h,i;if(a=wd,45===b.charCodeAt(wd)?(c=Qc,wd++):(c=W,0===Cd&&g(Rc)),c===W&&(c=kb),c!==W){if(d=[],Sc.test(b.charAt(wd))?(e=b.charAt(wd),wd++):(e=W,0===Cd&&g(Tc)),e!==W)for(;e!==W;)d.push(e),Sc.test(b.charAt(wd))?(e=b.charAt(wd),wd++):(e=W,0===Cd&&g(Tc));else d=_;if(d!==W){if(e=wd,46===b.charCodeAt(wd)?(f=vc,wd++):(f=W,0===Cd&&g(wc)),f!==W){if(h=[],Sc.test(b.charAt(wd))?(i=b.charAt(wd),wd++):(i=W,0===Cd&&g(Tc)),i!==W)for(;i!==W;)h.push(i),Sc.test(b.charAt(wd))?(i=b.charAt(wd),wd++):(i=W,0===Cd&&g(Tc));else h=_;h!==W?(f=[f,h],e=f):(wd=e,e=_)}else wd=e,e=_;e===W&&(e=kb),e!==W?(xd=a,c=Uc(),a=c):(wd=a,a=_)}else wd=a,a=_}else wd=a,a=_;return a}function M(){var a,c,d;if(a=wd,c=[],Sc.test(b.charAt(wd))?(d=b.charAt(wd),wd++):(d=W,0===Cd&&g(Tc)),d!==W)for(;d!==W;)c.push(d),Sc.test(b.charAt(wd))?(d=b.charAt(wd),wd++):(d=W,0===Cd&&g(Tc));else c=_;return c!==W&&(xd=a,c=Vc()),a=c}function N(){var a,c,d,e;if(a=wd,34===b.charCodeAt(wd)?(c=Wc,wd++):(c=W,0===Cd&&g(Xc)),c!==W){for(d=[],e=T(),e===W&&(Yc.test(b.charAt(wd))?(e=b.charAt(wd),wd++):(e=W,0===Cd&&g(Zc)));e!==W;)d.push(e),e=T(),e===W&&(Yc.test(b.charAt(wd))?(e=b.charAt(wd),wd++):(e=W,0===Cd&&g(Zc)));d!==W?(34===b.charCodeAt(wd)?(e=Wc,wd++):(e=W,0===Cd&&g(Xc)),e!==W?(xd=a,c=$c(d),a=c):(wd=a,a=_)):(wd=a,a=_)}else wd=a,a=_;if(a===W)if(a=wd,39===b.charCodeAt(wd)?(c=_c,wd++):(c=W,0===Cd&&g(ad)),c!==W){for(d=[],e=T(),e===W&&(bd.test(b.charAt(wd))?(e=b.charAt(wd),wd++):(e=W,0===Cd&&g(cd)));e!==W;)d.push(e),e=T(),e===W&&(bd.test(b.charAt(wd))?(e=b.charAt(wd),wd++):(e=W,0===Cd&&g(cd)));d!==W?(39===b.charCodeAt(wd)?(e=_c,wd++):(e=W,0===Cd&&g(ad)),e!==W?(xd=a,c=$c(d),a=c):(wd=a,a=_)):(wd=a,a=_)}else wd=a,a=_;return a}function O(){var a,c,d,e,f;if(a=wd,34===b.charCodeAt(wd)?(c=Wc,wd++):(c=W,0===Cd&&g(Xc)),c!==W){for(d=wd,e=[],Yc.test(b.charAt(wd))?(f=b.charAt(wd),wd++):(f=W,0===Cd&&g(Zc));f!==W;)e.push(f),Yc.test(b.charAt(wd))?(f=b.charAt(wd),wd++):(f=W,0===Cd&&g(Zc));e!==W&&(e=b.substring(d,wd)),d=e,d!==W?(34===b.charCodeAt(wd)?(e=Wc,wd++):(e=W,0===Cd&&g(Xc)),e!==W?(xd=a,c=Eb(d),a=c):(wd=a,a=_)):(wd=a,a=_)}else wd=a,a=_;if(a===W)if(a=wd,39===b.charCodeAt(wd)?(c=_c,wd++):(c=W,0===Cd&&g(ad)),c!==W){for(d=wd,e=[],bd.test(b.charAt(wd))?(f=b.charAt(wd),wd++):(f=W,0===Cd&&g(cd));f!==W;)e.push(f),bd.test(b.charAt(wd))?(f=b.charAt(wd),wd++):(f=W,0===Cd&&g(cd));e!==W&&(e=b.substring(d,wd)),d=e,d!==W?(39===b.charCodeAt(wd)?(e=_c,wd++):(e=W,0===Cd&&g(ad)),e!==W?(xd=a,c=Eb(d),a=c):(wd=a,a=_)):(wd=a,a=_)}else wd=a,a=_;return a}function P(){var a,c;return a=wd,b.substr(wd,4)===dd?(c=dd,wd+=4):(c=W,0===Cd&&g(ed)),c!==W&&(xd=a,c=fd()),a=c}function Q(){var a,c,d,e,f,h,i;if(a=wd,b.substr(wd,9)===gd?(c=gd,wd+=9):(c=W,0===Cd&&g(hd)),c===W)if(c=wd,b.substr(wd,4)===id?(d=id,wd+=4):(d=W,0===Cd&&g(jd)),d!==W)if(e=S(),e!==W){if(f=wd,Cd++,h=[],kd.test(b.charAt(wd))?(i=b.charAt(wd),wd++):(i=W,0===Cd&&g(ld)),i!==W)for(;i!==W;)h.push(i),kd.test(b.charAt(wd))?(i=b.charAt(wd),wd++):(i=W,0===Cd&&g(ld));else h=_;Cd--,h===W?f=ib:(wd=f,f=_),f!==W?(d=[d,e,f],c=d):(wd=c,c=_)}else wd=c,c=_;else wd=c,c=_;return c!==W&&(xd=a,c=md()),a=c}function R(){var a,c,d,e,f;if(a=wd,c=S(),c!==W){if(d=wd,e=[],nd.test(b.charAt(wd))?(f=b.charAt(wd),wd++):(f=W,0===Cd&&g(od)),f!==W)for(;f!==W;)e.push(f),nd.test(b.charAt(wd))?(f=b.charAt(wd),wd++):(f=W,0===Cd&&g(od));else e=_;e!==W&&(e=b.substring(d,wd)),d=e,d!==W?(e=S(),e!==W?(xd=a,c=pd(d),a=c):(wd=a,a=_)):(wd=a,a=_)}else wd=a,a=_;return a}function S(){var a,c,d;for(Cd++,a=wd,c=[],rd.test(b.charAt(wd))?(d=b.charAt(wd),wd++):(d=W,0===Cd&&g(sd));d!==W;)c.push(d),rd.test(b.charAt(wd))?(d=b.charAt(wd),wd++):(d=W,0===Cd&&g(sd));return c!==W&&(c=b.substring(a,wd)),a=c,Cd--,a===W&&(c=W,0===Cd&&g(qd)),a}function T(){var a,c,d;return a=wd,92===b.charCodeAt(wd)?(c=td,wd++):(c=W,0===Cd&&g(ud)),c!==W?(b.length>wd?(d=b.charAt(wd),wd++):(d=W,0===Cd&&g(jb)),d!==W?(xd=a,c=vd(d),a=c):(wd=a,a=_)):(wd=a,a=_),a}var U,V=arguments.length>1?arguments[1]:{},W={},X={start:i,attrValue:s,attrArguments:t,pathQuery:D,path:F},Y=i,Z=function(a){return{type:Ed.ROOT,children:a,version:Fd.VERSION}},$=function(a){return Dd.compact(a)},_=W,ab=/^[^<{]/,bb={type:"class",value:"[^<{]",description:"[^<{]"},cb=function(a){return{type:Ed.TEXT,value:a.join("")}},db="<!--",eb={type:"literal",value:"<!--",description:'"<!--"'},fb="-->",gb={type:"literal",value:"-->",description:'"-->"'},hb=function(a){return{type:Ed.XCOMMENT,value:a.trim()}},ib=void 0,jb={type:"any",description:"any character"},kb=null,lb=function(a,b){return a+(null!=b?b:"")},mb=function(a,b,c){if(a.name.toLowerCase()!==c.toLowerCase())throw new Error("Element tag mismatch: "+a.name+" !== "+c);return a.type=Ed.ELEMENT,a.children=b,a},nb="<",ob={type:"literal",value:"<",description:'"<"'},pb="/>",qb={type:"literal",value:"/>",description:'"/>"'},rb=function(a,b){return{name:a,type:Ed.ELEMENT,attributes:b,children:[]}},sb=">",tb={type:"literal",value:">",description:'">"'},ub=function(a,b){return{name:a,attributes:b}},vb="</",wb={type:"literal",value:"</",description:'"</"'},xb=function(a){return a},yb="=",zb={type:"literal",value:"=",description:'"="'},Ab=function(a,b){return b=null!=b?b[2]:"",{type:Ed.ATTRIBUTE,name:a,value:b,children:d(b,Dd.extend({},V,{startRule:"attrValue"})),arguments:d(b,Dd.extend({},V,{startRule:"attrArguments"}))}},Bb=",",Cb={type:"literal",value:",",description:'","'},Db=function(a,b){return null!=b&&null!=b[1]?[a].concat(b[1]):[a]},Eb=function(a){return a},Fb=/^[^,]/,Gb={type:"class",value:"[^,]",description:"[^,]"},Hb=function(a){return a.trim()},Ib=function(a){return Dd.isObject(a)?a:{type:Ed.LITERAL,value:a}},Jb=/^[,]/,Kb={type:"class",value:"[,]",description:"[,]"},Lb=function(a,b,c){if(V.strict&&!Dd.isEqual(a.value.raw,c))throw new Error("Section tag mismatch: "+a.value.raw+" !== "+c);return a.value=a.value.result,a.children=b,a},Mb="{{",Nb={type:"literal",value:"{{",description:'"{{"'},Ob=/^[#\^]/,Pb={type:"class",value:"[#\\^]",description:"[#\\^]"},Qb="}}",Rb={type:"literal",value:"}}",description:'"}}"'},Sb=function(a,b){return{type:Ed["#"===a?"SECTION":"INVERTED"],value:b}},Tb="{{/",Ub={type:"literal",value:"{{/",description:'"{{/"'},Vb=/^[^}]/,Wb={type:"class",value:"[^}]",description:"[^}]"},Xb=function(a){return a.join("")},Yb="{{{",Zb={type:"literal",value:"{{{",description:'"{{{"'},$b="}}}",_b={type:"literal",value:"}}}",description:'"}}}"'},ac=function(a){return{type:Ed.INTERPOLATOR,value:a[1]}},bc=/^[\/#{!>\^]/,cc={type:"class",value:"[\\/#{!>\\^]",description:"[\\/#{!>\\^]"},dc="&",ec={type:"literal",value:"&",description:'"&"'},fc=function(a,b){return{type:a?Ed.TRIPLE:Ed.INTERPOLATOR,value:b}},gc=function(a){return{type:Ed.TRIPLE,value:a}},hc=/^[!>]/,ic={type:"class",value:"[!>]",description:"[!>]"},jc=function(a,b){return{type:">"===a?Ed.PARTIAL:Ed.MCOMMENT,value:b.join("").trim()}},kc="|",lc={type:"literal",value:"|",description:'"|"'},mc=function(a){return{raw:e(),result:a}},nc=function(a,b){return null==a&&(a={type:"all"}),a.parts=b,a},oc=function(a){return a.parts=[],a},pc="../",qc={type:"literal",value:"../",description:'"../"'},rc=function(a){return{type:"parent",distance:a.length}},sc="./",tc={type:"literal",value:"./",description:'"./"'},uc=function(){return{type:"local"}},vc=".",wc={type:"literal",value:".",description:'"."'},xc="/",yc={type:"literal",value:"/",description:'"/"'},zc=function(){return{type:"root"}},Ac=/^[a-z0-9$_]/i,Bc={type:"class",value:"[a-z0-9$_]i",description:"[a-z0-9$_]i"},Cc=/^[a-z0-9:\-_$]/i,Dc={type:"class",value:"[a-z0-9:\\-_$]i",description:"[a-z0-9:\\-_$]i"},Ec=function(a,b){return{key:a,children:b}},Fc="[",Gc={type:"literal",value:"[",description:'"["'},Hc="]",Ic={type:"literal",value:"]",description:'"]"'},Jc=function(a){return a},Kc="true",Lc={type:"literal",value:"true",description:'"true"'},Mc=function(){return!0},Nc="false",Oc={type:"literal",value:"false",description:'"false"'},Pc=function(){return!1},Qc="-",Rc={type:"literal",value:"-",description:'"-"'},Sc=/^[0-9]/,Tc={type:"class",value:"[0-9]",description:"[0-9]"},Uc=function(){return parseFloat(e(),10)},Vc=function(){return parseInt(e(),10)},Wc='"',Xc={type:"literal",value:'"',description:'"\\""'},Yc=/^[^"]/,Zc={type:"class",value:'[^"]',description:'[^"]'},$c=function(a){return a.join("")},_c="'",ad={type:"literal",value:"'",description:'"\'"'},bd=/^[^']/,cd={type:"class",value:"[^']",description:"[^']"},dd="null",ed={type:"literal",value:"null",description:'"null"'},fd=function(){return null},gd="undefined",hd={type:"literal",value:"undefined",description:'"undefined"'},id="void",jd={type:"literal",value:"void",description:'"void"'},kd=/^[,; \t\n\r]/,ld={type:"class",value:"[,; \\t\\n\\r]",description:"[,; \\t\\n\\r]"},md=function(){return void 0},nd=/^[a-z0-9_\-]/i,od={type:"class",value:"[a-z0-9_\\-]i",description:"[a-z0-9_\\-]i"},pd=function(a){return a},qd={type:"other",description:"whitespace"},rd=/^[ \t\n\r]/,sd={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},td="\\",ud={type:"literal",value:"\\",description:'"\\\\"'},vd=function(a){return a},wd=0,xd=0,yd=0,zd={line:1,column:1,seenCR:!1},Ad=0,Bd=[],Cd=0;if("startRule"in V){if(!(V.startRule in X))throw new Error("Can't start parsing from rule \""+V.startRule+'".');Y=X[V.startRule]}var Dd=a("underscore"),Ed=a("./types"),Fd=a("./");if(V=Dd.defaults(V||{},{strict:!0}),U=Y(),U!==W&&wd===b.length)return U;throw U!==W&&wd<b.length&&g({type:"end",description:"end of input"}),h(null,Bd,Ad)}return b(c,Error),{SyntaxError:c,parse:d}}()},{"./":3,"./types":12,underscore:17}],5:[function(a,b){var c=a("trackr"),d=a("underscore"),e=a("./util"),f=a("./m+xml").parse,g=a("./track").track,h=b.exports=function i(a,b,d){this.proxies=[],this._dep=new c.Dependency,i.isModel(b)&&(this.parent=b),this.set(a,d&&d.track)};h.isModel=function(a){return a instanceof h},h.extend=e.subclass,h._defaultProxies=[{isList:!0,match:function(a){return d.isArray(a)},get:function(a,b){return"length"===b?this.length(a):a[b]},length:function(a){var b;return"number"==typeof(b=a.$length)?b:a.length},keys:function(a){return d.range(this.length(a))},isEmpty:function(a){return!!this.length(a)}},{match:function(){return!0},get:function(a,b){return null!=a?a[b]:void 0}}],h.callProxyMethod=function(a,b,c,f,g){var f=d.isArray(f)?d.clone(f):[];return f.unshift(a,c,b),f.push(g),e.result.apply(null,f)},d.extend(h.prototype,{set:function(a,b){return b!==!1&&(a=g(a,b)),this.data=a,this._dep.changed(),this},getAllModels:function(){for(var a=[this],b=this;b.parent;)a.unshift(b=b.parent);return a},getModelAtOffset:function(a){if((!d.isNumber(a)||isNaN(a))&&(a=0),0>a)return this.getAllModels()[~a];for(var b=this;a&&b;)b=b.parent,a--;return b},getRootModel:function(){for(var a=this;null!=a.parent;)a=a.parent;return a},findModel:function(a){for(var b=0,c=this;null!=c;){if(a.call(this,c,b++))return c;c=c.parent}},getLocal:function(a){if("string"==typeof a&&(a=f(a,{startRule:"path"})),null==a&&(a={parts:[]}),!d.isObject(a))throw new Error("Expecting string or object for path.");var b=this;return this._dep.depend(),d.reduce(a.parts,function(a,c){return a=b._get(a,c.key),d.each(c.children,function(c){d.isObject(c)&&(c=b.get(c)),a=b._get(a,c)}),a},this.data)},get:function(a){var b=this;if("string"==typeof a&&(a=f(a,{startRule:"pathQuery"})),d.isArray(a)||(a=null!=a?[a]:[]),!a.length){var c=this.findModel(function(a){return!d.isUndefined(a.data)});if(null==c)return;var e=c.data;return d.isFunction(e)&&(e=e.call(this,null)),e}return d.reduce(a,function(a,c,e){var f,g=b,h=!0;if("root"===c.type?g=b.getRootModel():"parent"===c.type?(g=b.getModelAtOffset(c.distance),h=!1):"all"===c.type&&(h=!1),null!=g){for(;d.isUndefined(f)&&null!=g&&(f=g.getLocal(c),g=g.parent,!h););return d.isFunction(f)&&(f=f.call(b,0===e?null:a)),f
}},void 0)},_get:function(a,b){return this.callProxyMethod(this.getProxyByValue(a),a,"get",b)},proxy:function(a){var b=this.getProxyByValue(this.data);if(null==a)return b;var c=d.toArray(arguments);return c.unshift(b,this.data),this.callProxyMethod.apply(this,c)},callProxyMethod:function(a,b,c){return h.callProxyMethod(a,b,c,Array.prototype.slice.call(arguments,3),this)},getAllProxies:function(){for(var a=[],b=this;null!=b;)a.push.apply(a,b.proxies),b=b.parent;return a},registerProxy:function(a){if("object"!=typeof a||null==a)throw new Error("Expecting object for proxy.");if("function"!=typeof a.match)throw new Error("Layer missing required match method.");if("function"!=typeof a.get)throw new Error("Layer missing required get method.");return this.proxies.unshift(a),this},getProxyByValue:function(a){var b;return b=d.find(this.proxies,function(b){return b.match(a)}),null==b&&null!=this.parent&&(b=this.parent.getProxyByValue(a)),null==b&&(b=d.find(h._defaultProxies,function(b){return b.match(a)})),b}})},{"./m+xml":4,"./track":11,"./util":13,trackr:16,underscore:17}],6:[function(a,b){var c=a("trackr"),d=a("underscore"),e=a("./types"),f=a("./m+xml").parse,g=a("./util"),h=a("./view"),i=a("./model"),j=a("./section"),k=a("./track").track,l=a("./domrange"),m=b.exports=h.extend({constructor:function(a,b){b=b||{},this._partials={},this._components={};var c=b.template||d.result(this,"template");null!=c&&this.setTemplate(c),this.decorate(d.extend({},b.decorators,d.result(this,"decorators"))),this.setPartial(d.extend({},b.partials,d.result(this,"partials"))),h.call(this,a,b)},setTemplate:function(a){if(d.isString(a)&&(a=f(a)),!d.isObject(a)||a.type!==e.ROOT)throw new Error("Expecting string or parsed template.");return this._template=a,this},decorate:function(a,b,c){if("object"==typeof a&&null==b)return d.each(a,function(a,b){d.isArray(a)?this.decorate(b,a[0],a[1]):this.decorate(b,a,c)},this),this;if("string"!=typeof a||""===a)throw new Error("Expecting non-empty string for decorator name.");if("function"!=typeof b)throw new Error("Expecting function for decorator.");null==this._decorators&&(this._decorators={}),null==this._decorators[a]&&(this._decorators[a]=[]);var e=this._decorators[a];return d.findWhere(e,{callback:b})||e.push({callback:b,options:c||{}}),this},findDecorators:function(a){for(var b=[],c=this;null!=c;)null!=c._decorators&&d.isArray(c._decorators[a])&&c._decorators[a].forEach(function(a){d.findWhere(b,{callback:a.callback})||b.push(d.extend({context:c},a))}),c=c.parentRange;return b},stopDecorating:function(a,b){if("function"==typeof a&&null==b&&(b=a,a=null),null==this._decorators||null==a&&null==b)this._decorators={};else if(null==b)delete this._decorators[a];else if(null==a)d.each(this._decorators,function(a,c){this._decorators[c]=d.filter(a,function(a){return a.callback!==b})},this);else{var c=this._decorators[a];this._decorators[a]=d.filter(c,function(a){return a.callback!==b})}return this},setPartial:function(a,b){if(d.isObject(a)&&null==b)return d.each(a,function(a,b){this.setPartial(b,a)},this),this;if(!d.isString(a)&&""!==a)throw new Error("Expecting non-empty string for partial name.");if(d.isString(b)&&(b=f(b)),d.isObject(b)&&b.type===e.ROOT&&(b=m.extend({template:b})),null!=b&&!g.isSubClass(h,b))throw new Error("Expecting string template, parsed template, View subclass or function for partial.");return null==b?(delete this._partials[a],b=void 0):this._partials[a]=b,this.trigger("partial",a,b),this.trigger("partial:"+a,b),this},findPartial:function(a){for(var b=this;null!=b;){if(null!=b._partials&&null!=b._partials[a])return b._partials[a];b=b.parentRange}},getComponent:function(a){var b,c,d,e,f;if(b=this._components,null!=b[a]&&b[a].length)return b[a][0];for(e in b)for(f in b[e])if(c=b[e][f],c instanceof m&&(d=c.getComponent(a),null!=d))return d;return null},getComponents:function(a){return d.reduce(this._components,function(b,c,d){return d===a&&b.push.apply(b,c),c.forEach(function(c){c instanceof m&&b.push.apply(b,c.getComponents(a))}),b},[])},render:function(){if(null==this._template)throw new Error("Expected a template to be set before rendering.");var a;this.setMembers(this.renderTemplate(this._template,null,a=[])),d.invoke(a,"mount")},renderTemplate:function(a,b,c){null==b&&(b=this),null==c&&(c=[]);var f=this;if(d.isArray(a))return a.reduce(function(a,e){var g=f.renderTemplate(e,b,c);return d.isArray(g)?a.push.apply(a,g):null!=g&&a.push(g),a},[]);switch(a.type){case e.ROOT:return this.renderTemplate(a.children,b,c);case e.ELEMENT:var h,i=this.renderPartial(a.name,b);if(null!=i)return i.addData(h=k({})),a.attributes.forEach(function(a){f.autorun(function(c){var d=this.renderArguments(a.arguments,b);1===d.length?d=d[0]:d.length||(d=void 0),c.firstRun?h.defineProperty(a.name,d):h[a.name]=d})}),c.push(i),i;var m=document.createElement(a.name);a.attributes.forEach(function(a){this.renderDecorations(m,a,b)||this.autorun(function(){m.setAttribute(a.name,this.renderTemplateAsString(a.children,b))})},this);var n,o,p=this.renderTemplate(a.children,b,c);for(o in p)n=p[o],n instanceof l?(n.parentRange=b,n.attach(m)):m.appendChild(n);return m;case e.TEXT:return document.createTextNode(g.decodeEntities(a.value));case e.HTML:return new l(g.parseHTML(a.value));case e.XCOMMENT:return document.createComment(a.value);case e.INTERPOLATOR:var q=document.createTextNode("");return this.autorun(function(){var c=b.get(a.value);q.nodeValue="string"==typeof c?c:null!=c?c.toString():""}),q;case e.TRIPLE:var r=new l;return this.autorun(function(){r.setMembers(g.parseHTML(b.get(a.value)))}),r;case e.INVERTED:case e.SECTION:var s=new j(b.model).invert(a.type===e.INVERTED).setPath(a.value).onRow(function(){var b;this.setMembers(f.renderTemplate(a.children,this,b=[])),d.invoke(b,"mount")});return c.push(s),s;case e.PARTIAL:var t=this.renderPartial(a.value,b);return t&&c.push(t),t}},renderTemplateAsString:function(a,b){null==b&&(b=this),b instanceof h&&(b=b.model);var c=this;if(d.isArray(a))return a.map(function(a){return c.renderTemplateAsString(a,b)}).filter(function(a){return null!=a}).join("");switch(a.type){case e.ROOT:return this.renderTemplateAsString(a.children,b);case e.TEXT:return a.value;case e.INTERPOLATOR:case e.TRIPLE:var f=b.get(a.value);return null!=f?f.toString():"";case e.SECTION:case e.INVERTED:var g,k,f,l,m,n,o;if(g=a.type===e.INVERTED,f=b.get(a.value),k=new i(f,b),n=k.getProxyByValue(f),o=k.callProxyMethod(n,f,"isList"),l=j.isEmpty(k,n),m=function(d){var e;return null==d?e=k:(e=k.callProxyMethod(n,f,"get",d),e=new i(e,new i({$key:d},b))),c.renderTemplateAsString(a.children,e)},!(l^g))return o&&!g?k.callProxyMethod(n,f,"keys").map(m).join(""):m()}},renderArguments:function(a,b){null==b&&(b=this),b instanceof h&&(b=b.model);var c=this;if(d.isArray(a))return a.map(function(a){return c.renderArguments(a,b)}).filter(function(a){return null!=a});switch(a.type){case e.INTERPOLATOR:return b.get(a.value);case e.LITERAL:return a.value}},renderPartial:function(a,b,e){var f,i;if("string"==typeof a&&(i=a,a=this.findPartial(a)),!g.isSubClass(h,a))return null;null==b&&(b=this),b instanceof h&&(b=b.model);var j=c.nonreactive(function(){return new a(b,e)});return i&&(f=this._components,null==f[i]&&(f[i]=[]),f[i].push(j),j.once("stop",function(){f[i]=d.without(f[i],j)})),j},renderDecorations:function(a,b,c){var d=this,e=this.findDecorators(b.name);return e.length?(null==c&&(c=this),c instanceof h&&(c=c.model),this.autorun(function(){e.forEach(function(e){d.autorun(function(f){var g=[{target:a,model:c,view:d,template:b,comp:f,options:e.options}];e.options&&"string"===e.options.parse?g.push(d.renderTemplateAsString(b.children,c)):(null==e.options||e.options.parse!==!1)&&(g=g.concat(d.renderArguments(b.arguments,c))),e.callback.apply(e.context||d,g)})})})):void 0}},{render:function(a,b,c){return c=d.extend({},c||{},{template:a}),new m(b||null,c)}})},{"./domrange":1,"./m+xml":4,"./model":5,"./section":10,"./track":11,"./types":12,"./util":13,"./view":14,trackr:16,underscore:17}],7:[function(a,b){function c(a){this.name=a}function d(a,b){if("object"==typeof a&&null==b)return h.each(a,function(a,b){this.addAction(b,a)},this),this;if("string"!=typeof a||""===a)throw new Error("Expecting non-empty string for action name.");if("function"!=typeof b)throw new Error("Expecting function for action.");return null==this._actions&&(this._actions={}),null==this._actions[a]&&(this._actions[a]=[]),~this._actions[a].indexOf(b)||this._actions[a].push(b),this}function e(a,b){if("object"==typeof a&&null==b)return h.each(a,function(a,b){this.addActionOnce(b,a)},this),this;var c;return this.addAction(a,c=function(){this.removeAction(a,c),b.apply(this,arguments)}),this}function f(a,b){return"function"==typeof a&&null==b&&(b=a,a=null),null==this._actions||null==a&&null==b?this._actions={}:null==b?delete this._actions[a]:null==a?h.each(this._actions,function(a,c){this._actions[c]=a.filter(function(a){return a!==b})},this):null!=this._actions[a]&&(this._actions[a]=h.without(this._actions[a],b)),this}function g(a){if("string"==typeof a&&(a=new c(a)),!h.isObject(a)||a instanceof c||(a=h.extend(new c,a)),!(a instanceof c))throw new Error("Expecting action name, object or instance of Action.");var b=a.name,d=k.call(arguments,1);if(d.unshift(a),null!=this._actions&&Array.isArray(this._actions[b])&&this._actions[b].some(function(b){return a.bubbles?void b.apply(this,d):!0},this),a.bubbles&&null!=this.parent){for(var e=this.parent;"function"!=typeof e.fireAction;){if(null==e.parent)return;e=e.parent}e.fireAction.apply(e,d)}return this}var h=a("underscore"),i=a("../");b.exports=function(){this.addAction=d,this.addActionOnce=e,this.removeAction=f,this.fireAction=g,this.decorate(l);var a=h.result(this,"actions");null!=a&&this.addAction(a)};var j=["change","click","dblclick","mousedown","mouseup","mouseenter","mouseleave","scroll","blur","focus","input","submit","reset","keydown","keypress","keyup","drag","dragdrop","dragend","dragenter","dragexit","dragleave","dragover","dragstart","drop"],k=Array.prototype.slice,l={};j.forEach(function(a){l["on-"+a]=function(b,d){function e(a){var e=new c(d);e.original=a,e.target=e.node=g,e.context=e.model=b.model,e.view=b.view;for(var h=i;"function"!=typeof h.fireAction;){if(null==h.parent)return;h=h.parent}h.fireAction.apply(h,[e].concat(f))}var f,g,i=this;g=b.target,f=h.toArray(arguments).slice(2),g.addEventListener(a,e),b.comp.onInvalidate(function(){g.removeEventListener(a,e)})}}),i.Action=c,c.prototype.bubbles=!0,c.prototype.stopPropagation=function(){return this.bubbles=!1,this}},{"../":3,underscore:17}],8:[function(a,b,c){var d=a("underscore"),e=c._plugins={};c.loadPlugin=function(a,b,c){if(d.isString(b)){if(null==e[b])throw new Error("No plugin exists with id '"+b+"'.");b=e[b]}if(!d.isFunction(b))throw new Error("Expecting string or function for plugin");return null==a._loaded_plugins&&(a._loaded_plugins=[]),~a._loaded_plugins.indexOf(b)?a:(a._loaded_plugins.push(b),null==c&&(c=[]),d.isArray(c)||(c=[c]),b.apply(a,c),a)};var f=c.registerPlugin=function(a,b){if("string"!=typeof a)throw new Error("Expecting string name for plugin.");if("function"!=typeof b)throw new Error("Expecting function for plugin.");if(b!==e[a]){if(null!=e[a])throw new Error('Refusing to overwrite existing plugin "name".');e[a]=b}};f("actions",a("./actions")),f("twoway",a("./twoway"))},{"./actions":7,"./twoway":9,underscore:17}],9:[function(a,b){function c(a,b,d){if(i.isObject(a))return i.each(a,function(a,b){c.call(this,b,a)},this),this;if("string"!=typeof a)throw new Error("Expecting a string for the form binding ID.");if(null==this._formBindings&&(this._formBindings={}),null!=this._formBindings[a])throw new Error("A form binding with id '"+a+"' already exists.");if(i.isObject(b)&&null==d&&(d=b.change,b=b.get),"function"!=typeof b)throw new Error("Expecting a function or object for the form binding getter.");return"function"!=typeof d&&(d=null),this._formBindings[a]={get:b,change:d},this}function d(a){if("string"==typeof a)for(var b,c=this;null!=c;){if(b=c._formBindings,null!=b&&null!=b[a])return b[a];c=c.parent}}function e(a){var b=null!=this._formBindings[a];return delete this._formBindings[a],b}function f(a){switch(a.tagName.toLowerCase()){case"input":for(var b in k)if(i.contains(k[b],a.type))return b;break;case"select":return"select";case"option":return"option";case"textarea":return"text"}}function g(a,b){null==b&&(b=f(a));var c;switch(b){case"number":c=a.valueAsNumber;break;case"text":c=a.value;break;case"checkbox":c=a.checked;break;case"date":c=a.valueAsDate;break;case"select":var d=a.querySelector("option:checked");null!=d&&(c=d.$bound_value);break;case"file":c=a.multiple?i.toArray(a.files):a.files[0];break;case"radio":c=a.$bound_value}return c}function h(a,b,c){switch(null==c&&(c=f(a)),c){case"number":if(document.activeElement===a)return;i.isNumber(b)?a.valueAsNumber=b:a.value=b;break;case"text":if(document.activeElement===a)return;a.value=null==b?"":b.toString();break;case"checkbox":a.checked=!!b;break;case"date":if(document.activeElement===a)return;i.isDate(b)?a.valueAsDate=b:a.value=b;break;case"select":i.toArray(a.querySelectorAll("option")).forEach(function(a){a.selected=a.$bound_value===b});break;case"radio":a.checked=a.$bound_value===b}}var i=a("underscore"),j=["radio","option"];b.exports=function(a){a=a||{},this.addFormBinding=c,this.getFormBinding=d,this.removeFormBinding=e,this.decorate("bind-to",function(b,c,d){var e=this.getFormBinding(c);if(null!=e){var i,d,j=b.target,k=f(j),l=this;"function"==typeof e.change&&(i=function(a){e.change.call(l,g(j,k),b.model,a)},j.addEventListener("change",i),a.lazy||d||j.addEventListener("keyup",i),b.comp.onInvalidate(function(){j.removeEventListener("change",i),j.removeEventListener("keyup",i)}));var m=this.autorun(function(){h(j,e.get.call(l,b.model),k)});m.invalidate()}}),this.decorate("value",function(a,b){var c=a.target,d=f(c);if(!i.contains(j,d))return void(c.value=b);var e=this.renderArguments(a.template.arguments,a.model);c.$bound_value=e.length<=1?e[0]:e,c.value=b},{parse:"string"});var b=i.result(this,"twoway");i.isObject(b)&&this.addFormBinding(b)};var k={text:["text","color","email","password","search","tel","url","hidden"],number:["number","range"],date:["date","datetime","datetime-local","month","time","week"],file:["file"],checkbox:["checkbox"],radio:["radio"]}},{underscore:17}],10:[function(a,b){{var c=a("underscore"),d=a("trackr"),e=(a("./util"),a("./model")),f=a("./view");b.exports=f.extend({constructor:function(){this.rows={},this._row_deps={},f.apply(this,arguments)},invert:function(a){return c.isBoolean(a)||(a=!this._inverted),this._inverted=a,this},isInverted:function(){return!!this._inverted},setPath:function(a){return this._path=a,this},onRow:function(a){if(!c.isFunction(a))throw new Error("Expecting function for row handler.");return this._onRow=a,this},addRow:function(a,b){this.removeRow(a),e.isModel(b)||(b=new e(b,this.model));var c=new f(b);return c.render=this._onRow,this.rows[a]=c,this.addMember(c),c.mount(),c},hasRow:function(a){return null!=this.getRow(a)},getRow:function(a){return this.rows[a]},removeRow:function(a){if(null==this.rows[a])return this;var b=this.rows[a];return this.removeMember(b),delete this.rows[a],this},removeAllRows:function(){return Object.keys(this.rows).forEach(this.removeRow,this),this},render:function(){function a(){return i.callProxyMethod(j,b,"isEmpty")}if(null==this._path)throw new Error("Missing path.");var b,f,g,h,i,j,k;b=this.get(this._path),i=new e(b,this.model),j=i.getProxyByValue(b),g=this.isInverted(),h=i.callProxyMethod(j,b,"isList"),d.nonreactive(function(){f=!b||h&&!a()}),f&&g?(h&&a(),this.addRow(0,i)):f||g?h&&a():h?(k=[],this.autorun(function(a){var f=i.callProxyMethod(j,b,"keys");d.currentComputation=a._parent,c.difference(k,f).forEach(function(a){this._row_deps[a]&&(this._row_deps[a].stop(),delete this._row_deps[a]),this.removeRow(a)},this),c.difference(f,k).forEach(function(a){var c,d;c=this.getRow(a),d=null!=c?c.model:new e(null,new e({$key:a},this.model)),this._row_deps[a]=this.autorun(function(){d.set(i.callProxyMethod(j,b,"get",a))}),null==c&&this.addRow(a,d)},this),d.currentComputation=a,k=f})):this.addRow(0,i),this.once("invalidate",function(){this._row_deps={},this.removeAllRows()})}},{isEmpty:function(a,b){return a.data?(null==b&&(b=a.getProxyByValue(a.data)),a.callProxyMethod(b,a.data,"isList")&&a.callProxyMethod(b,a.data,"isEmpty")):!0}})}},{"./model":5,"./util":13,"./view":14,trackr:16,underscore:17}],11:[function(a,b,c){var d=a("underscore"),e=a("trackr"),f=a("./util"),g=c.track=function(a,b){function c(a,c){var d;return"function"==typeof b&&(d=b.apply(this,arguments)),"undefined"==typeof d&&"undefined"!=typeof c&&(d=g(c)),d}return d.isArray(a)?i(a,c):f.isPlainObject(a)?h(a,c):a},h=(c.trackProperty=function(a,b,c,f){if(!d.isObject(a))throw new Error("Expecting object to define the reactive property on.");if("string"!=typeof b)throw new Error("Expecting string for property name.");var g=new e.Dependency;return Object.defineProperty(a,b,{configurable:null==f||f.configurable!==!1,enumerable:null==f||f.enumerable!==!1,set:function(a){return a!==c&&(c=a,g.changed()),c},get:function(){return g.depend(),c}}),a},c.trackObject=function(a,b){function c(a,c,d){return"undefined"!=typeof d?e.nonreactive(function(){return"function"==typeof b?b.call(a,c,d):d}):void 0}function f(a){return i[a].depend(),h[a]}function g(a,b){var d=h[a];h[a]=c(this,a,b);var f=i[a];return null==f&&(f=i[a]=new e.Dependency),d!==h[a]&&f.changed(),j.changed(),h[a]}if(a.__reactive)return a;var h={},i={},j=new e.Dependency,k="function"==typeof a.constructor?Object.create(a.constructor.prototype):{};d.extend(k,{defineProperty:function(a,b,c){return Object.defineProperty(this,a,{configurable:null==c||c.configurable!==!1,enumerable:null==c||c.enumerable!==!1,get:f.bind(this,a),set:g.bind(this,a)}),this[a]=b,this},deleteProperty:function(a){var b=i[a];return delete this[a]&&(delete h[a],delete i[a],b&&b.changed()),this},toJSON:function(){return j.depend(),d.clone(h)}}),Object.defineProperty(k,"__reactive",{configurable:!1,enumerable:!1,value:!0,writeable:!1});var l=Object.create(k);return d.each(a,function(a,b){l.defineProperty(b,a)}),l}),i=c.trackArray=function(a,b){function c(a,c,d){return"undefined"!=typeof d?e.nonreactive(function(){return"function"==typeof b?b.call(a,c,d):d}):void 0}function g(a){return j[a].depend(),k[a]}function h(a,b){var d=k[a];k[a]=c(this,a,b);var f=j[a];return null==f&&(f=j[a]=new e.Dependency),d!==k[a]&&f.changed(),k[a]}function i(a){var b;return"number"==typeof a&&a>=l.length?(null!=(b=j[a])&&delete j[a],delete l[a],delete k[a],void b.changed()):(h.call(this,a,l[a]),void Object.defineProperty(l,a.toString(),{configurable:!0,enumerable:!0,get:g.bind(l,a),set:h.bind(l,a)}))}if(!d.isArray(a))throw new Error("Expecting array.");if(a.__reactive)return a;var j={length:new e.Dependency},k={},l=f.patchArray([]);return l.observe(function(a){var b,c,d,e,f,g;if(null!=a&&(b=a.added-a.removed)){for(e=l.length,g=e-b,c=Math.min(g,e),d=Math.max(g,e),f=c;d>f;f++)i(f);j.length.changed()}}),Object.defineProperty(l,"__reactive",{configurable:!1,enumerable:!1,value:!0,writeable:!1}),Object.defineProperty(l,"$length",{configurable:!1,enumerable:!1,get:function(){return j.length.depend(),this.length}}),l.push.apply(l,a),l}},{"./util":13,trackr:16,underscore:17}],12:[function(a,b){b.exports={ROOT:1,HTML:2,TEXT:3,ELEMENT:4,ATTRIBUTE:5,XCOMMENT:6,INTERPOLATOR:7,TRIPLE:8,SECTION:9,INVERTED:10,PARTIAL:11,MCOMMENT:12,LITERAL:13}},{}],13:[function(a,b,c){var d=a("underscore");c.result=function(a,b){var c=null==a?void 0:a[b];return d.isFunction(c)?c.apply(a,Array.prototype.slice.call(arguments,2)):c};c.isPlainObject=function(a){return null!=a&&(a.constructor===Object||a.__proto__===Object.prototype)};c.isSubClass=function(a,b){return b===a||null!=b&&b.prototype instanceof a},c.decodeEntities=function(){if("undefined"!=typeof document){var a=document.createElement("div"),b=/&(?:#x[a-f0-9]+|#[0-9]+|[a-z0-9]+);?/gi;return function(c){return c=c.replace(b,function(b){return a.innerHTML=b,a.textContent}),a.textContent="",c}}}(),c.parseHTML=function(){if("undefined"!=typeof document){var a=document.createElement("div");return function(b){a.innerHTML=null!=b?b.toString():"";var c=d.toArray(a.childNodes);for(var e in c)a.removeChild(c[e]);return c}}}();var e=(c.subclass=function(a,b){var c,e=this;c=a&&d.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},d.extend(c,e,b);var f=function(){this.constructor=c};return f.prototype=e.prototype,c.prototype=new f,a&&d.extend(c.prototype,a),c.__super__=e.prototype,c},"undefined"!=typeof Element?Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector:function(){return!1});c.matchesSelector=function(a,b){return e.call(a,b)};var f=c.matches=function(a,b){return d.isArray(b)?b.some(function(b){return f(a,b)}):b instanceof window.Node?a===b:"function"==typeof b?!!b(a):a.nodeType===window.Node.ELEMENT_NODE?e.call(a,b):!1};c.closest=function(a,b){for(;null!=a;){if(1===a.nodeType&&f(a,b))return a;a=a.parentNode}return null};var g=c.defineComputedProperty=function(a,b,c){if("function"!=typeof c)throw new Error("Expecting function for computed property value.");Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:function(){return c.call(a)}})};c.defineComputedProperties=function(a,b){Object.keys(b).forEach(function(c){g(a,c,b[c])})};var h=["pop","push","reverse","shift","sort","splice","unshift"],i=(c.patchArray=function(a){if(a._patched)return a;var b=[],c=[];return h.forEach(function(a){function e(){var b,e,f,g;return f=d.toArray(arguments),b=i(this,a,f),e=j(this,b),g=Array.prototype[a].apply(this,f),c.forEach(function(a){a.call(this,e)},this),g}Object.defineProperty(b,a,{value:e})}),{}.__proto__?a.__proto__=b:h.forEach(function(c){Object.defineProperty(a,c,{value:b[c],configurable:!0})}),d.each({_patched:!0,observe:function(a){if("function"!=typeof a)throw new Error("Expecting function to observe with.");return c.push(a),this},stopObserving:function(a){var b=c.indexOf(a);return b>-1&&c.splice(b,1),this}},function(b,c){Object.defineProperty(a,c,{configurable:!1,enumerable:!1,value:b,writeable:!1})}),a},c.getSpliceEquivalent=function(a,b,c){switch(b){case"splice":return c;case"sort":case"reverse":return null;case"pop":return a.length?[-1]:null;case"push":return[a.length,0].concat(c);case"shift":return[0,1];case"unshift":return[0,0].concat(c)}}),j=c.summariseSpliceOperation=function(a,b){var c,d,e;return b?(c=+(b[0]<0?a.length+b[0]:b[0]),d=Math.max(0,b.length-2),e=void 0!==b[1]?b[1]:a.length-c,e=Math.min(e,a.length-c),{index:c,added:d,removed:e}):null}},{underscore:17}],14:[function(a,b){var c=a("underscore"),d=a("trackr"),e=(a("./events"),a("./util")),f=a("./model"),g=a("./plugins"),h=a("./domrange"),i=b.exports=h.extend({constructor:function(a,b){var d=c.result(this,"initialState")||c.result(this,"defaults");"undefined"!=typeof d&&(f.isModel(d)||(d=new f(d,null,b&&b.state)),f.isModel(a)&&(d.parent=a.parent,a.parent=d),this.addData(d),this.stateModel=d,e.defineComputedProperty(this,"state",function(){return this.stateModel.data})),e.defineComputedProperty(this,"data",function(){return this.model.data}),"undefined"!=typeof a&&this.addData(a,b),h.call(this),this.initialize.call(this,b)},initialize:function(){},use:function(a){return g.loadPlugin(this,a,c.toArray(arguments).slice(1))},addData:function(a,b){return f.isModel(a)||(a=new f(a,this.model,b)),this.model=a,this},paint:function(a,b,c,d){return h.prototype.attach.apply(this,arguments),c||d||this.isMounted()||this.mount(),this},detach:function(a){return a||this.stop(),h.prototype.detach.apply(this,arguments),this},autorun:function(a,b){var c=d.autorun(a,this);return b&&!d.active&&c.stop(),c},mount:function(){var a,b=c.toArray(arguments);return d.nonreactive(function(){this.stop(),this._mounting=!0,this.trigger("mount:before",b)},this),a=this._comp=this.autorun(function(a){this.render.apply(this,b),this.trigger("render",b,a),a.onInvalidate(function(){this.trigger("invalidate",b,a),a.stopped&&(this.trigger("stop",b),delete this._comp)})}),d.nonreactive(function(){this.trigger("mount:after",b,a),delete this._mounting},this),this},render:function(){},isMounted:function(){return this.isMounting()||null!=this._comp},isMounting:function(){return!!this._mounting},getComputation:function(){return this._comp},invalidate:function(){return this.isMounted()&&this._comp.invalidate(),this},onInvalidate:function(a){return this.isMounted()&&this._comp.onInvalidate(a),this},stop:function(){return this.isMounted()&&this._comp.stop(),this}});["registerProxy"].forEach(function(a){i.prototype[a]=function(){return this.model[a].apply(this.model,arguments),this}}),["set","get","getLocal","getProxyByValue","getModelAtOffset","getRootModel","findModel","getContainerValue","getAllModels"].forEach(function(a){i.prototype[a]=function(){return this.model[a].apply(this.model,arguments)}})},{"./domrange":1,"./events":2,"./model":5,"./plugins":8,"./util":13,trackr:16,underscore:17}],15:[function(a,b){function c(){if(!g){g=!0;for(var a,b=f.length;b;){a=f,f=[];for(var c=-1;++c<b;)a[c]();b=f.length}g=!1}}function d(){}var e=b.exports={},f=[],g=!1;e.nextTick=function(a){f.push(a),g||setTimeout(c,0)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.binding=function(){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],16:[function(a,b){(function(a){var c=b.exports={};c.active=!1,c.currentComputation=null;var d=function(a){c.currentComputation=a,c.active=!!a},e=function(){return"undefined"!=typeof Meteor?Meteor._debug:"undefined"!=typeof console&&console.log?function(){console.log.apply(console,arguments)}:function(){}},f=function(a,b){if(m)throw b;var c;if(b.stack&&b.message){var d=b.stack.indexOf(b.message);c=d>=0&&10>=d?b.stack:b.message+("\n"===b.stack.charAt(0)?"":"\n")+b.stack}else c=b.stack||b.message;e()("Exception from Trackr "+a+" function:",c)},g=function(a){return"undefined"==typeof Meteor||Meteor.isClient?a:function(){var b=arguments;Meteor._noYieldsAllowed(function(){a.apply(null,b)})}},h=1,i=[],j=!1,k=!1,l=!1,m=!1,n=[],o="undefined"!=typeof window?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame:null;c.nextTick=null!=o?o.bind(window):"undefined"!=typeof a?a.nextTick:function(a){setTimeout(a,16)};var p=function(){j||(c.nextTick(c.flush),j=!0)},q=!1;c.Computation=function(a,b,c){if(!q)throw new Error("Trackr.Computation constructor is private; use Trackr.autorun");q=!1;var d=this;d.stopped=!1,d.invalidated=!1,d.firstRun=!0,d._id=h++,d._onInvalidateCallbacks=[],d._parent=b,d._func=a,d._recomputing=!1,d._context=c||null;var e=!0;try{d._compute(),e=!1}finally{d.firstRun=!1,e&&d.stop()}},c.Computation.prototype.onInvalidate=function(a,b){var d=this;if("function"!=typeof a)throw new Error("onInvalidate requires a function");d.invalidated?c.nonreactive(function(){g(a).call(void 0!==b?b:d._context,d)}):d._onInvalidateCallbacks.push({fn:a,ctx:b})},c.Computation.prototype.invalidate=function(){var a=this;if(!a.invalidated){a._recomputing||a.stopped||(p(),i.push(this)),a.invalidated=!0;for(var b,d=0;b=a._onInvalidateCallbacks[d];d++)c.nonreactive(function(){g(b.fn).call(void 0!==b.ctx?b.ctx:a._context,a)});a._onInvalidateCallbacks=[]}},c.Computation.prototype.stop=function(){this.stopped||(this.stopped=!0,this.invalidate())},c.Computation.prototype._compute=function(){var a=this;a.invalidated=!1;var b=c.currentComputation;d(a);var e=l;l=!0;try{g(a._func).call(a._context,a)}finally{d(b),l=e}},c.Computation.prototype._recompute=function(){var a=this;a._recomputing=!0;try{for(;a.invalidated&&!a.stopped;)try{a._compute()}catch(b){f("recompute",b)}}finally{a._recomputing=!1}},c.Dependency=function(){this._dependentsById={}},c.Dependency.prototype.depend=function(a){if(!a){if(!c.active)return!1;a=c.currentComputation}var b=this,d=a._id;return d in b._dependentsById?!1:(b._dependentsById[d]=a,a.onInvalidate(function(){delete b._dependentsById[d]}),!0)},c.Dependency.prototype.changed=function(){var a=this;for(var b in a._dependentsById)a._dependentsById[b].invalidate()},c.Dependency.prototype.hasDependents=function(){var a=this;for(var b in a._dependentsById)return!0;return!1},c.flush=function(a){if(k)throw new Error("Can't call Trackr.flush while flushing");if(l)throw new Error("Can't flush inside Trackr.autorun");k=!0,j=!0,m=!(!a||!a._throwFirstError);var b=!1;try{for(;i.length||n.length;){for(;i.length;){var d=i.shift();d._recompute()}if(n.length){var e=n.shift();try{e.fn.call(e.ctx)}catch(g){f("afterFlush",g)}}}b=!0}finally{b||(k=!1,c.flush({_throwFirstError:!1})),j=!1,k=!1}},c.autorun=function(a,b){if("function"!=typeof a)throw new Error("Trackr.autorun requires a function argument");q=!0;var d=new c.Computation(a,c.currentComputation,b);return c.active&&c.onInvalidate(function(){d.stop()}),d},c.nonReactive=c.nonreactive=function(a,b){var e=c.currentComputation;d(null);try{return a.call(b)}finally{d(e)}},c.nonReactable=c.nonreactable=function(a,b){return function(){var d=arguments;return null==b&&(b=this),c.nonreactive(function(){return a.apply(b,d)})}},c.onInvalidate=function(a,b){if(!c.active)throw new Error("Trackr.onInvalidate requires a currentComputation");c.currentComputation.onInvalidate(a,b)},c.afterFlush=function(a,b){n.push({fn:a,ctx:b}),p()}}).call(this,a("_process"))},{_process:15}],17:[function(b,c,d){(function(){function b(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=v(d,f,4);var g=!A(c)&&u.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function e(a){return function(b,c,d){c=w(c,d);for(var e=null!=b&&b.length,f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function f(a,b){var c=F.length,d=a.constructor,e=u.isFunction(d)&&d.prototype||j,f="constructor";for(u.has(a,f)&&!u.contains(b,f)&&b.push(f);c--;)f=F[c],f in a&&a[f]!==e[f]&&!u.contains(b,f)&&b.push(f)}var g=this,h=g._,i=Array.prototype,j=Object.prototype,k=Function.prototype,l=i.push,m=i.slice,n=j.toString,o=j.hasOwnProperty,p=Array.isArray,q=Object.keys,r=k.bind,s=Object.create,t=function(){},u=function(a){return a instanceof u?a:this instanceof u?void(this._wrapped=a):new u(a)};"undefined"!=typeof d?("undefined"!=typeof c&&c.exports&&(d=c.exports=u),d._=u):g._=u,u.VERSION="1.8.2";var v=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},w=function(a,b,c){return null==a?u.identity:u.isFunction(a)?v(a,b,c):u.isObject(a)?u.matcher(a):u.property(a)};u.iteratee=function(a,b){return w(a,b,1/0)};var x=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},y=function(a){if(!u.isObject(a))return{};if(s)return s(a);t.prototype=a;var b=new t;return t.prototype=null,b},z=Math.pow(2,53)-1,A=function(a){var b=a&&a.length;return"number"==typeof b&&b>=0&&z>=b};u.each=u.forEach=function(a,b,c){b=v(b,c);var d,e;if(A(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=u.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},u.map=u.collect=function(a,b,c){b=w(b,c);for(var d=!A(a)&&u.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)
}return f},u.reduce=u.foldl=u.inject=b(1),u.reduceRight=u.foldr=b(-1),u.find=u.detect=function(a,b,c){var d;return d=A(a)?u.findIndex(a,b,c):u.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},u.filter=u.select=function(a,b,c){var d=[];return b=w(b,c),u.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},u.reject=function(a,b,c){return u.filter(a,u.negate(w(b)),c)},u.every=u.all=function(a,b,c){b=w(b,c);for(var d=!A(a)&&u.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},u.some=u.any=function(a,b,c){b=w(b,c);for(var d=!A(a)&&u.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},u.contains=u.includes=u.include=function(a,b,c){return A(a)||(a=u.values(a)),u.indexOf(a,b,"number"==typeof c&&c)>=0},u.invoke=function(a,b){var c=m.call(arguments,2),d=u.isFunction(b);return u.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},u.pluck=function(a,b){return u.map(a,u.property(b))},u.where=function(a,b){return u.filter(a,u.matcher(b))},u.findWhere=function(a,b){return u.find(a,u.matcher(b))},u.max=function(a,b,c){var d,e,f=-1/0,g=-1/0;if(null==b&&null!=a){a=A(a)?a:u.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-1/0&&f===-1/0)&&(f=a,g=e)});return f},u.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=A(a)?a:u.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(g>e||1/0===e&&1/0===f)&&(f=a,g=e)});return f},u.shuffle=function(a){for(var b,c=A(a)?a:u.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=u.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},u.sample=function(a,b,c){return null==b||c?(A(a)||(a=u.values(a)),a[u.random(a.length-1)]):u.shuffle(a).slice(0,Math.max(0,b))},u.sortBy=function(a,b,c){return b=w(b,c),u.pluck(u.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var B=function(a){return function(b,c,d){var e={};return c=w(c,d),u.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};u.groupBy=B(function(a,b,c){u.has(a,c)?a[c].push(b):a[c]=[b]}),u.indexBy=B(function(a,b,c){a[c]=b}),u.countBy=B(function(a,b,c){u.has(a,c)?a[c]++:a[c]=1}),u.toArray=function(a){return a?u.isArray(a)?m.call(a):A(a)?u.map(a,u.identity):u.values(a):[]},u.size=function(a){return null==a?0:A(a)?a.length:u.keys(a).length},u.partition=function(a,b,c){b=w(b,c);var d=[],e=[];return u.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},u.first=u.head=u.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:u.initial(a,a.length-b)},u.initial=function(a,b,c){return m.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},u.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:u.rest(a,Math.max(0,a.length-b))},u.rest=u.tail=u.drop=function(a,b,c){return m.call(a,null==b||c?1:b)},u.compact=function(a){return u.filter(a,u.identity)};var C=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=a&&a.length;h>g;g++){var i=a[g];if(A(i)&&(u.isArray(i)||u.isArguments(i))){b||(i=C(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};u.flatten=function(a,b){return C(a,b,!1)},u.without=function(a){return u.difference(a,m.call(arguments,1))},u.uniq=u.unique=function(a,b,c,d){if(null==a)return[];u.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=w(c,d));for(var e=[],f=[],g=0,h=a.length;h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?u.contains(f,j)||(f.push(j),e.push(i)):u.contains(e,i)||e.push(i)}return e},u.union=function(){return u.uniq(C(arguments,!0,!0))},u.intersection=function(a){if(null==a)return[];for(var b=[],c=arguments.length,d=0,e=a.length;e>d;d++){var f=a[d];if(!u.contains(b,f)){for(var g=1;c>g&&u.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},u.difference=function(a){var b=C(arguments,!0,!0,1);return u.filter(a,function(a){return!u.contains(b,a)})},u.zip=function(){return u.unzip(arguments)},u.unzip=function(a){for(var b=a&&u.max(a,"length").length||0,c=Array(b),d=0;b>d;d++)c[d]=u.pluck(a,d);return c},u.object=function(a,b){for(var c={},d=0,e=a&&a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},u.indexOf=function(a,b,c){var d=0,e=a&&a.length;if("number"==typeof c)d=0>c?Math.max(0,e+c):c;else if(c&&e)return d=u.sortedIndex(a,b),a[d]===b?d:-1;if(b!==b)return u.findIndex(m.call(a,d),u.isNaN);for(;e>d;d++)if(a[d]===b)return d;return-1},u.lastIndexOf=function(a,b,c){var d=a?a.length:0;if("number"==typeof c&&(d=0>c?d+c+1:Math.min(d,c+1)),b!==b)return u.findLastIndex(m.call(a,0,d),u.isNaN);for(;--d>=0;)if(a[d]===b)return d;return-1},u.findIndex=e(1),u.findLastIndex=e(-1),u.sortedIndex=function(a,b,c,d){c=w(c,d,1);for(var e=c(b),f=0,g=a.length;g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},u.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var D=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=y(a.prototype),g=a.apply(f,e);return u.isObject(g)?g:f};u.bind=function(a,b){if(r&&a.bind===r)return r.apply(a,m.call(arguments,1));if(!u.isFunction(a))throw new TypeError("Bind must be called on a function");var c=m.call(arguments,2),d=function(){return D(a,d,b,this,c.concat(m.call(arguments)))};return d},u.partial=function(a){var b=m.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===u?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return D(a,c,this,this,f)};return c},u.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=u.bind(a[c],a);return a},u.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return u.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},u.delay=function(a,b){var c=m.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},u.defer=u.partial(u.delay,u,1),u.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:u.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=u.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},u.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=u.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=u.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},u.wrap=function(a,b){return u.partial(b,a)},u.negate=function(a){return function(){return!a.apply(this,arguments)}},u.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},u.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},u.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},u.once=u.partial(u.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];u.keys=function(a){if(!u.isObject(a))return[];if(q)return q(a);var b=[];for(var c in a)u.has(a,c)&&b.push(c);return E&&f(a,b),b},u.allKeys=function(a){if(!u.isObject(a))return[];var b=[];for(var c in a)b.push(c);return E&&f(a,b),b},u.values=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},u.mapObject=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},u.pairs=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},u.invert=function(a){for(var b={},c=u.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},u.functions=u.methods=function(a){var b=[];for(var c in a)u.isFunction(a[c])&&b.push(c);return b.sort()},u.extend=x(u.allKeys),u.extendOwn=u.assign=x(u.keys),u.findKey=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},u.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;u.isFunction(b)?(e=u.allKeys(g),d=v(b,c)):(e=C(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},u.omit=function(a,b,c){if(u.isFunction(b))b=u.negate(b);else{var d=u.map(C(arguments,!1,!1,1),String);b=function(a,b){return!u.contains(d,b)}}return u.pick(a,b,c)},u.defaults=x(u.allKeys,!0),u.clone=function(a){return u.isObject(a)?u.isArray(a)?a.slice():u.extend({},a):a},u.tap=function(a,b){return b(a),a},u.isMatch=function(a,b){var c=u.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var G=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof u&&(a=a._wrapped),b instanceof u&&(b=b._wrapped);var e=n.call(a);if(e!==n.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(u.isFunction(g)&&g instanceof g&&u.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!G(a[i],b[i],c,d))return!1}else{var j,k=u.keys(a);if(i=k.length,u.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!u.has(b,j)||!G(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};u.isEqual=function(a,b){return G(a,b)},u.isEmpty=function(a){return null==a?!0:A(a)&&(u.isArray(a)||u.isString(a)||u.isArguments(a))?0===a.length:0===u.keys(a).length},u.isElement=function(a){return!(!a||1!==a.nodeType)},u.isArray=p||function(a){return"[object Array]"===n.call(a)},u.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},u.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){u["is"+a]=function(b){return n.call(b)==="[object "+a+"]"}}),u.isArguments(arguments)||(u.isArguments=function(a){return u.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(u.isFunction=function(a){return"function"==typeof a||!1}),u.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},u.isNaN=function(a){return u.isNumber(a)&&a!==+a},u.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===n.call(a)},u.isNull=function(a){return null===a},u.isUndefined=function(a){return void 0===a},u.has=function(a,b){return null!=a&&o.call(a,b)},u.noConflict=function(){return g._=h,this},u.identity=function(a){return a},u.constant=function(a){return function(){return a}},u.noop=function(){},u.property=function(a){return function(b){return null==b?void 0:b[a]}},u.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},u.matcher=u.matches=function(a){return a=u.extendOwn({},a),function(b){return u.isMatch(b,a)}},u.times=function(a,b,c){var d=Array(Math.max(0,a));b=v(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},u.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},u.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=u.invert(H),J=function(a){var b=function(b){return a[b]},c="(?:"+u.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};u.escape=J(H),u.unescape=J(I),u.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),u.isFunction(d)?d.call(a):d};var K=0;u.uniqueId=function(a){var b=++K+"";return a?a+b:b},u.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,O=function(a){return"\\"+M[a]};u.template=function(a,b,c){!b&&c&&(b=c),b=u.defaults({},b,u.templateSettings);var d=RegExp([(b.escape||L).source,(b.interpolate||L).source,(b.evaluate||L).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(N,O),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,u)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},u.chain=function(a){var b=u(a);return b._chain=!0,b};var P=function(a,b){return a._chain?u(b).chain():b};u.mixin=function(a){u.each(u.functions(a),function(b){var c=u[b]=a[b];u.prototype[b]=function(){var a=[this._wrapped];return l.apply(a,arguments),P(this,c.apply(u,a))}})},u.mixin(u),u.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=i[a];u.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],P(this,c)}}),u.each(["concat","join","slice"],function(a){var b=i[a];u.prototype[a]=function(){return P(this,b.apply(this._wrapped,arguments))}}),u.prototype.value=function(){return this._wrapped},u.prototype.valueOf=u.prototype.toJSON=u.prototype.value,u.prototype.toString=function(){return""+this._wrapped},"function"==typeof a&&a.amd&&a("underscore",[],function(){return u})}).call(this)},{}]},{},[3])(3)});